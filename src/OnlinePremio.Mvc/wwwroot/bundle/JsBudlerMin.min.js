!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.moment=t()}(this,function(){"use strict";function t(){return af.apply(null,arguments)}function ut(n){return n instanceof Array||"[object Array]"===Object.prototype.toString.call(n)}function ai(n){return null!=n&&"[object Object]"===Object.prototype.toString.call(n)}function b(n){return void 0===n}function dt(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function nr(n){return n instanceof Date||"[object Date]"===Object.prototype.toString.call(n)}function yf(n,t){for(var r=[],i=0;i<n.length;++i)r.push(t(n[i],i));return r}function l(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function pt(n,t){for(var i in t)l(t,i)&&(n[i]=t[i]);return l(t,"toString")&&(n.toString=t.toString),l(t,"valueOf")&&(n.valueOf=t.valueOf),n}function ft(n,t,i,r){return ro(n,t,i,r,!0).utc()}function u(n){return null==n._pf&&(n._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),n._pf}function tu(n){if(null==n._isValid){var t=u(n),r=vf.call(t.parsedDateParts,function(n){return null!=n}),i=!isNaN(n._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(n._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(n))return i;n._isValid=i}return n._isValid}function tr(n){var t=ft(NaN);return null!=n?pt(u(t),n):u(t).userInvalidated=!0,t}function iu(n,t){var i,r,f;if(b(t._isAMomentObject)||(n._isAMomentObject=t._isAMomentObject),b(t._i)||(n._i=t._i),b(t._f)||(n._f=t._f),b(t._l)||(n._l=t._l),b(t._strict)||(n._strict=t._strict),b(t._tzm)||(n._tzm=t._tzm),b(t._isUTC)||(n._isUTC=t._isUTC),b(t._offset)||(n._offset=t._offset),b(t._pf)||(n._pf=u(t)),b(t._locale)||(n._locale=t._locale),0<ir.length)for(i=0;i<ir.length;i++)b(f=t[r=ir[i]])||(n[r]=f);return n}function vi(n){iu(this,n);this._d=new Date(null!=n._d?n._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===rr&&(rr=!0,t.updateOffset(this),rr=!1)}function et(n){return n instanceof vi||null!=n&&null!=n._isAMomentObject}function d(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function f(n){var t=+n,i=0;return 0!==t&&isFinite(t)&&(i=d(t)),i}function pf(n,t,i){for(var e=Math.min(n.length,t.length),o=Math.abs(n.length-t.length),u=0,r=0;r<e;r++)(i&&n[r]!==t[r]||!i&&f(n[r])!==f(t[r]))&&u++;return u+o}function wf(n){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+n)}function g(n,i){var r=!0;return pt(function(){var u,e,f,o;if(null!=t.deprecationHandler&&t.deprecationHandler(null,n),r){for(e=[],f=0;f<arguments.length;f++){if(u="","object"==typeof arguments[f]){for(o in u+="\n["+f+"] ",arguments[0])u+=o+": "+arguments[0][o]+", ";u=u.slice(0,-2)}else u=arguments[f];e.push(u)}wf(n+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack);r=!1}return i.apply(this,arguments)},i)}function kf(n,i){null!=t.deprecationHandler&&t.deprecationHandler(n,i);ru[n]||(wf(i),ru[n]=!0)}function ot(n){return n instanceof Function||"[object Function]"===Object.prototype.toString.call(n)}function df(n,t){var i,r=pt({},n);for(i in t)l(t,i)&&(ai(n[i])&&ai(t[i])?(r[i]={},pt(r[i],n[i]),pt(r[i],t[i])):null!=t[i]?r[i]=t[i]:delete r[i]);for(i in n)l(n,i)&&!l(t,i)&&ai(n[i])&&(r[i]=pt({},r[i]));return r}function uu(n){null!=n&&this.set(n)}function p(n,t){var i=n.toLowerCase();ui[i]=ui[i+"s"]=ui[t]=n}function nt(n){if("string"==typeof n)return ui[n]||ui[n.toLowerCase()]}function fu(n){var i,t,r={};for(t in n)l(n,t)&&(i=nt(t))&&(r[i]=n[t]);return r}function w(n,t){eu[n]=t}function lt(n,t,i){var r=""+Math.abs(n),u=t-r.length;return(0<=n?i?"+":"":"-")+Math.pow(10,Math.max(0,u)).toString().substr(1)+r}function r(n,t,i,r){var u=r;"string"==typeof r&&(u=function(){return this[r]()});n&&(fi[n]=u);t&&(fi[t[0]]=function(){return lt(u.apply(this,arguments),t[1],t[2])});i&&(fi[i]=function(){return this.localeData().ordinal(u.apply(this,arguments),n)})}function fr(n,t){return n.isValid()?(t=ne(t,n.localeData()),ou[t]=ou[t]||function(n){for(var u,t=n.match(gf),i=0,r=t.length;i<r;i++)t[i]=fi[t[i]]?fi[t[i]]:(u=t[i]).match(/\[[\s\S]/)?u.replace(/^\[|\]$/g,""):u.replace(/\\/g,"");return function(i){for(var f="",u=0;u<r;u++)f+=ot(t[u])?t[u].call(i,n):t[u];return f}}(t),ou[t](n)):n.localeData().invalidDate()}function ne(n,t){function r(n){return t.longDateFormat(n)||n}var i=5;for(ur.lastIndex=0;0<=i&&ur.test(n);)n=n.replace(ur,r),ur.lastIndex=0,i-=1;return n}function i(n,t,i){cu[n]=ot(t)?t:function(n){return n&&i?i:t}}function ls(n,t){return l(cu,n)?cu[n](t._strict,t._locale):new RegExp(gt(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,i,r,u){return t||i||r||u})))}function gt(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function h(n,t){var i,r=t;for("string"==typeof n&&(n=[n]),dt(t)&&(r=function(n,i){i[t]=f(n)}),i=0;i<n.length;i++)lr[n[i]]=r}function pi(n,t){h(n,function(n,i,r,u){r._w=r._w||{};t(n,r._w,r,u)})}function wi(n){return ar(n)?366:365}function ar(n){return n%4==0&&n%100!=0||n%400==0}function ei(n,i){return function(r){return null!=r?(fe(this,n,r),t.updateOffset(this,i),this):vr(this,n)}}function vr(n,t){return n.isValid()?n._d["get"+(n._isUTC?"UTC":"")+t]():NaN}function fe(n,t,i){n.isValid()&&!isNaN(i)&&("FullYear"===t&&ar(n.year())&&1===n.month()&&29===n.date()?n._d["set"+(n._isUTC?"UTC":"")+t](i,n.month(),yr(i,n.month())):n._d["set"+(n._isUTC?"UTC":"")+t](i))}function yr(n,t){if(isNaN(n)||isNaN(t))return NaN;var i,r=(t%(i=12)+i)%i;return n+=(t-r)/12,1===r?ar(n)?29:28:31-r%7%2}function se(n,t){var i;if(!n.isValid())return n;if("string"==typeof t)if(/^\d+$/.test(t))t=f(t);else if(!dt(t=n.localeData().monthsParse(t)))return n;return i=Math.min(n.date(),yr(n.year(),t)),n._d["set"+(n._isUTC?"UTC":"")+"Month"](t,i),n}function he(n){return null!=n?(se(this,n),t.updateOffset(this,!0),this):vr(this,"Month")}function ae(){function f(n,t){return t.length-n.length}for(var i,r=[],u=[],t=[],n=0;n<12;n++)i=ft([2e3,n]),r.push(this.monthsShort(i,"")),u.push(this.months(i,"")),t.push(this.months(i,"")),t.push(this.monthsShort(i,""));for(r.sort(f),u.sort(f),t.sort(f),n=0;n<12;n++)r[n]=gt(r[n]),u[n]=gt(u[n]);for(n=0;n<24;n++)t[n]=gt(t[n]);this._monthsRegex=new RegExp("^("+t.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+u.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function bi(n){var t,i;return n<100&&0<=n?(i=Array.prototype.slice.call(arguments),i[0]=n+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(n)):t=new Date(Date.UTC.apply(null,arguments)),t}function pr(n,t,i){var r=7+t-i;return-((7+bi(n,0,r).getUTCDay()-t)%7)+r-1}function ve(n,t,i,r,u){var e,o,f=1+7*(t-1)+(7+i-r)%7+pr(n,r,u);return o=f<=0?wi(e=n-1)+f:f>wi(n)?(e=n+1,f-wi(n)):(e=n,f),{year:e,dayOfYear:o}}function ki(n,t,i){var u,f,e=pr(n.year(),t,i),r=Math.floor((n.dayOfYear()-e-1)/7)+1;return r<1?u=r+ti(f=n.year()-1,t,i):r>ti(n.year(),t,i)?(u=r-ti(n.year(),t,i),f=n.year()+1):(f=n.year(),u=r),{week:u,year:f}}function ti(n,t,i){var r=pr(n,t,i),u=pr(n+1,t,i);return(wi(n)-r+u)/7}function au(n,t){return n.slice(t,7).concat(n.slice(0,t))}function vu(){function u(n,t){return t.length-n.length}for(var f,e,o,s,h=[],i=[],r=[],t=[],n=0;n<7;n++)f=ft([2e3,1]).day(n),e=this.weekdaysMin(f,""),o=this.weekdaysShort(f,""),s=this.weekdays(f,""),h.push(e),i.push(o),r.push(s),t.push(e),t.push(o),t.push(s);for(h.sort(u),i.sort(u),r.sort(u),t.sort(u),n=0;n<7;n++)i[n]=gt(i[n]),r[n]=gt(r[n]),t[n]=gt(t[n]);this._weekdaysRegex=new RegExp("^("+t.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+h.join("|")+")","i")}function yu(){return this.hours()%12||12}function pe(n,t){r(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function we(n,t){return t._meridiemParse}function ke(n){return n?n.toLowerCase().replace("_","-"):n}function wr(n){var t=null;if(!y[n]&&"undefined"!=typeof module&&module&&module.exports)try{t=di._abbr;require("./locale/"+n);oi(t)}catch(n){}return y[n]}function oi(n,t){var i;return n&&((i=b(t)?wt(n):pu(n,t))?di=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),di._abbr}function pu(n,t){if(null===t)return delete y[n],null;var r,i=be;if(t.abbr=n,null!=y[n])kf("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=y[n]._config;else if(null!=t.parentLocale)if(null!=y[t.parentLocale])i=y[t.parentLocale]._config;else{if(null==(r=wr(t.parentLocale)))return gi[t.parentLocale]||(gi[t.parentLocale]=[]),gi[t.parentLocale].push({name:n,config:t}),null;i=r._config}return y[n]=new uu(df(i,t)),gi[n]&&gi[n].forEach(function(n){pu(n.name,n.config)}),oi(n),y[n]}function wt(n){var t;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return di;if(!ut(n)){if(t=wr(n))return t;n=[n]}return function(n){for(var t,i,f,u,r=0;r<n.length;){for(t=(u=ke(n[r]).split("-")).length,i=(i=ke(n[r+1]))?i.split("-"):null;0<t;){if(f=wr(u.slice(0,t).join("-")))return f;if(i&&i.length>=t&&pf(u,i,!0)>=t-1)break;t--}r++}return di}(n)}function wu(n){var i,t=n._a;return t&&-2===u(n).overflow&&(i=t[at]<0||11<t[at]?at:t[st]<1||t[st]>yr(t[tt],t[at])?st:t[v]<0||24<t[v]||24===t[v]&&(0!==t[it]||0!==t[vt]||0!==t[ni])?v:t[it]<0||59<t[it]?it:t[vt]<0||59<t[vt]?vt:t[ni]<0||999<t[ni]?ni:-1,u(n)._overflowDayOfYear&&(i<tt||st<i)&&(i=st),u(n)._overflowWeeks&&-1===i&&(i=as),u(n)._overflowWeekday&&-1===i&&(i=vs),u(n).overflow=i),n}function si(n,t,i){return null!=n?n:null!=t?t:i}function bu(n){var i,f,e,h,o,s=[],l,r;if(!n._d){for(l=n,r=new Date(t.now()),e=l._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()],n._w&&null==n._a[st]&&null==n._a[at]&&function(n){var t,o,f,i,r,e,h,s,l;null!=(t=n._w).GG||null!=t.W||null!=t.E?(r=1,e=4,o=si(t.GG,n._a[tt],ki(c(),1,4).year),f=si(t.W,1),((i=si(t.E,1))<1||7<i)&&(s=!0)):(r=n._locale._week.dow,e=n._locale._week.doy,l=ki(c(),r,e),o=si(t.gg,n._a[tt],l.year),f=si(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(s=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(s=!0)):i=r);f<1||f>ti(o,r,e)?u(n)._overflowWeeks=!0:null!=s?u(n)._overflowWeekday=!0:(h=ve(o,f,i,r,e),n._a[tt]=h.year,n._dayOfYear=h.dayOfYear)}(n),null!=n._dayOfYear&&(o=si(n._a[tt],e[tt]),(n._dayOfYear>wi(o)||0===n._dayOfYear)&&(u(n)._overflowDayOfYear=!0),f=bi(o,0,n._dayOfYear),n._a[at]=f.getUTCMonth(),n._a[st]=f.getUTCDate()),i=0;i<3&&null==n._a[i];++i)n._a[i]=s[i]=e[i];for(;i<7;i++)n._a[i]=s[i]=null==n._a[i]?2===i?1:0:n._a[i];24===n._a[v]&&0===n._a[it]&&0===n._a[vt]&&0===n._a[ni]&&(n._nextDay=!0,n._a[v]=0);n._d=(n._useUTC?bi:function(n,t,i,r,u,f,e){var o;return n<100&&0<=n?(o=new Date(n+400,t,i,r,u,f,e),isFinite(o.getFullYear())&&o.setFullYear(n)):o=new Date(n,t,i,r,u,f,e),o}).apply(null,s);h=n._useUTC?n._d.getUTCDay():n._d.getDay();null!=n._tzm&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm);n._nextDay&&(n._a[v]=24);n._w&&void 0!==n._w.d&&n._w.d!==h&&(u(n).weekdayMismatch=!0)}}function de(n){var t,r,o,e,f,s,h=n._i,i=nh.exec(h)||th.exec(h);if(i){for(u(n).iso=!0,t=0,r=br.length;t<r;t++)if(br[t][1].exec(i[1])){e=br[t][0];o=!1!==br[t][2];break}if(null==e)return void(n._isValid=!1);if(i[3]){for(t=0,r=ku.length;t<r;t++)if(ku[t][1].exec(i[3])){f=(i[2]||" ")+ku[t][0];break}if(null==f)return void(n._isValid=!1)}if(!o&&null!=f)return void(n._isValid=!1);if(i[4]){if(!ih.exec(i[4]))return void(n._isValid=!1);s="Z"}n._f=e+(f||"")+(s||"");du(n)}else n._isValid=!1}function uh(n,t,i,r,u,f){var e=[function(n){var t=parseInt(n,10);return t<=49?2e3+t:t<=999?1900+t:t}(n),oe.indexOf(t),parseInt(i,10),parseInt(r,10),parseInt(u,10)];return f&&e.push(parseInt(f,10)),e}function to(n){var r,i,f,t=ge.exec(n._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")),e;if(t){if(e=uh(t[4],t[3],t[2],t[5],t[6],t[7]),r=t[1],i=e,f=n,r&&ye.indexOf(r)!==new Date(i[0],i[1],i[2]).getDay()&&(u(f).weekdayMismatch=!0,!(f._isValid=!1)))return;n._a=e;n._tzm=function(n,t,i){if(n)return no[n];if(t)return 0;var r=parseInt(i,10),u=r%100;return(r-u)/100*60+u}(t[8],t[9],t[10]);n._d=bi.apply(null,n._a);n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm);u(n).rfc2822=!0}else n._isValid=!1}function du(n){if(n._f!==t.ISO_8601)if(n._f!==t.RFC_2822){n._a=[];u(n).empty=!0;for(var r,f,c,o,a,h,i=""+n._i,p=i.length,y=0,s=ne(n._f,n._locale).match(gf)||[],e=0;e<s.length;e++)f=s[e],(r=(i.match(ls(f,n))||[])[0])&&(0<(c=i.substr(0,i.indexOf(r))).length&&u(n).unusedInput.push(c),i=i.slice(i.indexOf(r)+r.length),y+=r.length),fi[f]?(r?u(n).empty=!1:u(n).unusedTokens.push(f),o=f,h=n,null!=(a=r)&&l(lr,o)&&lr[o](a,h._a,h,o)):n._strict&&!r&&u(n).unusedTokens.push(f);u(n).charsLeftOver=p-y;0<i.length&&u(n).unusedInput.push(i);n._a[v]<=12&&!0===u(n).bigHour&&0<n._a[v]&&(u(n).bigHour=void 0);u(n).parsedDateParts=n._a.slice(0);u(n).meridiem=n._meridiem;n._a[v]=function(n,t,i){var r;return null==i?t:null!=n.meridiemHour?n.meridiemHour(t,i):(null!=n.isPM&&((r=n.isPM(i))&&t<12&&(t+=12),r||12!==t||(t=0)),t)}(n._locale,n._a[v],n._meridiem);bu(n);wu(n)}else to(n);else de(n)}function io(n){var r,f,i,s,e=n._i,o=n._f;return n._locale=n._locale||wt(n._l),null===e||void 0===o&&""===e?tr({nullInput:!0}):("string"==typeof e&&(n._i=e=n._locale.preparse(e)),et(e)?new vi(wu(e)):(nr(e)?n._d=e:ut(o)?function(n){var t,e,f,r,i;if(0===n._f.length)return u(n).invalidFormat=!0,n._d=new Date(NaN);for(r=0;r<n._f.length;r++)i=0,t=iu({},n),null!=n._useUTC&&(t._useUTC=n._useUTC),t._f=n._f[r],du(t),tu(t)&&(i+=u(t).charsLeftOver,i+=10*u(t).unusedTokens.length,u(t).score=i,(null==f||i<f)&&(f=i,e=t));pt(n,e||t)}(n):o?du(n):b(f=(r=n)._i)?r._d=new Date(t.now()):nr(f)?r._d=new Date(f.valueOf()):"string"==typeof f?(i=r,null===(s=rh.exec(i._i))?(de(i),!1===i._isValid&&(delete i._isValid,to(i),!1===i._isValid&&(delete i._isValid,t.createFromInputFallback(i)))):i._d=new Date(+s[1])):ut(f)?(r._a=yf(f.slice(0),function(n){return parseInt(n,10)}),bu(r)):ai(f)?function(n){if(!n._d){var t=fu(n._i);n._a=yf([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)});bu(n)}}(r):dt(f)?r._d=new Date(f):t.createFromInputFallback(r),tu(n)||(n._d=null),n))}function ro(n,t,i,r,u){var e,f={};return!0!==i&&!1!==i||(r=i,i=void 0),(ai(n)&&function(n){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(n).length;for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}(n)||ut(n)&&0===n.length)&&(n=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=u,f._l=i,f._i=n,f._f=t,f._strict=r,(e=new vi(wu(io(f))))._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function c(n,t,i,r){return ro(n,t,i,r,!1)}function eo(n,t){var r,i;if(1===t.length&&ut(t[0])&&(t=t[0]),!t.length)return c();for(r=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][n](r)||(r=t[i]);return r}function kr(n){var t=fu(n),i=t.year||0,r=t.quarter||0,u=t.month||0,e=t.week||t.isoWeek||0,o=t.day||0,s=t.hour||0,h=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=function(n){var i,r,t;for(i in n)if(-1===a.call(hi,i)||null!=n[i]&&isNaN(n[i]))return!1;for(r=!1,t=0;t<hi.length;++t)if(n[hi[t]]){if(r)return!1;parseFloat(n[hi[t]])!==f(n[hi[t]])&&(r=!0)}return!0}(t);this._milliseconds=+l+1e3*c+6e4*h+36e5*s;this._days=+o+7*e;this._months=+u+3*r+12*i;this._data={};this._locale=wt();this._bubble()}function gu(n){return n instanceof kr}function nf(n){return n<0?-1*Math.round(-1*n):Math.round(n)}function oo(n,t){r(n,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+lt(~~(n/60),2)+t+lt(~~n%60,2)})}function tf(n,t){var u=(t||"").match(n),i,r;return null===u?null:(i=((u[u.length-1]||[])+"").match(so)||["-",0,0],r=60*i[1]+f(i[2]),0===r?0:"+"===i[0]?r:-r)}function rf(n,i){var r,u;return i._isUTC?(r=i.clone(),u=(et(n)||nr(n)?n.valueOf():c(n).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+u),t.updateOffset(r,!1),r):c(n).local()}function uf(n){return 15*-Math.round(n._d.getTimezoneOffset()/15)}function ho(){return!!this.isValid()&&this._isUTC&&0===this._offset}function rt(n,t){var u,e,o,i=n,r=null;return gu(n)?i={ms:n._milliseconds,d:n._days,M:n._months}:dt(n)?(i={},t?i[t]=n:i.milliseconds=n):(r=co.exec(n))?(u="-"===r[1]?-1:1,i={y:0,d:f(r[st])*u,h:f(r[v])*u,m:f(r[it])*u,s:f(r[vt])*u,ms:f(nf(1e3*r[ni]))*u}):(r=lo.exec(n))?(u="-"===r[1]?-1:1,i={y:ii(r[2],u),M:ii(r[3],u),w:ii(r[4],u),d:ii(r[5],u),h:ii(r[6],u),m:ii(r[7],u),s:ii(r[8],u)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(o=function(n,t){var i;return!n.isValid()||!t.isValid()?{milliseconds:0,months:0}:(t=rf(t,n),n.isBefore(t)?i=ao(n,t):((i=ao(t,n)).milliseconds=-i.milliseconds,i.months=-i.months),i)}(c(i.from),c(i.to)),(i={}).ms=o.milliseconds,i.M=o.months),e=new kr(i),gu(n)&&l(n,"_locale")&&(e._locale=n._locale),e}function ii(n,t){var i=n&&parseFloat(n.replace(",","."));return(isNaN(i)?0:i)*t}function ao(n,t){var i={};return i.months=t.month()-n.month()+12*(t.year()-n.year()),n.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+n.clone().add(i.months,"M"),i}function vo(n,t){return function(i,r){var u;return null===r||isNaN(+r)||(kf(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),u=i,i=r,r=u),yo(this,rt(i="string"==typeof i?+i:i,r),n),this}}function yo(n,i,r,u){var o=i._milliseconds,f=nf(i._days),e=nf(i._months);n.isValid()&&(u=null==u||u,e&&se(n,vr(n,"Month")+e*r),f&&fe(n,"Date",vr(n,"Date")+f*r),o&&n._d.setTime(n._d.valueOf()+o*r),u&&t.updateOffset(n,f||e))}function ff(n,t){var r=12*(t.year()-n.year())+(t.month()-n.month()),i=n.clone().add(r,"months");return-(r+(t-i<0?(t-i)/(i-n.clone().add(r-1,"months")):(t-i)/(n.clone().add(r+1,"months")-i)))||0}function bo(n){var t;return void 0===n?this._locale._abbr:(null!=(t=wt(n))&&(this._locale=t),this)}function ko(){return this._locale}function ci(n,t){return(n%t+t)%t}function go(n,t,i){return n<100&&0<=n?new Date(n+400,t,i)-of:new Date(n,t,i).valueOf()}function ns(n,t,i){return n<100&&0<=n?Date.UTC(n+400,t,i)-of:Date.UTC(n,t,i)}function dr(n,t){r(0,[n,n.length],0,t)}function ts(n,t,i,r,u){var f;return null==n?ki(this,r,u).year:((f=ti(n,r,u))<t&&(t=f),function(n,t,i,r,u){var e=ve(n,t,i,r,u),f=bi(e.year,0,e.dayOfYear);return this.year(f.getUTCFullYear()),this.month(f.getUTCMonth()),this.date(f.getUTCDate()),this}.call(this,n,t,i,r,u))}function fh(n,t){t[ni]=f(1e3*("0."+n))}function fs(n){return n}function gr(n,t,i,r){var u=wt(),f=ft().set(r,t);return u[i](f,n)}function es(n,t,i){if(dt(n)&&(t=n,n=void 0),n=n||"",null!=t)return gr(n,t,i,"month");for(var u=[],r=0;r<12;r++)u[r]=gr(n,r,i,"month");return u}function hf(n,t,i,r){var u,o,f,e;if(t=("boolean"==typeof n?dt(t)&&(i=t,t=void 0):(t=n,n=!1,dt(i=t)&&(i=t,t=void 0)),t||""),o=wt(),f=n?o._week.dow:0,null!=i)return gr(t,(i+f)%7,r,"day");for(e=[],u=0;u<7;u++)e[u]=gr(t,(u+f)%7,r,"day");return e}function os(n,t,i,r){var u=rt(t,i);return n._milliseconds+=r*u._milliseconds,n._days+=r*u._days,n._months+=r*u._months,n._bubble()}function ss(n){return n<0?Math.floor(n):Math.ceil(n)}function hs(n){return 4800*n/146097}function cf(n){return 146097*n/4800}function yt(n){return function(){return this.as(n)}}function ri(n){return function(){return this.isValid()?this._data[n]:NaN}}function li(n){return(0<n)-(n<0)||+n}function nu(){if(!this.isValid())return this.localeData().invalidDate();var i,o,t=lf(this._milliseconds)/1e3,v=lf(this._days),s=lf(this._months);o=d((i=d(t/60))/60);t%=60;i%=60;var h=d(s/12),c=s%=12,l=v,r=o,u=i,f=t?t.toFixed(3).replace(/\.?0+$/,""):"",n=this.asSeconds();if(!n)return"P0D";var y=n<0?"-":"",a=li(this._months)!==li(n)?"-":"",p=li(this._days)!==li(n)?"-":"",e=li(this._milliseconds)!==li(n)?"-":"";return y+"P"+(h?a+h+"Y":"")+(c?a+c+"M":"")+(l?p+l+"D":"")+(r||u||f?"T":"")+(r?e+r+"H":"")+(u?e+u+"M":"")+(f?e+f+"S":"")}var af,vf,ir,rr,bf,ru,ui,eu,lr,a,lu,ce,le,ge,no,uo,fo,hi,so,co,lo,po,wo,ef,of,sf,is,bt,rs,us,n,o,ht,e;vf=Array.prototype.some?Array.prototype.some:function(n){for(var i=Object(this),r=i.length>>>0,t=0;t<r;t++)if(t in i&&n.call(this,i[t],t,i))return!0;return!1};ir=t.momentProperties=[];rr=!1;ru={};t.suppressDeprecationWarnings=!1;t.deprecationHandler=null;bf=Object.keys?Object.keys:function(n){var t,i=[];for(t in n)l(n,t)&&i.push(t);return i};ui={};eu={};var gf=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ur=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ou={},fi={};var te=/\d/,k=/\d\d/,ie=/\d{3}/,su=/\d{4}/,er=/[+-]?\d{6}/,s=/\d\d?/,re=/\d\d\d\d?/,ue=/\d\d\d\d\d\d?/,or=/\d{1,3}/,hu=/\d{1,4}/,sr=/[+-]?\d{1,6}/,hr=/[+-]?\d+/,cs=/Z|[+-]\d\d:?\d\d/gi,cr=/Z|[+-]\d\d(?::?\d\d)?/gi,yi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,cu={};lr={};var tt=0,at=1,st=2,v=3,it=4,vt=5,ni=6,as=7,vs=8;r("Y",0,0,function(){var n=this.year();return n<=9999?""+n:"+"+n});r(0,["YY",2],0,function(){return this.year()%100});r(0,["YYYY",4],0,"year");r(0,["YYYYY",5],0,"year");r(0,["YYYYYY",6,!0],0,"year");p("year","y");w("year",1);i("Y",hr);i("YY",s,k);i("YYYY",hu,su);i("YYYYY",sr,er);i("YYYYYY",sr,er);h(["YYYYY","YYYYYY"],tt);h("YYYY",function(n,i){i[tt]=2===n.length?t.parseTwoDigitYear(n):f(n)});h("YY",function(n,i){i[tt]=t.parseTwoDigitYear(n)});h("Y",function(n,t){t[tt]=parseInt(n,10)});t.parseTwoDigitYear=function(n){return f(n)+(68<f(n)?1900:2e3)};lu=ei("FullYear",!0);a=Array.prototype.indexOf?Array.prototype.indexOf:function(n){for(var t=0;t<this.length;++t)if(this[t]===n)return t;return-1};r("M",["MM",2],"Mo",function(){return this.month()+1});r("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});r("MMMM",0,0,function(n){return this.localeData().months(this,n)});p("month","M");w("month",8);i("M",s);i("MM",s,k);i("MMM",function(n,t){return t.monthsShortRegex(n)});i("MMMM",function(n,t){return t.monthsRegex(n)});h(["M","MM"],function(n,t){t[at]=f(n)-1});h(["MMM","MMMM"],function(n,t,i,r){var f=i._locale.monthsParse(n,r,i._strict);null!=f?t[at]=f:u(i).invalidMonth=n});var ee=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ys="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),oe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");ce=yi;le=yi;r("w",["ww",2],"wo","week");r("W",["WW",2],"Wo","isoWeek");p("week","w");p("isoWeek","W");w("week",5);w("isoWeek",5);i("w",s);i("ww",s,k);i("W",s);i("WW",s,k);pi(["w","ww","W","WW"],function(n,t,i,r){t[r.substr(0,1)]=f(n)});r("d",0,"do","day");r("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});r("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});r("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});r("e",0,0,"weekday");r("E",0,0,"isoWeekday");p("day","d");p("weekday","e");p("isoWeekday","E");w("day",11);w("weekday",11);w("isoWeekday",11);i("d",s);i("e",s);i("E",s);i("dd",function(n,t){return t.weekdaysMinRegex(n)});i("ddd",function(n,t){return t.weekdaysShortRegex(n)});i("dddd",function(n,t){return t.weekdaysRegex(n)});pi(["dd","ddd","dddd"],function(n,t,i,r){var f=i._locale.weekdaysParse(n,r,i._strict);null!=f?t.d=f:u(i).invalidWeekday=n});pi(["d","e","E"],function(n,t,i,r){t[r]=f(n)});var ps="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ye="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ws="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),bs=yi,ks=yi,ds=yi;r("H",["HH",2],0,"hour");r("h",["hh",2],0,yu);r("k",["kk",2],0,function(){return this.hours()||24});r("hmm",0,0,function(){return""+yu.apply(this)+lt(this.minutes(),2)});r("hmmss",0,0,function(){return""+yu.apply(this)+lt(this.minutes(),2)+lt(this.seconds(),2)});r("Hmm",0,0,function(){return""+this.hours()+lt(this.minutes(),2)});r("Hmmss",0,0,function(){return""+this.hours()+lt(this.minutes(),2)+lt(this.seconds(),2)});pe("a",!0);pe("A",!1);p("hour","h");w("hour",13);i("a",we);i("A",we);i("H",s);i("h",s);i("k",s);i("HH",s,k);i("hh",s,k);i("kk",s,k);i("hmm",re);i("hmmss",ue);i("Hmm",re);i("Hmmss",ue);h(["H","HH"],v);h(["k","kk"],function(n,t){var i=f(n);t[v]=24===i?0:i});h(["a","A"],function(n,t,i){i._isPm=i._locale.isPM(n);i._meridiem=n});h(["h","hh"],function(n,t,i){t[v]=f(n);u(i).bigHour=!0});h("hmm",function(n,t,i){var r=n.length-2;t[v]=f(n.substr(0,r));t[it]=f(n.substr(r));u(i).bigHour=!0});h("hmmss",function(n,t,i){var r=n.length-4,e=n.length-2;t[v]=f(n.substr(0,r));t[it]=f(n.substr(r,2));t[vt]=f(n.substr(e));u(i).bigHour=!0});h("Hmm",function(n,t){var i=n.length-2;t[v]=f(n.substr(0,i));t[it]=f(n.substr(i))});h("Hmmss",function(n,t){var i=n.length-4,r=n.length-2;t[v]=f(n.substr(0,i));t[it]=f(n.substr(i,2));t[vt]=f(n.substr(r))});var di,gs=ei("Hours",!0),be={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:ys,monthsShort:oe,week:{dow:0,doy:6},weekdays:ps,weekdaysMin:ws,weekdaysShort:ye,meridiemParse:/[ap]\.?m?\.?/i},y={},gi={};var nh=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,th=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ih=/Z|[+-]\d\d(?::?\d\d)?/,br=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ku=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],rh=/^\/?Date\((\-?\d+)/i;for(ge=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,no={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},t.createFromInputFallback=g("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){},uo=g("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=c.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:tr()}),fo=g("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=c.apply(null,arguments);return this.isValid()&&n.isValid()?this<n?this:n:tr()}),hi=["year","quarter","month","week","day","hour","minute","second","millisecond"],oo("Z",":"),oo("ZZ",""),i("Z",cr),i("ZZ",cr),h(["Z","ZZ"],function(n,t,i){i._useUTC=!0;i._tzm=tf(cr,n)}),so=/([\+\-]|\d\d)/gi,t.updateOffset=function(){},co=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,lo=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,rt.fn=kr.prototype,rt.invalid=function(){return rt(NaN)},po=vo(1,"add"),wo=vo(-1,"subtract"),t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",ef=g("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return void 0===n?this.localeData():this.locale(n)}),of=126227808e5,r(0,["gg",2],0,function(){return this.weekYear()%100}),r(0,["GG",2],0,function(){return this.isoWeekYear()%100}),dr("gggg","weekYear"),dr("ggggg","weekYear"),dr("GGGG","isoWeekYear"),dr("GGGGG","isoWeekYear"),p("weekYear","gg"),p("isoWeekYear","GG"),w("weekYear",1),w("isoWeekYear",1),i("G",hr),i("g",hr),i("GG",s,k),i("gg",s,k),i("GGGG",hu,su),i("gggg",hu,su),i("GGGGG",sr,er),i("ggggg",sr,er),pi(["gggg","ggggg","GGGG","GGGGG"],function(n,t,i,r){t[r.substr(0,2)]=f(n)}),pi(["gg","GG"],function(n,i,r,u){i[u]=t.parseTwoDigitYear(n)}),r("Q",0,"Qo","quarter"),p("quarter","Q"),w("quarter",7),i("Q",te),h("Q",function(n,t){t[at]=3*(f(n)-1)}),r("D",["DD",2],"Do","date"),p("date","D"),w("date",9),i("D",s),i("DD",s,k),i("Do",function(n,t){return n?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),h(["D","DD"],st),h("Do",function(n,t){t[st]=f(n.match(s)[0])}),sf=ei("Date",!0),r("DDD",["DDDD",3],"DDDo","dayOfYear"),p("dayOfYear","DDD"),w("dayOfYear",4),i("DDD",or),i("DDDD",ie),h(["DDD","DDDD"],function(n,t,i){i._dayOfYear=f(n)}),r("m",["mm",2],0,"minute"),p("minute","m"),w("minute",14),i("m",s),i("mm",s,k),h(["m","mm"],it),is=ei("Minutes",!1),r("s",["ss",2],0,"second"),p("second","s"),w("second",15),i("s",s),i("ss",s,k),h(["s","ss"],vt),rs=ei("Seconds",!1),r("S",0,0,function(){return~~(this.millisecond()/100)}),r(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),r(0,["SSS",3],0,"millisecond"),r(0,["SSSS",4],0,function(){return 10*this.millisecond()}),r(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),r(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),r(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),r(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),r(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),p("millisecond","ms"),w("millisecond",16),i("S",or,te),i("SS",or,k),i("SSS",or,ie),bt="SSSS";bt.length<=9;bt+="S")i(bt,/\d+/);for(bt="S";bt.length<=9;bt+="S")h(bt,fh);us=ei("Milliseconds",!1);r("z",0,0,"zoneAbbr");r("zz",0,0,"zoneName");n=vi.prototype;n.add=po;n.calendar=function(n,i){var u=n||c(),f=rf(u,this).startOf("day"),r=t.calendarFormat(this,f)||"sameElse",e=i&&(ot(i[r])?i[r].call(this,u):i[r]);return this.format(e||this.localeData().calendar(r,this,c(u)))};n.clone=function(){return new vi(this)};n.diff=function(n,t,i){var r,f,u;if(!this.isValid())return NaN;if(!(r=rf(n,this)).isValid())return NaN;switch(f=6e4*(r.utcOffset()-this.utcOffset()),t=nt(t)){case"year":u=ff(this,r)/12;break;case"month":u=ff(this,r);break;case"quarter":u=ff(this,r)/3;break;case"second":u=(this-r)/1e3;break;case"minute":u=(this-r)/6e4;break;case"hour":u=(this-r)/36e5;break;case"day":u=(this-r-f)/864e5;break;case"week":u=(this-r-f)/6048e5;break;default:u=this-r}return i?u:d(u)};n.endOf=function(n){var i,r;if(void 0===(n=nt(n))||"millisecond"===n||!this.isValid())return this;r=this._isUTC?ns:go;switch(n){case"year":i=r(this.year()+1,0,1)-1;break;case"quarter":i=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=r(this.year(),this.month()+1,1)-1;break;case"week":i=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf();i+=3599999-ci(i+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":i=this._d.valueOf();i+=59999-ci(i,6e4);break;case"second":i=this._d.valueOf();i+=999-ci(i,1e3)}return this._d.setTime(i),t.updateOffset(this,!0),this};n.format=function(n){n||(n=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=fr(this,n);return this.localeData().postformat(i)};n.from=function(n,t){return this.isValid()&&(et(n)&&n.isValid()||c(n).isValid())?rt({to:this,from:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()};n.fromNow=function(n){return this.from(c(),n)};n.to=function(n,t){return this.isValid()&&(et(n)&&n.isValid()||c(n).isValid())?rt({from:this,to:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()};n.toNow=function(n){return this.to(c(),n)};n.get=function(n){return ot(this[n=nt(n)])?this[n]():this};n.invalidAt=function(){return u(this).overflow};n.isAfter=function(n,t){var i=et(n)?n:c(n);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=nt(t)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())};n.isBefore=function(n,t){var i=et(n)?n:c(n);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=nt(t)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())};n.isBetween=function(n,t,i,r){var u=et(n)?n:c(n),f=et(t)?t:c(t);return!!(this.isValid()&&u.isValid()&&f.isValid())&&("("===(r=r||"()")[0]?this.isAfter(u,i):!this.isBefore(u,i))&&(")"===r[1]?this.isBefore(f,i):!this.isAfter(f,i))};n.isSame=function(n,t){var i,r=et(n)?n:c(n);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=nt(t)||"millisecond")?this.valueOf()===r.valueOf():(i=r.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))};n.isSameOrAfter=function(n,t){return this.isSame(n,t)||this.isAfter(n,t)};n.isSameOrBefore=function(n,t){return this.isSame(n,t)||this.isBefore(n,t)};n.isValid=function(){return tu(this)};n.lang=ef;n.locale=bo;n.localeData=ko;n.max=fo;n.min=uo;n.parsingFlags=function(){return pt({},u(this))};n.set=function(n,t){if("object"==typeof n)for(var r=function(n){var t=[];for(var i in n)t.push({unit:i,priority:eu[i]});return t.sort(function(n,t){return n.priority-t.priority}),t}(n=fu(n)),i=0;i<r.length;i++)this[r[i].unit](n[r[i].unit]);else if(ot(this[n=nt(n)]))return this[n](t);return this};n.startOf=function(n){var i,r;if(void 0===(n=nt(n))||"millisecond"===n||!this.isValid())return this;r=this._isUTC?ns:go;switch(n){case"year":i=r(this.year(),0,1);break;case"quarter":i=r(this.year(),this.month()-this.month()%3,1);break;case"month":i=r(this.year(),this.month(),1);break;case"week":i=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=r(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf();i-=ci(i+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":i=this._d.valueOf();i-=ci(i,6e4);break;case"second":i=this._d.valueOf();i-=ci(i,1e3)}return this._d.setTime(i),t.updateOffset(this,!0),this};n.subtract=wo;n.toArray=function(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]};n.toObject=function(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}};n.toDate=function(){return new Date(this.valueOf())};n.toISOString=function(n){if(!this.isValid())return null;var i=!0!==n,t=i?this.clone().utc():this;return t.year()<0||9999<t.year()?fr(t,i?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ot(Date.prototype.toISOString)?i?this.toDate().toISOString():new Date(this.valueOf()+6e4*this.utcOffset()).toISOString().replace("Z",fr(t,"Z")):fr(t,i?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};n.inspect=function(){var n,t;if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";n="moment";t="";this.isLocal()||(n=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var i="["+n+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",u=t+'[")]';return this.format(i+r+"-MM-DD[T]HH:mm:ss.SSS"+u)};n.toJSON=function(){return this.isValid()?this.toISOString():null};n.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};n.unix=function(){return Math.floor(this.valueOf()/1e3)};n.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)};n.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};n.year=lu;n.isLeapYear=function(){return ar(this.year())};n.weekYear=function(n){return ts.call(this,n,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};n.isoWeekYear=function(n){return ts.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)};n.quarter=n.quarters=function(n){return null==n?Math.ceil((this.month()+1)/3):this.month(3*(n-1)+this.month()%3)};n.month=he;n.daysInMonth=function(){return yr(this.year(),this.month())};n.week=n.weeks=function(n){var t=this.localeData().week(this);return null==n?t:this.add(7*(n-t),"d")};n.isoWeek=n.isoWeeks=function(n){var t=ki(this,1,4).week;return null==n?t:this.add(7*(n-t),"d")};n.weeksInYear=function(){var n=this.localeData()._week;return ti(this.year(),n.dow,n.doy)};n.isoWeeksInYear=function(){return ti(this.year(),1,4)};n.date=sf;n.day=n.days=function(n){if(!this.isValid())return null!=n?this:NaN;var t,i,r=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=n?(t=n,i=this.localeData(),n="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=i.weekdaysParse(t))?t:null:parseInt(t,10),this.add(n-r,"d")):r};n.weekday=function(n){if(!this.isValid())return null!=n?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==n?t:this.add(n-t,"d")};n.isoWeekday=function(n){if(!this.isValid())return null!=n?this:NaN;if(null==n)return this.day()||7;var t,i,r=(t=n,i=this.localeData(),"string"==typeof t?i.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?r:r-7)};n.dayOfYear=function(n){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==n?t:this.add(n-t,"d")};n.hour=n.hours=gs;n.minute=n.minutes=is;n.second=n.seconds=rs;n.millisecond=n.milliseconds=us;n.utcOffset=function(n,i,r){var u,f=this._offset||0;if(!this.isValid())return null!=n?this:NaN;if(null==n)return this._isUTC?f:uf(this);if("string"==typeof n){if(null===(n=tf(cr,n)))return this}else Math.abs(n)<16&&!r&&(n*=60);return!this._isUTC&&i&&(u=uf(this)),this._offset=n,this._isUTC=!0,null!=u&&this.add(u,"m"),f!==n&&(!i||this._changeInProgress?yo(this,rt(n-f,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this};n.utc=function(n){return this.utcOffset(0,n)};n.local=function(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(uf(this),"m")),this};n.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var n=tf(cs,this._i);null!=n?this.utcOffset(n):this.utcOffset(0,!0)}return this};n.hasAlignedHourOffset=function(n){return!!this.isValid()&&(n=n?c(n).utcOffset():0,(this.utcOffset()-n)%60==0)};n.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};n.isLocal=function(){return!!this.isValid()&&!this._isUTC};n.isUtcOffset=function(){return!!this.isValid()&&this._isUTC};n.isUtc=ho;n.isUTC=ho;n.zoneAbbr=function(){return this._isUTC?"UTC":""};n.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};n.dates=g("dates accessor is deprecated. Use date instead.",sf);n.months=g("months accessor is deprecated. Use month instead",he);n.years=g("years accessor is deprecated. Use year instead",lu);n.zone=g("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(n,t){return null!=n?("string"!=typeof n&&(n=-n),this.utcOffset(n,t),this):-this.utcOffset()});n.isDSTShifted=g("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){var n,t;return b(this._isDSTShifted)?(n={},(iu(n,this),(n=io(n))._a)?(t=n._isUTC?ft(n._a):c(n._a),this._isDSTShifted=this.isValid()&&0<pf(n._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted):this._isDSTShifted});o=uu.prototype;o.calendar=function(n,t,i){var r=this._calendar[n]||this._calendar.sameElse;return ot(r)?r.call(t,i):r};o.longDateFormat=function(n){var t=this._longDateFormat[n],i=this._longDateFormat[n.toUpperCase()];return t||!i?t:(this._longDateFormat[n]=i.replace(/MMMM|MM|DD|dddd/g,function(n){return n.slice(1)}),this._longDateFormat[n])};o.invalidDate=function(){return this._invalidDate};o.ordinal=function(n){return this._ordinal.replace("%d",n)};o.preparse=fs;o.postformat=fs;o.relativeTime=function(n,t,i,r){var u=this._relativeTime[i];return ot(u)?u(n,t,i,r):u.replace(/%d/i,n)};o.pastFuture=function(n,t){var i=this._relativeTime[0<n?"future":"past"];return ot(i)?i(t):i.replace(/%s/i,t)};o.set=function(n){var t;for(var i in n)ot(t=n[i])?this[i]=t:this["_"+i]=t;this._config=n;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};o.months=function(n,t){return n?ut(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||ee).test(t)?"format":"standalone"][n.month()]:ut(this._months)?this._months:this._months.standalone};o.monthsShort=function(n,t){return n?ut(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[ee.test(t)?"format":"standalone"][n.month()]:ut(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};o.monthsParse=function(n,t,i){var r,u,f;if(this._monthsParseExact)return function(n,t,i){var u,r,e,f=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],u=0;u<12;++u)e=ft([2e3,u]),this._shortMonthsParse[u]=this.monthsShort(e,"").toLocaleLowerCase(),this._longMonthsParse[u]=this.months(e,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(r=a.call(this._shortMonthsParse,f))?r:null:-1!==(r=a.call(this._longMonthsParse,f))?r:null:"MMM"===t?-1!==(r=a.call(this._shortMonthsParse,f))?r:-1!==(r=a.call(this._longMonthsParse,f))?r:null:-1!==(r=a.call(this._longMonthsParse,f))?r:-1!==(r=a.call(this._shortMonthsParse,f))?r:null}.call(this,n,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++)if((u=ft([2e3,r]),i&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(u,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(u,"").replace(".","")+"$","i")),i||this._monthsParse[r]||(f="^"+this.months(u,"")+"|^"+this.monthsShort(u,""),this._monthsParse[r]=new RegExp(f.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[r].test(n))||i&&"MMM"===t&&this._shortMonthsParse[r].test(n)||!i&&this._monthsParse[r].test(n))return r};o.monthsRegex=function(n){return this._monthsParseExact?(l(this,"_monthsRegex")||ae.call(this),n?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=le),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)};o.monthsShortRegex=function(n){return this._monthsParseExact?(l(this,"_monthsRegex")||ae.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=ce),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)};o.week=function(n){return ki(n,this._week.dow,this._week.doy).week};o.firstDayOfYear=function(){return this._week.doy};o.firstDayOfWeek=function(){return this._week.dow};o.weekdays=function(n,t){var i=ut(this._weekdays)?this._weekdays:this._weekdays[n&&!0!==n&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===n?au(i,this._week.dow):n?i[n.day()]:i};o.weekdaysMin=function(n){return!0===n?au(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin};o.weekdaysShort=function(n){return!0===n?au(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort};o.weekdaysParse=function(n,t,i){var r,u,f;if(this._weekdaysParseExact)return function(n,t,i){var f,r,e,u=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],f=0;f<7;++f)e=ft([2e3,1]).day(f),this._minWeekdaysParse[f]=this.weekdaysMin(e,"").toLocaleLowerCase(),this._shortWeekdaysParse[f]=this.weekdaysShort(e,"").toLocaleLowerCase(),this._weekdaysParse[f]=this.weekdays(e,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(r=a.call(this._weekdaysParse,u))?r:null:"ddd"===t?-1!==(r=a.call(this._shortWeekdaysParse,u))?r:null:-1!==(r=a.call(this._minWeekdaysParse,u))?r:null:"dddd"===t?-1!==(r=a.call(this._weekdaysParse,u))?r:-1!==(r=a.call(this._shortWeekdaysParse,u))?r:-1!==(r=a.call(this._minWeekdaysParse,u))?r:null:"ddd"===t?-1!==(r=a.call(this._shortWeekdaysParse,u))?r:-1!==(r=a.call(this._weekdaysParse,u))?r:-1!==(r=a.call(this._minWeekdaysParse,u))?r:null:-1!==(r=a.call(this._minWeekdaysParse,u))?r:-1!==(r=a.call(this._weekdaysParse,u))?r:-1!==(r=a.call(this._shortWeekdaysParse,u))?r:null}.call(this,n,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++)if((u=ft([2e3,1]).day(r),i&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(u,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(u,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(u,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(f="^"+this.weekdays(u,"")+"|^"+this.weekdaysShort(u,"")+"|^"+this.weekdaysMin(u,""),this._weekdaysParse[r]=new RegExp(f.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[r].test(n))||i&&"ddd"===t&&this._shortWeekdaysParse[r].test(n)||i&&"dd"===t&&this._minWeekdaysParse[r].test(n)||!i&&this._weekdaysParse[r].test(n))return r};o.weekdaysRegex=function(n){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||vu.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=bs),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)};o.weekdaysShortRegex=function(n){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||vu.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ks),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)};o.weekdaysMinRegex=function(n){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||vu.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ds),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)};o.isPM=function(n){return"p"===(n+"").toLowerCase().charAt(0)};o.meridiem=function(n,t,i){return 11<n?i?"pm":"PM":i?"am":"AM"};oi("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var t=n%10;return n+(1===f(n%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}});t.lang=g("moment.lang is deprecated. Use moment.locale instead.",oi);t.langData=g("moment.langData is deprecated. Use moment.localeData instead.",wt);ht=Math.abs;var eh=yt("ms"),oh=yt("s"),sh=yt("m"),hh=yt("h"),ch=yt("d"),lh=yt("w"),ah=yt("M"),vh=yt("Q"),yh=yt("y");var ph=ri("milliseconds"),wh=ri("seconds"),bh=ri("minutes"),kh=ri("hours"),dh=ri("days"),gh=ri("months"),nc=ri("years"),kt=Math.round,ct={ss:44,s:45,m:45,h:22,d:26,M:11},lf=Math.abs;return e=kr.prototype,e.isValid=function(){return this._isValid},e.abs=function(){var n=this._data;return this._milliseconds=ht(this._milliseconds),this._days=ht(this._days),this._months=ht(this._months),n.milliseconds=ht(n.milliseconds),n.seconds=ht(n.seconds),n.minutes=ht(n.minutes),n.hours=ht(n.hours),n.months=ht(n.months),n.years=ht(n.years),this},e.add=function(n,t){return os(this,n,t,1)},e.subtract=function(n,t){return os(this,n,t,-1)},e.as=function(n){if(!this.isValid())return NaN;var t,r,i=this._milliseconds;if("month"===(n=nt(n))||"quarter"===n||"year"===n)switch(t=this._days+i/864e5,r=this._months+hs(t),n){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(cf(this._months)),n){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+n);}},e.asMilliseconds=eh,e.asSeconds=oh,e.asMinutes=sh,e.asHours=hh,e.asDays=ch,e.asWeeks=lh,e.asMonths=ah,e.asQuarters=vh,e.asYears=yh,e.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*f(this._months/12):NaN},e._bubble=function(){var u,f,e,o,s,r=this._milliseconds,t=this._days,n=this._months,i=this._data;return 0<=r&&0<=t&&0<=n||r<=0&&t<=0&&n<=0||(r+=864e5*ss(cf(n)+t),n=t=0),i.milliseconds=r%1e3,u=d(r/1e3),i.seconds=u%60,f=d(u/60),i.minutes=f%60,e=d(f/60),i.hours=e%24,n+=s=d(hs(t+=d(e/24))),t-=ss(cf(s)),o=d(n/12),n%=12,i.days=t,i.months=n,i.years=o,this},e.clone=function(){return rt(this)},e.get=function(n){return n=nt(n),this.isValid()?this[n+"s"]():NaN},e.milliseconds=ph,e.seconds=wh,e.minutes=bh,e.hours=kh,e.days=dh,e.weeks=function(){return d(this.days()/7)},e.months=gh,e.years=nc,e.humanize=function(n){if(!this.isValid())return this.localeData().invalidDate();var l,a,v,t,i,r,u,f,e,s,o,h=this.localeData(),c=(a=!n,v=h,t=rt(l=this).abs(),i=kt(t.as("s")),r=kt(t.as("m")),u=kt(t.as("h")),f=kt(t.as("d")),e=kt(t.as("M")),s=kt(t.as("y")),(o=i<=ct.ss&&["s",i]||i<ct.s&&["ss",i]||r<=1&&["m"]||r<ct.m&&["mm",r]||u<=1&&["h"]||u<ct.h&&["hh",u]||f<=1&&["d"]||f<ct.d&&["dd",f]||e<=1&&["M"]||e<ct.M&&["MM",e]||s<=1&&["y"]||["yy",s])[2]=a,o[3]=0<+l,o[4]=v,function(n,t,i,r,u){return u.relativeTime(t||1,!!i,n,r)}.apply(null,o));return n&&(c=h.pastFuture(+this,c)),h.postformat(c)},e.toISOString=nu,e.toString=nu,e.toJSON=nu,e.locale=bo,e.localeData=ko,e.toIsoString=g("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nu),e.lang=ef,r("X",0,0,"unix"),r("x",0,0,"valueOf"),i("x",hr),i("X",/[+-]?\d+(\.\d{1,3})?/),h("X",function(n,t,i){i._d=new Date(1e3*parseFloat(n,10))}),h("x",function(n,t,i){i._d=new Date(f(n))}),t.version="2.24.0",af=c,t.fn=n,t.min=function(){return eo("isBefore",[].slice.call(arguments,0))},t.max=function(){return eo("isAfter",[].slice.call(arguments,0))},t.now=function(){return Date.now?Date.now():+new Date},t.utc=ft,t.unix=function(n){return c(1e3*n)},t.months=function(n,t){return es(n,t,"months")},t.isDate=nr,t.locale=oi,t.invalid=tr,t.duration=rt,t.isMoment=et,t.weekdays=function(n,t,i){return hf(n,t,i,"weekdays")},t.parseZone=function(){return c.apply(null,arguments).parseZone()},t.localeData=wt,t.isDuration=gu,t.monthsShort=function(n,t){return es(n,t,"monthsShort")},t.weekdaysMin=function(n,t,i){return hf(n,t,i,"weekdaysMin")},t.defineLocale=pu,t.updateLocale=function(n,t){if(null!=t){var i,r,u=be;null!=(r=wr(n))&&(u=r._config);(i=new uu(t=df(u,t))).parentLocale=y[n];y[n]=i;oi(n)}else null!=y[n]&&(null!=y[n].parentLocale?y[n]=y[n].parentLocale:null!=y[n]&&delete y[n]);return y[n]},t.locales=function(){return bf(y)},t.weekdaysShort=function(n,t,i){return hf(n,t,i,"weekdaysShort")},t.normalizeUnits=nt,t.relativeTimeRounding=function(n){return void 0===n?kt:"function"==typeof n&&(kt=n,!0)},t.relativeTimeThreshold=function(n,t){return void 0!==ct[n]&&(void 0===t?ct[n]:(ct[n]=t,"s"===n&&(ct.ss=t-1),!0))},t.calendarFormat=function(n,t){var i=n.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},t.prototype=n,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t});
/**
* @version: 2.1.27
* @author: Dan Grossman http://www.dangrossman.info/
* @copyright: Copyright (c) 2012-2017 Dan Grossman. All rights reserved.
* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
* @website: http://www.daterangepicker.com/
*/
(function(n,t){var i,r;typeof define=="function"&&define.amd?define(["moment","jquery"],function(n,i){return i.fn||(i.fn={}),t(n,i)}):typeof module=="object"&&module.exports?(i=typeof window!="undefined"?window.jQuery:undefined,i||(i=require("jquery"),i.fn||(i.fn={})),r=typeof window!="undefined"&&typeof window.moment!="undefined"?window.moment:require("moment"),module.exports=t(r,i)):n.daterangepicker=t(n.moment,n.jQuery)})(this,function(n,t){var i=function(i,r,u){var y,f,o,e,c,v,s,h,a,l;if(this.parentEl="body",this.element=t(i),this.startDate=n().startOf("day"),this.endDate=n().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={direction:"ltr",format:n.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:n.weekdaysMin(),monthNames:n.monthsShort(),firstDay:n.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},(typeof r!="object"||r===null)&&(r={}),r=t.extend(this.element.data(),r),typeof r.template=="string"||r.template instanceof t||(r.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"><\/i><div class="calendar-time"><div><\/div><i class="fa fa-clock-o glyphicon glyphicon-time"><\/i><\/div><\/div><div class="calendar-table"><\/div><\/div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"><\/i><div class="calendar-time"><div><\/div><i class="fa fa-clock-o glyphicon glyphicon-time"><\/i><\/div><\/div><div class="calendar-table"><\/div><\/div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"><\/button> <button class="cancelBtn" type="button"><\/button><\/div><\/div><\/div>'),this.parentEl=r.parentEl&&t(r.parentEl).length?t(r.parentEl):t(this.parentEl),this.container=t(r.template).appendTo(this.parentEl),typeof r.locale=="object"&&(typeof r.locale.direction=="string"&&(this.locale.direction=r.locale.direction),typeof r.locale.format=="string"&&(this.locale.format=r.locale.format),typeof r.locale.separator=="string"&&(this.locale.separator=r.locale.separator),typeof r.locale.daysOfWeek=="object"&&(this.locale.daysOfWeek=r.locale.daysOfWeek.slice()),typeof r.locale.monthNames=="object"&&(this.locale.monthNames=r.locale.monthNames.slice()),typeof r.locale.firstDay=="number"&&(this.locale.firstDay=r.locale.firstDay),typeof r.locale.applyLabel=="string"&&(this.locale.applyLabel=r.locale.applyLabel),typeof r.locale.cancelLabel=="string"&&(this.locale.cancelLabel=r.locale.cancelLabel),typeof r.locale.weekLabel=="string"&&(this.locale.weekLabel=r.locale.weekLabel),typeof r.locale.customRangeLabel=="string"&&(h=document.createElement("textarea"),h.innerHTML=r.locale.customRangeLabel,a=h.value,this.locale.customRangeLabel=a)),this.container.addClass(this.locale.direction),typeof r.startDate=="string"&&(this.startDate=n(r.startDate,this.locale.format)),typeof r.endDate=="string"&&(this.endDate=n(r.endDate,this.locale.format)),typeof r.minDate=="string"&&(this.minDate=n(r.minDate,this.locale.format)),typeof r.maxDate=="string"&&(this.maxDate=n(r.maxDate,this.locale.format)),typeof r.startDate=="object"&&(this.startDate=n(r.startDate)),typeof r.endDate=="object"&&(this.endDate=n(r.endDate)),typeof r.minDate=="object"&&(this.minDate=n(r.minDate)),typeof r.maxDate=="object"&&(this.maxDate=n(r.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),typeof r.applyClass=="string"&&(this.applyClass=r.applyClass),typeof r.cancelClass=="string"&&(this.cancelClass=r.cancelClass),typeof r.dateLimit=="object"&&(this.dateLimit=r.dateLimit),typeof r.opens=="string"&&(this.opens=r.opens),typeof r.drops=="string"&&(this.drops=r.drops),typeof r.showWeekNumbers=="boolean"&&(this.showWeekNumbers=r.showWeekNumbers),typeof r.showISOWeekNumbers=="boolean"&&(this.showISOWeekNumbers=r.showISOWeekNumbers),typeof r.buttonClasses=="string"&&(this.buttonClasses=r.buttonClasses),typeof r.buttonClasses=="object"&&(this.buttonClasses=r.buttonClasses.join(" ")),typeof r.showDropdowns=="boolean"&&(this.showDropdowns=r.showDropdowns),typeof r.showCustomRangeLabel=="boolean"&&(this.showCustomRangeLabel=r.showCustomRangeLabel),typeof r.singleDatePicker=="boolean"&&(this.singleDatePicker=r.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),typeof r.timePicker=="boolean"&&(this.timePicker=r.timePicker),typeof r.timePickerSeconds=="boolean"&&(this.timePickerSeconds=r.timePickerSeconds),typeof r.timePickerIncrement=="number"&&(this.timePickerIncrement=r.timePickerIncrement),typeof r.timePicker24Hour=="boolean"&&(this.timePicker24Hour=r.timePicker24Hour),typeof r.autoApply=="boolean"&&(this.autoApply=r.autoApply),typeof r.autoUpdateInput=="boolean"&&(this.autoUpdateInput=r.autoUpdateInput),typeof r.linkedCalendars=="boolean"&&(this.linkedCalendars=r.linkedCalendars),typeof r.isInvalidDate=="function"&&(this.isInvalidDate=r.isInvalidDate),typeof r.isCustomDate=="function"&&(this.isCustomDate=r.isCustomDate),typeof r.alwaysShowCalendars=="boolean"&&(this.alwaysShowCalendars=r.alwaysShowCalendars),this.locale.firstDay!=0)for(y=this.locale.firstDay;y>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),y--;if(typeof r.startDate=="undefined"&&typeof r.endDate=="undefined"&&t(this.element).is("input[type=text]")&&(c=t(this.element).val(),v=c.split(this.locale.separator),f=o=null,v.length==2?(f=n(v[0],this.locale.format),o=n(v[1],this.locale.format)):this.singleDatePicker&&c!==""&&(f=n(c,this.locale.format),o=n(c,this.locale.format)),f!==null&&o!==null&&(this.setStartDate(f),this.setEndDate(o))),typeof r.ranges=="object"){for(e in r.ranges)(f=typeof r.ranges[e][0]=="string"?n(r.ranges[e][0],this.locale.format):n(r.ranges[e][0]),o=typeof r.ranges[e][1]=="string"?n(r.ranges[e][1],this.locale.format):n(r.ranges[e][1]),this.minDate&&f.isBefore(this.minDate)&&(f=this.minDate.clone()),s=this.maxDate,this.dateLimit&&s&&f.clone().add(this.dateLimit).isAfter(s)&&(s=f.clone().add(this.dateLimit)),s&&o.isAfter(s)&&(o=s.clone()),this.minDate&&o.isBefore(this.minDate,this.timepicker?"minute":"day")||s&&f.isAfter(s,this.timepicker?"minute":"day"))||(h=document.createElement("textarea"),h.innerHTML=e,a=h.value,this.ranges[a]=[f,o]);l="<ul>";for(e in this.ranges)l+='<li data-range-key="'+e+'">'+e+"<\/li>";this.showCustomRangeLabel&&(l+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"<\/li>");l+="<\/ul>";this.container.find(".ranges").prepend(l)}typeof u=="function"&&(this.callback=u);this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide());this.timePicker&&this.autoApply&&(this.autoApply=!1);this.autoApply&&typeof r.ranges!="object"?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide");this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide(),this.timePicker?this.container.find(".ranges ul").hide():this.container.find(".ranges").hide());(typeof r.ranges=="undefined"&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar");this.container.addClass("opens"+this.opens);typeof r.ranges!="undefined"&&this.opens=="right"&&this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent());this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses);this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass);this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass);this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.find(".calendar").on("click.daterangepicker",".prev",t.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",t.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",t.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",t.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",t.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",t.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",t.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",t.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",t.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",t.proxy(this.formInputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_input input",t.proxy(this.formInputsKeydown,this));this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",t.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",t.proxy(this.clickCancel,this)).on("click.daterangepicker","li",t.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",t.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",t.proxy(this.updateFormInputs,this));if(this.element.is("input")||this.element.is("button"))this.element.on({"click.daterangepicker":t.proxy(this.show,this),"focus.daterangepicker":t.proxy(this.show,this),"keyup.daterangepicker":t.proxy(this.elementChanged,this),"keydown.daterangepicker":t.proxy(this.keydown,this)});else{this.element.on("click.daterangepicker",t.proxy(this.toggle,this));this.element.on("keydown.daterangepicker",t.proxy(this.toggle,this))}this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};return i.prototype={constructor:i,setStartDate:function(t){typeof t=="string"&&(this.startDate=n(t,this.locale.format));typeof t=="object"&&(this.startDate=n(t));this.timePicker||(this.startDate=this.startDate.startOf("day"));this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement));this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement));this.isShowing||this.updateElement();this.updateMonthsInView()},setEndDate:function(t){typeof t=="string"&&(this.endDate=n(t,this.locale.format));typeof t=="object"&&(this.endDate=n(t));this.timePicker||(this.endDate=this.endDate.add(1,"d").startOf("day").subtract(1,"second"));this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone());this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone());this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit));this.previousRightTime=this.endDate.clone();this.isShowing||this.updateElement();this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled"));this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active"));this.updateMonthsInView();this.updateCalendars();this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2);this.rightCalendar.month=this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.startDate.clone().date(2).add(1,"month"):this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){var n,i,r,t;(this.timePicker&&(this.endDate?(n=parseInt(this.container.find(".left .hourselect").val(),10),i=parseInt(this.container.find(".left .minuteselect").val(),10),r=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,this.timePicker24Hour||(t=this.container.find(".left .ampmselect").val(),t==="PM"&&n<12&&(n+=12),t==="AM"&&n===12&&(n=0))):(n=parseInt(this.container.find(".right .hourselect").val(),10),i=parseInt(this.container.find(".right .minuteselect").val(),10),r=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||(t=this.container.find(".right .ampmselect").val(),t==="PM"&&n<12&&(n+=12),t==="AM"&&n===12&&(n=0))),this.leftCalendar.month.hour(n).minute(i).second(r),this.rightCalendar.month.hour(n).minute(i).second(r)),this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),this.endDate!=null)&&this.calculateChosenLabel()},renderCalendar:function(i){var r=i=="left"?this.leftCalendar:this.rightCalendar,nt=r.month.month(),tt=r.month.year(),pt=r.month.hour(),ot=r.month.minute(),st=r.month.second(),wt=n([tt,nt]).daysInMonth(),b=n([tt,nt,1]),bt=n([tt,nt,wt]),ht=n(b).subtract(1,"month").month(),ct=n(b).subtract(1,"month").year(),it=n([ct,ht]).daysInMonth(),lt=b.day(),r=[],a,v,rt,h,d,l,ft,f,u,o,w,g,et,s;for(r.firstDay=b,r.lastDay=bt,s=0;s<6;s++)r[s]=[];a=it-lt+this.locale.firstDay+1;a>it&&(a-=7);lt==this.locale.firstDay&&(a=it-6);v=n([ct,ht,a,12,ot,st]);for(var s=0,u=0,f=0;s<42;s++,u++,v=n(v).add(24,"hour"))s>0&&u%7==0&&(u=0,f++),r[f][u]=v.clone().hour(pt).minute(ot).second(st),v.hour(12),this.minDate&&r[f][u].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&r[f][u].isBefore(this.minDate)&&i=="left"&&(r[f][u]=this.minDate.clone()),this.maxDate&&r[f][u].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&r[f][u].isAfter(this.maxDate)&&i=="right"&&(r[f][u]=this.maxDate.clone());i=="left"?this.leftCalendar.calendar=r:this.rightCalendar.calendar=r;var y=i=="left"?this.minDate:this.startDate,c=this.maxDate,gt=i=="left"?this.startDate:this.endDate,k=this.locale.direction=="ltr"?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"},e='<table class="table-condensed">';if(e+="<thead>",e+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(e+="<th><\/th>"),e+=y&&!y.isBefore(r.firstDay)||this.linkedCalendars&&i!="left"?"<th><\/th>":'<th class="prev available"><i class="fa fa-'+k.left+" glyphicon glyphicon-"+k.left+'"><\/i><\/th>',rt=this.locale.monthNames[r[1][1].month()]+r[1][1].format(" YYYY"),this.showDropdowns){var at=r[1][1].month(),p=r[1][1].year(),vt=c&&c.year()||p+5,yt=y&&y.year()||p-50,kt=p==yt,dt=p==vt,ut='<select class="monthselect">';for(h=0;h<12;h++)ut+=(!kt||h>=y.month())&&(!dt||h<=c.month())?"<option value='"+h+"'"+(h===at?" selected='selected'":"")+">"+this.locale.monthNames[h]+"<\/option>":"<option value='"+h+"'"+(h===at?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[h]+"<\/option>";for(ut+="<\/select>",d='<select class="yearselect">',l=yt;l<=vt;l++)d+='<option value="'+l+'"'+(l===p?' selected="selected"':"")+">"+l+"<\/option>";d+="<\/select>";rt=ut+d}for(e+='<th colspan="5" class="month">'+rt+"<\/th>",e+=(!c||c.isAfter(r.lastDay))&&(!this.linkedCalendars||i=="right"||this.singleDatePicker)?'<th class="next available"><i class="fa fa-'+k.right+" glyphicon glyphicon-"+k.right+'"><\/i><\/th>':"<th><\/th>",e+="<\/tr>",e+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(e+='<th class="week">'+this.locale.weekLabel+"<\/th>"),t.each(this.locale.daysOfWeek,function(n,t){e+="<th>"+t+"<\/th>"}),e+="<\/tr>",e+="<\/thead>",e+="<tbody>",this.endDate==null&&this.dateLimit&&(ft=this.startDate.clone().add(this.dateLimit).endOf("day"),(!c||ft.isBefore(c))&&(c=ft)),f=0;f<6;f++){for(e+="<tr>",this.showWeekNumbers?e+='<td class="week">'+r[f][0].week()+"<\/td>":this.showISOWeekNumbers&&(e+='<td class="week">'+r[f][0].isoWeek()+"<\/td>"),u=0;u<7;u++){for(o=[],r[f][u].isSame(new Date,"day")&&o.push("today"),r[f][u].isoWeekday()>5&&o.push("weekend"),r[f][u].month()!=r[1][1].month()&&o.push("off"),this.minDate&&r[f][u].isBefore(this.minDate,"day")&&o.push("off","disabled"),c&&r[f][u].isAfter(c,"day")&&o.push("off","disabled"),this.isInvalidDate(r[f][u])&&o.push("off","disabled"),r[f][u].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&o.push("active","start-date"),this.endDate!=null&&r[f][u].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&o.push("active","end-date"),this.endDate!=null&&r[f][u]>this.startDate&&r[f][u]<this.endDate&&o.push("in-range"),w=this.isCustomDate(r[f][u]),w!==!1&&(typeof w=="string"?o.push(w):Array.prototype.push.apply(o,w)),g="",et=!1,s=0;s<o.length;s++)g+=o[s]+" ",o[s]=="disabled"&&(et=!0);et||(g+="available");e+='<td class="'+g.replace(/^\s+|\s+$/g,"")+'" data-title="r'+f+"c"+u+'">'+r[f][u].date()+"<\/td>"}e+="<\/tr>"}e+="<\/tbody>";e+="<\/table>";this.container.find(".calendar."+i+" .calendar-table").html(e)},renderTimePicker:function(n){var r,i,e,u,s,v,y,p,c,o,f,t,l,a;if(n!="right"||this.endDate){for(u=this.maxDate,this.dateLimit&&(!this.maxDate||this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate))&&(u=this.startDate.clone().add(this.dateLimit)),n=="left"?(i=this.startDate.clone(),e=this.minDate):n=="right"&&(i=this.endDate.clone(),e=this.startDate,s=this.container.find(".calendar.right .calendar-time div"),s.html()!=""&&(i.hour(s.find(".hourselect option:selected").val()||i.hour()),i.minute(s.find(".minuteselect option:selected").val()||i.minute()),i.second(s.find(".secondselect option:selected").val()||i.second()),this.timePicker24Hour||(v=s.find(".ampmselect option:selected").val(),v==="PM"&&i.hour()<12&&i.hour(i.hour()+12),v==="AM"&&i.hour()===12&&i.hour(0))),i.isBefore(this.startDate)&&(i=this.startDate.clone()),u&&i.isAfter(u)&&(i=u.clone())),r='<select class="hourselect">',y=this.timePicker24Hour?0:1,p=this.timePicker24Hour?23:12,t=y;t<=p;t++)c=t,this.timePicker24Hour||(c=i.hour()>=12?t==12?12:t+12:t==12?0:t),o=i.clone().hour(c),f=!1,e&&o.minute(59).isBefore(e)&&(f=!0),u&&o.minute(0).isAfter(u)&&(f=!0),r+=c!=i.hour()||f?f?'<option value="'+t+'" disabled="disabled" class="disabled">'+t+"<\/option>":'<option value="'+t+'">'+t+"<\/option>":'<option value="'+t+'" selected="selected">'+t+"<\/option>";for(r+="<\/select> ",r+=': <select class="minuteselect">',t=0;t<60;t+=this.timePickerIncrement){var h=t<10?"0"+t:t,o=i.clone().minute(t),f=!1;e&&o.second(59).isBefore(e)&&(f=!0);u&&o.second(0).isAfter(u)&&(f=!0);r+=i.minute()!=t||f?f?'<option value="'+t+'" disabled="disabled" class="disabled">'+h+"<\/option>":'<option value="'+t+'">'+h+"<\/option>":'<option value="'+t+'" selected="selected">'+h+"<\/option>"}if(r+="<\/select> ",this.timePickerSeconds){for(r+=': <select class="secondselect">',t=0;t<60;t++){var h=t<10?"0"+t:t,o=i.clone().second(t),f=!1;e&&o.isBefore(e)&&(f=!0);u&&o.isAfter(u)&&(f=!0);r+=i.second()!=t||f?f?'<option value="'+t+'" disabled="disabled" class="disabled">'+h+"<\/option>":'<option value="'+t+'">'+h+"<\/option>":'<option value="'+t+'" selected="selected">'+h+"<\/option>"}r+="<\/select> "}this.timePicker24Hour||(r+='<select class="ampmselect">',l="",a="",e&&i.clone().hour(12).minute(0).second(0).isBefore(e)&&(l=' disabled="disabled" class="disabled"'),u&&i.clone().hour(0).minute(0).second(0).isAfter(u)&&(a=' disabled="disabled" class="disabled"'),r+=i.hour()>=12?'<option value="AM"'+l+'>AM<\/option><option value="PM" selected="selected"'+a+">PM<\/option>":'<option value="AM" selected="selected"'+l+'>AM<\/option><option value="PM"'+a+">PM<\/option>",r+="<\/select>");this.container.find(".calendar."+n+" .calendar-time div").html(r)}},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var n={top:0,left:0},i,r=t(window).width();this.parentEl.is("body")||(n={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},r=this.parentEl[0].clientWidth+this.parentEl.offset().left);i=this.drops=="up"?this.element.offset().top-this.container.outerHeight()-n.top:this.element.offset().top+this.element.outerHeight()-n.top;this.container[this.drops=="up"?"addClass":"removeClass"]("dropup");this.opens=="left"?(this.container.css({top:i,right:r-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):this.opens=="center"?(this.container.css({top:i,left:this.element.offset().left-n.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:i,left:this.element.offset().left-n.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>t(window).width()&&this.container.css({left:"auto",right:0}))},show:function(){if(!this.isShowing){this._outsideClickProxy=t.proxy(function(n){this.outsideClick(n)},this);t(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy);t(window).on("resize.daterangepicker",t.proxy(function(n){this.move(n)},this));this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.previousRightTime=this.endDate.clone();this.updateView();this.container.show();this.move();this.element.trigger("show.daterangepicker",this);this.isShowing=!0}},hide:function(){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),t(document).off(".daterangepicker"),t(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(){this.isShowing?this.hide():this.show()},outsideClick:function(n){var i=t(n.target);n.type=="focusin"||i.closest(this.element).length||i.closest(this.container).length||i.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar");this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(n){var t,i;this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(t=n.target.getAttribute("data-range-key"),t==this.locale.customRangeLabel?this.updateView():(i=this.ranges[t],this.container.find("input[name=daterangepicker_start]").val(i[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(i[1].format(this.locale.format))))},clickRange:function(n){var t=n.target.getAttribute("data-range-key"),i;this.chosenLabel=t;t==this.locale.customRangeLabel?this.showCalendars():(i=this.ranges[t],this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply())},clickPrev:function(n){var i=t(n.target).parents(".calendar");i.hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month");this.updateCalendars()},clickNext:function(n){var i=t(n.target).parents(".calendar");i.hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month"));this.updateCalendars()},hoverDate:function(n){if(t(n.target).hasClass("available")){var r=t(n.target).attr("data-title"),u=r.substr(1,1),f=r.substr(3,1),e=t(n.target).parents(".calendar"),i=e.hasClass("left")?this.leftCalendar.calendar[u][f]:this.rightCalendar.calendar[u][f];this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")?this.container.find("input[name=daterangepicker_start]").val(i.format(this.locale.format)):this.endDate||this.container.find("input[name=daterangepicker_end]").is(":focus")||this.container.find("input[name=daterangepicker_end]").val(i.format(this.locale.format));var o=this.leftCalendar,s=this.rightCalendar,h=this.startDate;this.endDate||this.container.find(".calendar tbody td").each(function(n,r){if(!t(r).hasClass("week")){var f=t(r).attr("data-title"),e=f.substr(1,1),c=f.substr(3,1),l=t(r).parents(".calendar"),u=l.hasClass("left")?o.calendar[e][c]:s.calendar[e][c];u.isAfter(h)&&u.isBefore(i)||u.isSame(i,"day")?t(r).addClass("in-range"):t(r).removeClass("in-range")}})}},clickDate:function(n){var i,u,f,e;if(t(n.target).hasClass("available")){var o=t(n.target).attr("data-title"),s=o.substr(1,1),h=o.substr(3,1),c=t(n.target).parents(".calendar"),r=c.hasClass("left")?this.leftCalendar.calendar[s][h]:this.rightCalendar.calendar[s][h];this.endDate||r.isBefore(this.startDate,"day")?(this.timePicker&&(i=parseInt(this.container.find(".left .hourselect").val(),10),this.timePicker24Hour||(u=this.container.find(".left .ampmselect").val(),u==="PM"&&i<12&&(i+=12),u==="AM"&&i===12&&(i=0)),f=parseInt(this.container.find(".left .minuteselect").val(),10),e=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,r=r.clone().hour(i).minute(f).second(e)),this.endDate=null,this.setStartDate(r.clone())):!this.endDate&&r.isBefore(this.startDate)?this.setEndDate(this.startDate.clone()):(this.timePicker&&(i=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||(u=this.container.find(".right .ampmselect").val(),u==="PM"&&i<12&&(i+=12),u==="AM"&&i===12&&(i=0)),f=parseInt(this.container.find(".right .minuteselect").val(),10),e=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,r=r.clone().hour(i).minute(f).second(e)),this.setEndDate(r.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply()));this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply());this.updateView();n.stopPropagation()}},calculateChosenLabel:function(){var i=!0,r=0,n,t;for(n in this.ranges){if(this.timePicker){if(t=this.timePickerSeconds?"YYYY-MM-DD hh:mm:ss":"YYYY-MM-DD hh:mm",this.startDate.format(t)==this.ranges[n][0].format(t)&&this.endDate.format(t)==this.ranges[n][1].format(t)){i=!1;this.chosenLabel=this.container.find(".ranges li:eq("+r+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")){i=!1;this.chosenLabel=this.container.find(".ranges li:eq("+r+")").addClass("active").html();break}r++}i&&(this.chosenLabel=this.showCustomRangeLabel?this.container.find(".ranges li:last").addClass("active").html():null,this.showCalendars())},clickApply:function(){this.hide();this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.hide();this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(n){var u=t(n.target).closest(".calendar").hasClass("left"),e=u?"left":"right",f=this.container.find(".calendar."+e),r=parseInt(f.find(".monthselect").val(),10),i=f.find(".yearselect").val();u||(i<this.startDate.year()||i==this.startDate.year()&&r<this.startDate.month())&&(r=this.startDate.month(),i=this.startDate.year());this.minDate&&(i<this.minDate.year()||i==this.minDate.year()&&r<this.minDate.month())&&(r=this.minDate.month(),i=this.minDate.year());this.maxDate&&(i>this.maxDate.year()||i==this.maxDate.year()&&r>this.maxDate.month())&&(r=this.maxDate.month(),i=this.maxDate.year());u?(this.leftCalendar.month.month(r).year(i),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(r).year(i),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month")));this.updateCalendars()},timeChanged:function(n){var u=t(n.target).closest(".calendar"),h=u.hasClass("left"),r=parseInt(u.find(".hourselect").val(),10),o=parseInt(u.find(".minuteselect").val(),10),s=this.timePickerSeconds?parseInt(u.find(".secondselect").val(),10):0,e,i,f;this.timePicker24Hour||(e=u.find(".ampmselect").val(),e==="PM"&&r<12&&(r+=12),e==="AM"&&r===12&&(r=0));h?(i=this.startDate.clone(),i.hour(r),i.minute(o),i.second(s),this.setStartDate(i),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==i.format("YYYY-MM-DD")&&this.endDate.isBefore(i)&&this.setEndDate(i.clone())):this.endDate&&(f=this.endDate.clone(),f.hour(r),f.minute(o),f.second(s),this.setEndDate(f));this.updateCalendars();this.updateFormInputs();this.renderTimePicker("left");this.renderTimePicker("right")},formInputsChanged:function(i){var f=t(i.target).closest(".calendar").hasClass("right"),r=n(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),u=n(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);r.isValid()&&u.isValid()&&(f&&u.isBefore(r)&&(r=u.clone()),this.setStartDate(r),this.setEndDate(u),f?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format)));this.updateView()},formInputsFocused:function(n){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active");t(n.target).addClass("active");var i=t(n.target).closest(".calendar").hasClass("right");i&&(this.endDate=null,this.setStartDate(this.startDate.clone()),this.updateView())},formInputsBlurred:function(){if(!this.endDate){var i=this.container.find('input[name="daterangepicker_end"]').val(),t=n(i,this.locale.format);t.isValid()&&(this.setEndDate(t),this.updateView())}},formInputsKeydown:function(n){n.keyCode===13&&(n.preventDefault(),this.formInputsChanged(n))},elementChanged:function(){if(this.element.is("input")&&this.element.val().length){var r=this.element.val().split(this.locale.separator),t=null,i=null;(r.length===2&&(t=n(r[0],this.locale.format),i=n(r[1],this.locale.format)),(this.singleDatePicker||t===null||i===null)&&(t=n(this.element.val(),this.locale.format),i=t),t.isValid()&&i.isValid())&&(this.setStartDate(t),this.setEndDate(i),this.updateView())}},keydown:function(n){(n.keyCode===9||n.keyCode===13)&&this.hide();n.keyCode===27&&(n.preventDefault(),n.stopPropagation(),this.hide())},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData()}},t.fn.daterangepicker=function(n,r){var u=t.extend(!0,{},t.fn.daterangepicker.defaultOptions,n);return this.each(function(){var n=t(this);n.data("daterangepicker")&&n.data("daterangepicker").remove();n.data("daterangepicker",new i(n,u,r))}),this},i});
/*!
 * Datepicker for Bootstrap v1.8.0 (https://github.com/uxsolutions/bootstrap-datepicker)
 *
 * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof exports?require("jquery"):jQuery)}(function(n,t){function f(){return new Date(Date.UTC.apply(Date,arguments))}function s(){var n=new Date;return f(n.getFullYear(),n.getMonth(),n.getDate())}function l(n,t){return n.getUTCFullYear()===t.getUTCFullYear()&&n.getUTCMonth()===t.getUTCMonth()&&n.getUTCDate()===t.getUTCDate()}function h(i,r){return function(){return r!==t&&n.fn.datepicker.deprecated(r),this[i].apply(this,arguments)}}function p(n){return n&&!isNaN(n.getTime())}function w(t,i){function o(n,t){return t.toLowerCase()}var u,f=n(t).data(),e={},s=new RegExp("^"+i.toLowerCase()+"([A-Z])"),r;i=new RegExp("^"+i.toLowerCase());for(r in f)i.test(r)&&(u=r.replace(s,o),e[u]=f[r]);return e}function b(t){var u={},i;if(r[t]||(t=t.split("-")[0],r[t]))return i=r[t],n.each(y,function(n,t){t in i&&(u[t]=i[t])}),u}var a=function(){var t={get:function(n){return this.slice(n)[0]},contains:function(n){for(var i=n&&n.valueOf(),t=0,r=this.length;t<r;t++)if(0<=this[t].valueOf()-i&&this[t].valueOf()-i<864e5)return t;return-1},remove:function(n){this.splice(n,1)},replace:function(t){t&&(n.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var n=new a;return n.replace(this),n}};return function(){var i=[];return i.push.apply(i,arguments),n.extend(i,t),i}}(),u=function(t,r){n.data(t,"datepicker",this);this._process_options(r);this.dates=new a;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=n(t);this.isInput=this.element.is("input");this.inputField=this.isInput?this.element:this.element.find("input");this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn");this.component&&0===this.component.length&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=n(i.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(n,t){return Number(t)+1});this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=!1;this.setViewMode(this.o.startView);this._allow_update=!0;this.fillDow();this.fillMonths();this.update();this.isInline&&this.show()},c,v,o,e,y,r,i;u.prototype={constructor:u,_resolveViewName:function(t){return n.each(i.viewModes,function(i,r){if(t===i||n.inArray(t,r.names)!==-1)return t=i,!1}),t},_resolveDaysOfWeek:function(t){return n.isArray(t)||(t=t.split(/[,\s]*/)),n.map(t,Number)},_check_template:function(i){try{if(i===t||""===i)return!1;if((i.match(/[<>]/g)||[]).length<=0)return!0;var r=n(i);return r.length>0}catch(n){return!1}},_process_options:function(t){var u,h,l,o,c;if(this._o=n.extend({},this._o,t),u=this.o=n.extend({},this._o),h=u.language,r[h]||(h=h.split("-")[0],r[h]||(h=e.language)),u.language=h,u.startView=this._resolveViewName(u.startView),u.minViewMode=this._resolveViewName(u.minViewMode),u.maxViewMode=this._resolveViewName(u.maxViewMode),u.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,u.startView)),u.multidate!==!0&&(u.multidate=Number(u.multidate)||!1,u.multidate!==!1&&(u.multidate=Math.max(0,u.multidate))),u.multidateSeparator=String(u.multidateSeparator),u.weekStart%=7,u.weekEnd=(u.weekStart+6)%7,l=i.parseFormat(u.format),u.startDate!==-(1/0)&&(u.startDate=u.startDate?u.startDate instanceof Date?this._local_to_utc(this._zero_time(u.startDate)):i.parseDate(u.startDate,l,u.language,u.assumeNearbyYear):-(1/0)),u.endDate!==1/0&&(u.endDate=u.endDate?u.endDate instanceof Date?this._local_to_utc(this._zero_time(u.endDate)):i.parseDate(u.endDate,l,u.language,u.assumeNearbyYear):1/0),u.daysOfWeekDisabled=this._resolveDaysOfWeek(u.daysOfWeekDisabled||[]),u.daysOfWeekHighlighted=this._resolveDaysOfWeek(u.daysOfWeekHighlighted||[]),u.datesDisabled=u.datesDisabled||[],n.isArray(u.datesDisabled)||(u.datesDisabled=u.datesDisabled.split(",")),u.datesDisabled=n.map(u.datesDisabled,function(n){return i.parseDate(n,l,u.language,u.assumeNearbyYear)}),o=String(u.orientation).toLowerCase().split(/\s+/g),c=u.orientation.toLowerCase(),o=n.grep(o,function(n){return/^auto|left|right|top|bottom$/.test(n)}),u.orientation={x:"auto",y:"auto"},c&&"auto"!==c)if(1===o.length)switch(o[0]){case"top":case"bottom":u.orientation.y=o[0];break;case"left":case"right":u.orientation.x=o[0]}else c=n.grep(o,function(n){return/^left|right$/.test(n)}),u.orientation.x=c[0]||"auto",c=n.grep(o,function(n){return/^top|bottom$/.test(n)}),u.orientation.y=c[0]||"auto";if(u.defaultViewDate instanceof Date||"string"==typeof u.defaultViewDate)u.defaultViewDate=i.parseDate(u.defaultViewDate,l,u.language,u.assumeNearbyYear);else if(u.defaultViewDate){var a=u.defaultViewDate.year||(new Date).getFullYear(),v=u.defaultViewDate.month||0,y=u.defaultViewDate.day||1;u.defaultViewDate=f(a,v,y)}else u.defaultViewDate=s()},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var f,r,u,i=0;i<n.length;i++)f=n[i][0],2===n[i].length?(r=t,u=n[i][1]):3===n[i].length&&(r=n[i][1],u=n[i][2]),f.on(u,r)},_unapplyEvents:function(n){for(var f,r,u,i=0;i<n.length;i++)f=n[i][0],2===n[i].length?(u=t,r=n[i][1]):3===n[i].length&&(u=n[i][1],r=n[i][2]),f.off(r,u)},_buildEvents:function(){var t={keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this),paste:n.proxy(this.paste,this)};this.o.showOnFocus===!0&&(t.focus=n.proxy(this.show,this));this._events=this.isInput?[[this.element,t]]:this.component&&this.inputField.length?[[this.inputField,t],[this.component,{click:n.proxy(this.show,this)}]]:[[this.element,{click:n.proxy(this.show,this),keydown:n.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:n.proxy(function(n){this._focused_from=n.target},this)}],[this.element,{blur:n.proxy(function(n){this._focused_from=n.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":n.proxy(function(n){this.update(n.date)},this)}]);this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[this.picker,".prev, .next",{click:n.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:n.proxy(this.dayCellClick,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{"mousedown touchstart":n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,r){var u=r||this.dates.get(-1),f=this._utc_to_local(u);this.element.trigger({type:t,date:f,viewMode:this.viewMode,dates:n.map(this.dates,this._utc_to_local),format:n.proxy(function(n,t){0===arguments.length?(n=this.dates.length-1,t=this.o.format):"string"==typeof n&&(t=n,n=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(n);return i.formatDate(r,t,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&this.o.enableOnReadonly===!1))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&n(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var i;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&n.inArray("text/plain",t.originalEvent.clipboardData.types)!==-1)i=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;i=window.clipboardData.getData("Text")}this.setDate(i);this.update();t.preventDefault()},_utc_to_local:function(n){if(!n)return n;var t=new Date(n.getTime()+6e4*n.getTimezoneOffset());return t.getTimezoneOffset()!==n.getTimezoneOffset()&&(t=new Date(n.getTime()+6e4*t.getTimezoneOffset())),t},_local_to_utc:function(n){return n&&new Date(n.getTime()-6e4*n.getTimezoneOffset())},_zero_time:function(n){return n&&new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return n&&f(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())},getDates:function(){return n.map(this.dates,this._utc_to_local)},getUTCDates:function(){return n.map(this.dates,function(n){return new Date(n)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var n=this.dates.get(-1);return n!==t?new Date(n):null},clearDates:function(){this.inputField.val("");this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,n.map(t,this._utc_to_local)),this},setDate:h("setDates"),setUTCDate:h("setUTCDates"),remove:h("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var n=this.getFormattedDate();return this.inputField.val(n),this},getFormattedDate:function(r){r===t&&(r=this.o.format);var u=this.o.language;return n.map(this.dates,function(n){return i.formatDate(n,r,u)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(n){return this._process_options({startDate:n}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(n){return this._process_options({endDate:n}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(n){return this._process_options({daysOfWeekDisabled:n}),this.update(),this},setDaysOfWeekHighlighted:function(n){return this._process_options({daysOfWeekHighlighted:n}),this.update(),this},setDatesDisabled:function(n){return this._process_options({datesDisabled:n}),this.update(),this},place:function(){var y,r,p;if(this.isInline)return this;var f=this.picker.outerWidth(),s=this.picker.outerHeight(),e=n(this.o.container),h=e.width(),c="body"===this.o.container?n(document).scrollTop():e.scrollTop(),l=e.offset(),a=[0];this.element.parents().each(function(){var t=n(this).css("z-index");"auto"!==t&&0!==Number(t)&&a.push(Number(t))});var v=Math.max.apply(Math,a)+this.o.zIndexOffset,u=this.component?this.component.parent().offset():this.element.offset(),w=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),o=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),t=u.left-l.left,i=u.top-l.top;return"body"!==this.o.container&&(i+=c),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(t-=f-o)):u.left<0?(this.picker.addClass("datepicker-orient-left"),t-=u.left-10):t+f>h?(this.picker.addClass("datepicker-orient-right"),t+=o-f):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left"),r=this.o.orientation.y,("auto"===r&&(y=-c+i-s,r=y<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+r),"top"===r?i-=s+parseInt(this.picker.css("padding-top")):i+=w,this.o.rtl)?(p=h-(t+o),this.picker.css({top:i,right:p,zIndex:v})):this.picker.css({top:i,left:t,zIndex:v}),this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var u=this.dates.copy(),t=[],r=!1;return arguments.length?(n.each(arguments,n.proxy(function(n,i){i instanceof Date&&(i=this._local_to_utc(i));t.push(i)},this)),r=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),t=t&&this.o.multidate?t.split(this.o.multidateSeparator):[t],delete this.element.data().date),t=n.map(t,n.proxy(function(n){return i.parseDate(n,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),t=n.grep(t,n.proxy(function(n){return!this.dateWithinRange(n)||!n},this),!0),this.dates.replace(t),this.o.updateViewDate&&(this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate),r?(this.setValue(),this.element.change()):this.dates.length&&String(u)!==String(this.dates)&&r&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&u.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var i=this.o.weekStart,t="<tr>";for(this.o.calendarWeeks&&(t+='<th class="cw">&#160;<\/th>');i<this.o.weekStart+7;)t+='<th class="dow',n.inArray(i,this.o.daysOfWeekDisabled)!==-1&&(t+=" disabled"),t+='">'+r[this.o.language].daysMin[i++%7]+"<\/th>";t+="<\/tr>";this.picker.find(".datepicker-days thead").append(t)}},fillMonths:function(){for(var t,i=this._utc_to_local(this.viewDate),u="",n=0;n<12;n++)t=i&&i.getMonth()===n?" focused":"",u+='<span class="month'+t+'">'+r[this.o.language].monthsShort[n]+"<\/span>";this.picker.find(".datepicker-months td").html(u)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),u=this.viewDate.getUTCMonth(),f=s();return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<u?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>u)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&l(t,f)&&i.push("today"),this.dates.contains(t)!==-1&&i.push("active"),this.dateWithinRange(t)||i.push("disabled"),this.dateIsDisabled(t)&&i.push("disabled","disabled-date"),n.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1&&i.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!==-1&&i.push("selected"),t.valueOf()===this.range[0]&&i.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&i.push("range-end")),i},_fill_yearsView:function(i,r,u,f,e,o,s){for(var c,v,h,w="",l=u/10,b=this.picker.find(i),y=Math.floor(f/u)*u,p=y+9*l,k=Math.floor(this.viewDate.getFullYear()/l)*l,d=n.map(this.dates,function(n){return Math.floor(n.getUTCFullYear()/l)*l}),a=y-l;a<=p+l;a+=l)c=[r],v=null,a===y-l?c.push("old"):a===p+l&&c.push("new"),n.inArray(a,d)!==-1&&c.push("active"),(a<e||a>o)&&c.push("disabled"),a===k&&c.push("focused"),s!==n.noop&&(h=s(new Date(a,0,1)),h===t?h={}:"boolean"==typeof h?h={enabled:h}:"string"==typeof h&&(h={classes:h}),h.enabled===!1&&c.push("disabled"),h.classes&&(c=c.concat(h.classes.split(/\s+/))),h.tooltip&&(v=h.tooltip)),w+='<span class="'+c.join(" ")+'"'+(v?' title="'+v+'"':"")+">"+a+"<\/span>";b.find(".datepicker-switch").text(y+"-"+p);b.find("td").html(w)},fill:function(){var y,u,w=new Date(this.viewDate),o=w.getUTCFullYear(),d=w.getUTCMonth(),a=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),ut=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),v=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,ft=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,et=r[this.o.language].today||r.en.today||"",ot=r[this.o.language].clear||r.en.clear||"",st=r[this.o.language].titleFormat||r.en.titleFormat,e,g,h,p,s,c,k,it,l,rt;if(!isNaN(o)&&!isNaN(d)){for(this.picker.find(".datepicker-days .datepicker-switch").text(i.formatDate(w,st,this.o.language)),this.picker.find("tfoot .today").text(et).css("display",this.o.todayBtn===!0||"linked"===this.o.todayBtn?"table-cell":"none"),this.picker.find("tfoot .clear").text(ot).css("display",this.o.clearBtn===!0?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths(),e=f(o,d,0),g=e.getUTCDate(),e.setUTCDate(g-(e.getUTCDay()-this.o.weekStart+7)%7),h=new Date(e),e.getUTCFullYear()<100&&h.setUTCFullYear(e.getUTCFullYear()),h.setUTCDate(h.getUTCDate()+42),h=h.valueOf(),c=[];e.valueOf()<h;){if(p=e.getUTCDay(),p===this.o.weekStart&&(c.push("<tr>"),this.o.calendarWeeks)){var nt=new Date(+e+(this.o.weekStart-p-7)%7*864e5),tt=new Date(Number(nt)+(11-nt.getUTCDay())%7*864e5),b=new Date(Number(b=f(tt.getUTCFullYear(),0,1))+(11-b.getUTCDay())%7*864e5),ht=(tt-b)/6048e5+1;c.push('<td class="cw">'+ht+"<\/td>")}s=this.getClassNames(e);s.push("day");k=e.getUTCDate();this.o.beforeShowDay!==n.noop&&(u=this.o.beforeShowDay(this._utc_to_local(e)),u===t?u={}:"boolean"==typeof u?u={enabled:u}:"string"==typeof u&&(u={classes:u}),u.enabled===!1&&s.push("disabled"),u.classes&&(s=s.concat(u.classes.split(/\s+/))),u.tooltip&&(y=u.tooltip),u.content&&(k=u.content));s=n.isFunction(n.uniqueSort)?n.uniqueSort(s):n.unique(s);c.push('<td class="'+s.join(" ")+'"'+(y?' title="'+y+'"':"")+' data-date="'+e.getTime().toString()+'">'+k+"<\/td>");y=null;p===this.o.weekEnd&&c.push("<\/tr>");e.setUTCDate(e.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(c.join(""));it=r[this.o.language].monthsTitle||r.en.monthsTitle||"Months";l=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?it:o).end().find("tbody span").removeClass("active");(n.each(this.dates,function(n,t){t.getUTCFullYear()===o&&l.eq(t.getUTCMonth()).addClass("active")}),(o<a||o>v)&&l.addClass("disabled"),o===a&&l.slice(0,ut).addClass("disabled"),o===v&&l.slice(ft+1).addClass("disabled"),this.o.beforeShowMonth!==n.noop)&&(rt=this,n.each(l,function(i,r){var f=new Date(o,i,1),u=rt.o.beforeShowMonth(f);u===t?u={}:"boolean"==typeof u?u={enabled:u}:"string"==typeof u&&(u={classes:u});u.enabled!==!1||n(r).hasClass("disabled")||n(r).addClass("disabled");u.classes&&n(r).addClass(u.classes);u.tooltip&&n(r).prop("title",u.tooltip)}));this._fill_yearsView(".datepicker-years","year",10,o,a,v,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,o,a,v,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1e3,o,a,v,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var i,r,u=new Date(this.viewDate),t=u.getUTCFullYear(),f=u.getUTCMonth(),e=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),s=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),o=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,n=1;switch(this.viewMode){case 4:n*=10;case 3:n*=10;case 2:n*=10;case 1:i=Math.floor(t/n)*n<e;r=Math.floor(t/n)*n+n>o;break;case 0:i=t<=e&&f<s;r=t>=o&&f>h}this.picker.find(".prev").toggleClass("disabled",i);this.picker.find(".next").toggleClass("disabled",r)}},click:function(t){t.preventDefault();t.stopPropagation();var r,o,u,e;r=n(t.target);r.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1);r.hasClass("today")&&!r.hasClass("day")&&(this.setViewMode(0),this._setDate(s(),"linked"===this.o.todayBtn?null:"view"));r.hasClass("clear")&&this.clearDates();r.hasClass("disabled")||(r.hasClass("month")||r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),o=1,1===this.viewMode?(e=r.parent().find("span").index(r),u=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e)):(e=0,u=Number(r.text()),this.viewDate.setUTCFullYear(u)),this._trigger(i.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(f(u,e,o)):(this.setViewMode(this.viewMode-1),this.fill()));this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus();delete this._focused_from},dayCellClick:function(t){var r=n(t.currentTarget),u=r.data("date"),i=new Date(u);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate));this._setDate(i)},navArrowsClick:function(t){var u=n(t.currentTarget),r=u.hasClass("prev")?-1:1;0!==this.viewMode&&(r*=12*i.viewModes[this.viewMode].navStep);this.viewDate=this.moveMonth(this.viewDate,r);this._trigger(i.viewModes[this.viewMode].e,this.viewDate);this.fill()},_toggle_multidate:function(n){var t=this.dates.contains(n);if(n||this.dates.clear(),t!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(n)):this.dates.push(n),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(n,t){t&&"date"!==t||this._toggle_multidate(n&&new Date(n));(!t&&this.o.updateViewDate||"view"===t)&&(this.viewDate=n&&new Date(n));this.fill();this.setValue();t&&"view"===t||this._trigger("changeDate");this.inputField.trigger("change");!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(n,t){var i=new Date(n);return i.setUTCDate(n.getUTCDate()+t),i},moveWeek:function(n,t){return this.moveDay(n,7*t)},moveMonth:function(n,t){var f;if(!p(n))return this.o.defaultViewDate;if(!t)return n;var r,u,i=new Date(n.valueOf()),e=i.getUTCDate(),o=i.getUTCMonth(),s=Math.abs(t);if(t=t>0?1:-1,1===s)u=t===-1?function(){return i.getUTCMonth()===o}:function(){return i.getUTCMonth()!==r},r=o+t,i.setUTCMonth(r),r=(r+12)%12;else{for(f=0;f<s;f++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(e);u=function(){return r!==i.getUTCMonth()}}for(;u();)i.setUTCDate(--e),i.setUTCMonth(r);return i},moveYear:function(n,t){return this.moveMonth(n,12*t)},moveAvailableDate:function(n,t,i){do{if(n=this[i](n,t),!this.dateWithinRange(n))return!1;i="moveDay"}while(this.dateIsDisabled(n));return n},weekOfDateIsDisabled:function(t){return n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||n.grep(this.o.datesDisabled,function(n){return l(t,n)}).length>0},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){if(!this.picker.is(":visible"))return void(40!==n.keyCode&&27!==n.keyCode||(this.show(),n.stopPropagation()));var i,t,u=!1,r=this.focusDate||this.viewDate;switch(n.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();n.preventDefault();n.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;i=37===n.keyCode||38===n.keyCode?-1:1;0===this.viewMode?n.ctrlKey?(t=this.moveAvailableDate(r,i,"moveYear"),t&&this._trigger("changeYear",this.viewDate)):n.shiftKey?(t=this.moveAvailableDate(r,i,"moveMonth"),t&&this._trigger("changeMonth",this.viewDate)):37===n.keyCode||39===n.keyCode?t=this.moveAvailableDate(r,i,"moveDay"):this.weekOfDateIsDisabled(r)||(t=this.moveAvailableDate(r,i,"moveWeek")):1===this.viewMode?(38!==n.keyCode&&40!==n.keyCode||(i*=4),t=this.moveAvailableDate(r,i,"moveMonth")):2===this.viewMode&&(38!==n.keyCode&&40!==n.keyCode||(i*=4),t=this.moveAvailableDate(r,i,"moveYear"));t&&(this.focusDate=this.viewDate=t,this.setValue(),this.fill(),n.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&(this._toggle_multidate(r),u=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(n.preventDefault(),n.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}u&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))},setViewMode:function(n){this.viewMode=n;this.picker.children("div").hide().filter(".datepicker-"+i.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger("changeViewMode",new Date(this.viewDate))}};c=function(t,i){n.data(t,"datepicker",this);this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;this.keepEmptyValues=i.keepEmptyValues;delete i.keepEmptyValues;o.call(n(this.inputs),i).on("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n.data(t,"datepicker")});this.updateDates()};c.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},clearDates:function(){n.each(this.pickers,function(n,t){t.clearDates()})},dateUpdated:function(i){var u;if(!this.updating&&(this.updating=!0,u=n.data(i.target,"datepicker"),u!==t)){var r=u.getUTCDate(),s=this.keepEmptyValues,o=n.inArray(i.target,this.inputs),f=o-1,e=o+1,h=this.inputs.length;if(o!==-1){if(n.each(this.pickers,function(n,t){t.getUTCDate()||t!==u&&s||t.setUTCDate(r)}),r<this.dates[f])for(;f>=0&&r<this.dates[f];)this.pickers[f--].setUTCDate(r);else if(r>this.dates[e])for(;e<h&&r>this.dates[e];)this.pickers[e++].setUTCDate(r);this.updateDates();delete this.updating}}},destroy:function(){n.map(this.pickers,function(n){n.destroy()});n(this.inputs).off("changeDate",this.dateUpdated);delete this.element.data().datepicker},remove:h("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};v=n.fn.datepicker;o=function(i){var f=Array.apply(null,arguments),r;if(f.shift(),this.each(function(){var s=n(this),t=s.data("datepicker"),h="object"==typeof i&&i;if(!t){var l=w(this,"date"),a=n.extend({},e,l,h),v=b(a.language),o=n.extend({},e,v,l,h);s.hasClass("input-daterange")||o.inputs?(n.extend(o,{inputs:o.inputs||s.find("input").toArray()}),t=new c(this,o)):t=new u(this,o);s.data("datepicker",t)}"string"==typeof i&&"function"==typeof t[i]&&(r=t[i].apply(t,f))}),r===t||r instanceof u||r instanceof c)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+i+" function)");return r};n.fn.datepicker=o;e=n.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:n.noop,beforeShowMonth:n.noop,beforeShowYear:n.noop,beforeShowDecade:n.noop,beforeShowCentury:n.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0};y=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=u;r=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}};i={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(n){if("function"==typeof n.toValue&&"function"==typeof n.toDisplay)return n;var t=n.replace(this.validParts,"\0").split("\0"),i=n.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(f,e,o,h){function et(n,t){return t===!0&&(t=10),n<100&&(n+=2e3,n>(new Date).getFullYear()+t&&(n-=100)),n}function tt(){var n=this.slice(0,l[c].length),t=l[c].slice(0,n.length);return n.toLowerCase()===t.toLowerCase()}var l,y,it,c,rt,ut,g,v,ft,d,w;if(!f)return t;if(f instanceof Date)return f;if("string"==typeof e&&(e=i.parseFormat(e)),e.toValue)return e.toValue(f,e,o);if(ut={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},g={yesterday:"-1d",today:"+0d",tomorrow:"+1d"},f in g&&(f=g[f]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(f)){for(l=f.match(/([\-+]\d+)([dmwy])/gi),f=new Date,c=0;c<l.length;c++)y=l[c].match(/([\-+]\d+)([dmwy])/i),it=Number(y[1]),rt=ut[y[2].toLowerCase()],f=u.prototype[rt](f,it);return u.prototype._zero_utc_time(f)}l=f&&f.match(this.nonpunctuation)||[];var p,b,k={},nt=["yyyy","yy","M","MM","m","mm","d","dd"],a={yyyy:function(n,t){return n.setUTCFullYear(h?et(t,h):t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}};if(a.yy=a.yyyy,a.M=a.MM=a.mm=a.m,a.dd=a.d,f=s(),v=e.parts.slice(),l.length!==v.length&&(v=n(v).filter(function(t,i){return n.inArray(i,nt)!==-1}).toArray()),l.length===v.length){for(c=0,ft=v.length;c<ft;c++){if(p=parseInt(l[c],10),y=v[c],isNaN(p))switch(y){case"MM":b=n(r[o].months).filter(tt);p=n.inArray(b[0],r[o].months)+1;break;case"M":b=n(r[o].monthsShort).filter(tt);p=n.inArray(b[0],r[o].monthsShort)+1}k[y]=p}for(c=0;c<nt.length;c++)w=nt[c],w in k&&!isNaN(k[w])&&(d=new Date(f),a[w](d,k[w]),isNaN(d)||(f=d))}return f},formatDate:function(t,u,f){var e;if(!t)return"";if("string"==typeof u&&(u=i.parseFormat(u)),u.toDisplay)return u.toDisplay(t,u,f);e={d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d;e.mm=(e.m<10?"0":"")+e.m;t=[];for(var s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&t.push(s.shift()),t.push(e[u.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"><\/th><\/tr><tr><th class="prev">'+e.templates.leftArrow+'<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">'+e.templates.rightArrow+"<\/th><\/tr><\/thead>",contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-decades"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-centuries"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=v,this};n.fn.datepicker.version="1.8.0";n.fn.datepicker.deprecated=function(n){var t=window.console;t&&t.warn&&t.warn("DEPRECATED: "+n)};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),o.call(i,"show"))});n(function(){o.call(n('[data-provide="datepicker-inline"]'))})});
/*! bootstrap3-wysihtml5-bower 2014-09-26 */
var wysihtml5,Base,Handlebars;Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get&&!function(){var n=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return n.get.call(this)},set:function(t){return n.set.call(this,t)}})}();Array.isArray||(Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)});wysihtml5={version:"0.4.15",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"﻿",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46},function(n,t){"function"==typeof define&&define.amd?define(n):t.rangy=n()}(function(){function t(n,t){var i=typeof n[t];return i==ot||!(i!=rt||!n[t])||"unknown"==i}function u(n,t){return!(typeof n[t]!=rt||!n[t])}function b(n,t){return typeof n[t]!=h}function c(n){return function(t,i){for(var r=i.length;r--;)if(!n(t,i[r]))return!1;return!0}}function k(n){return n&&p(n,lt)&&w(n,ct)}function d(n){return u(n,"body")?n.body:n.getElementsByTagName("body")[0]}function l(n){u(window,"console")&&t(window.console,"log")&&window.console.log(n)}function g(n,t){t?window.alert(n):l(n)}function i(t){n.initialized=!0;n.supported=!1;g("Rangy is not supported on this page in your browser. Reason: "+t,n.config.alertOnFail)}function ut(t){g("Rangy warning: "+t,n.config.alertOnWarn)}function nt(n){return n.message||n.description||n+""}function a(){var e,s,h,u,a,v,y,c,b;if(!n.initialized){if(s=!1,h=!1,t(document,"createRange")&&(e=document.createRange(),p(e,ht)&&w(e,st)&&(s=!0)),u=d(document),!u||"body"!=u.nodeName.toLowerCase())return i("No body element found"),void 0;if(u&&t(u,"createTextRange")&&(e=u.createTextRange(),k(e)&&(h=!0)),!s&&!h)return i("Neither Range nor TextRange are available"),void 0;n.initialized=!0;n.features={implementsDomRange:s,implementsTextRange:h};for(y in r)(a=r[y])instanceof f&&a.init(a,n);for(c=0,b=o.length;b>c;++c)try{o[c](n)}catch(g){v="Rangy init listener threw an exception. Continuing. Detail: "+nt(g);l(v)}}}function ft(n){n=n||window;a();for(var t=0,i=s.length;i>t;++t)s[t](n)}function f(n,t,i){this.name=n;this.dependencies=t;this.initialized=!1;this.supported=!1;this.initializer=i}function tt(t,i,u,e){var o=new f(i,u,function(t){if(!t.initialized){t.initialized=!0;try{e(n,t);t.supported=!0}catch(r){var u="Module '"+i+"' failed to load: "+nt(r);l(u)}}});r[i]=o}function it(){}function et(){}var e,o,s,v,y,rt="object",ot="function",h="undefined",st=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ht=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],ct=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],lt=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],p=c(t),at=c(u),w=c(b),r={},n={version:"1.3alpha.20140804",initialized:!1,supported:!0,util:{isHostMethod:t,isHostObject:u,isHostProperty:b,areHostMethods:p,areHostObjects:at,areHostProperties:w,isTextRange:k,getBody:d},features:{},modules:r,config:{alertOnFail:!0,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==h?!0:rangyAutoInitialize}};return n.fail=i,n.warn=ut,{}.hasOwnProperty?n.util.extend=function(t,i,r){var f,u;for(var e in i)i.hasOwnProperty(e)&&(f=t[e],u=i[e],r&&null!==f&&"object"==typeof f&&null!==u&&"object"==typeof u&&n.util.extend(f,u,!0),t[e]=u);return i.hasOwnProperty("toString")&&(t.toString=i.toString),t}:i("hasOwnProperty not supported"),function(){var i,t,r=document.createElement("div");r.appendChild(document.createElement("span"));i=[].slice;try{1==i.call(r.childNodes,0)[0].nodeType&&(t=function(n){return i.call(n,0)})}catch(u){}t||(t=function(n){for(var r=[],t=0,i=n.length;i>t;++t)r[t]=n[t];return r});n.util.toArray=t}(),t(document,"addEventListener")?e=function(n,t,i){n.addEventListener(t,i,!1)}:t(document,"attachEvent")?e=function(n,t,i){n.attachEvent("on"+t,i)}:i("Document does not have required addEventListener or attachEvent method"),n.util.addListener=e,o=[],n.init=a,n.addInitListener=function(t){n.initialized?t(n):o.push(t)},s=[],n.addShimListener=function(n){s.push(n)},n.shim=n.createMissingNativeApi=ft,f.prototype={init:function(){for(var n,i,e=this.dependencies||[],t=0,u=e.length;u>t;++t){if(i=e[t],n=r[i],!(n&&n instanceof f))throw Error("required module '"+i+"' not found");if(n.init(),!n.supported)throw Error("required module '"+i+"' not supported");}this.initializer(this)},fail:function(n){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+n);},warn:function(t){n.warn("Module "+this.name+": "+t)},deprecationNotice:function(t,i){n.warn("DEPRECATED: "+t+" in module "+this.name+"is deprecated. Please use "+i+" instead")},createError:function(n){return Error("Error in Rangy "+this.name+" module: "+n)}},n.createModule=function(t){var i,r,u;2==arguments.length?(i=arguments[1],r=[]):(i=arguments[2],r=arguments[1]);u=tt(!1,t,r,i);n.initialized&&u.init()},n.createCoreModule=function(n,t,i){tt(!0,n,t,i)},n.RangePrototype=it,n.rangePrototype=new it,n.selectionPrototype=new et,v=!1,y=function(){v||(v=!0,!n.initialized&&n.config.autoInitialize&&a())},typeof window==h?(i("No window found"),void 0):typeof document==h?(i("No document found"),void 0):(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",y,!1),e(window,"load",y),n.createCoreModule("DomUtil",[],function(n,t){function rt(n){var t;return typeof n.namespaceURI==r||null===(t=n.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function ut(n){var t=n.parentNode;return 1==t.nodeType?t:null}function u(n){for(var t=0;n=n.previousSibling;)++t;return t}function ft(n){switch(n.nodeType){case 7:case 10:return 0;case 3:case 8:return n.length;default:return n.childNodes.length}}function y(n,t){for(var r=[],i=n;i;i=i.parentNode)r.push(i);for(i=t;i;i=i.parentNode)if(a(r,i))return i;return null}function p(n,t,i){for(var r=i?t:t.parentNode;r;){if(r===n)return!0;r=r.parentNode}return!1}function et(n,t){return p(n,t,!0)}function f(n,t,i){for(var u,r=i?n:n.parentNode;r;){if(u=r.parentNode,u===t)return r;r=u}return null}function w(n){var t=n.nodeType;return 3==t||4==t||8==t}function ot(n){if(!n)return!1;var t=n.nodeType;return 3==t||8==t}function b(n,t){var i=t.nextSibling,r=t.parentNode;return i?r.insertBefore(n,i):r.appendChild(n),n}function st(n,t,i){var e,r,f=n.cloneNode(!1);if(f.deleteData(0,t),n.deleteData(t,n.length-t),b(f,n),i)for(e=0;r=i[e++];)r.node==n&&r.offset>t?(r.node=f,r.offset-=t):r.node==n.parentNode&&r.offset>u(n)&&++r.offset;return f}function e(n){if(9==n.nodeType)return n;if(typeof n.ownerDocument!=r)return n.ownerDocument;if(typeof n.document!=r)return n.document;if(n.parentNode)return e(n.parentNode);throw t.createError("getDocument: no document found for node");}function k(n){var i=e(n);if(typeof i.defaultView!=r)return i.defaultView;if(typeof i.parentWindow!=r)return i.parentWindow;throw t.createError("Cannot get a window object for node");}function d(n){if(typeof n.contentDocument!=r)return n.contentDocument;if(typeof n.contentWindow!=r)return n.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element");}function ht(n){if(typeof n.contentWindow!=r)return n.contentWindow;if(typeof n.contentDocument!=r)return n.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element");}function g(n){return n&&i.isHostMethod(n,"setTimeout")&&i.isHostObject(n,"document")}function ct(n,t,r){var u;if(n?i.isHostProperty(n,"nodeType")?u=1==n.nodeType&&"iframe"==n.tagName.toLowerCase()?d(n):e(n):g(n)&&(u=n.document):u=document,!u)throw t.createError(r+"(): Parameter must be a Window object or DOM node");return u}function lt(n){for(var t;t=n.parentNode;)n=t;return n}function at(n,i,r,e){var h,o,c,l,s;if(n==r)return i===e?0:e>i?-1:1;if(h=f(r,n,!0))return i<=u(h)?-1:1;if(h=f(n,r,!0))return u(h)<e?-1:1;if(o=y(n,r),!o)throw Error("comparePoints error: nodes have no common ancestor");if(c=n===o?o:f(n,o,!0),l=r===o?o:f(r,o,!0),c===l)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(s=o.firstChild;s;){if(s===c)return-1;if(s===l)return 1;s=s.nextSibling}}function h(n){var t;try{return t=n.parentNode,!1}catch(i){return!0}}function nt(n){if(!n)return"[No node]";if(s&&h(n))return"[Broken node]";if(w(n))return'"'+n.data+'"';if(1==n.nodeType){var t=n.id?' id="'+n.id+'"':"";return"<"+n.nodeName+t+">[index:"+u(n)+",length:"+n.childNodes.length+"]["+(n.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return n.nodeName}function vt(n){for(var t,i=e(n).createDocumentFragment();t=n.firstChild;)i.appendChild(t);return i}function tt(n){this.root=n;this._next=n}function yt(n){return new tt(n)}function it(n,t){this.node=n;this.offset=t}function c(n){this.code=this[n];this.codeName=n;this.message="DOMException: "+this.codeName}var o,l,a,s,v,r="undefined",i=n.util;i.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method");i.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");o=document.createElement("div");i.areHostMethods(o,["insertBefore","appendChild","cloneNode"]||!i.areHostObjects(o,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation");i.isHostProperty(o,"innerHTML")||t.fail("Element is missing innerHTML property");l=document.createTextNode("test");i.areHostMethods(l,["splitText","deleteData","insertData","appendData","cloneNode"]||!i.areHostObjects(o,["previousSibling","nextSibling","childNodes","parentNode"])||!i.areHostProperties(l,["data"]))||t.fail("Incomplete Text Node implementation");a=function(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1};s=!1,function(){var i,t=document.createElement("b");t.innerHTML="1";i=t.firstChild;t.innerHTML="<br>";s=h(i);n.features.crashyTextNodes=s}();typeof getComputedStyle!=r?v=function(n,t){return k(n).getComputedStyle(n,null)[t]}:typeof document.documentElement.currentStyle!=r?v=function(n,t){return n.currentStyle[t]}:t.fail("No means of obtaining computed style properties found");tt.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,i,n=this._current=this._next;if(this._current)if(t=n.firstChild,t)this._next=t;else{for(i=null;n!==this.root&&!(i=n.nextSibling);)n=n.parentNode;this._next=i}return this._current},detach:function(){this._current=this._next=this.root=null}};it.prototype={equals:function(n){return!!n&&this.node===n.node&&this.offset==n.offset},inspect:function(){return"[DomPosition("+nt(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};c.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24};c.prototype.toString=function(){return this.message};n.dom={arrayContains:a,isHtmlNamespace:rt,parentElement:ut,getNodeIndex:u,getNodeLength:ft,getCommonAncestor:y,isAncestorOf:p,isOrIsAncestorOf:et,getClosestAncestorIn:f,isCharacterDataNode:w,isTextOrCommentNode:ot,insertAfter:b,splitDataNode:st,getDocument:e,getWindow:k,getIframeWindow:ht,getIframeDocument:d,getBody:i.getBody,isWindow:g,getContentDocument:ct,getRootContainer:lt,comparePoints:at,isBrokenNode:h,inspectNode:nt,getComputedStyleProperty:v,fragmentFromNodeChildren:vt,createIterator:yt,DomPosition:it};n.DOMException=c}),n.createCoreModule("DomRange",["DomUtil"],function(n){function l(n,t){return 3!=n.nodeType&&(y(n,t.startContainer)||y(n,t.endContainer))}function e(n){return n.document||it(n.startContainer)}function gt(n){return new rr(n.parentNode,c(n))}function rt(n){return new rr(n.parentNode,c(n)+1)}function ni(n,i,u){var f=11==n.nodeType?n.firstChild:n;return r(i)?u==i.length?t.insertAfter(n,i):i.parentNode.insertBefore(n,0==u?i:wt(i,u)):u>=i.childNodes.length?i.appendChild(n):i.insertBefore(n,i.childNodes[u]),f}function ti(n,t,r){if(i(n),i(t),e(t)!=e(n))throw new f("WRONG_DOCUMENT_ERR");var o=u(n.startContainer,n.startOffset,t.endContainer,t.endOffset),s=u(n.endContainer,n.endOffset,t.startContainer,t.startOffset);return r?0>=o&&s>=0:0>o&&s>0}function ii(n){for(var i,t,u,r=e(n.range).createDocumentFragment();t=n.next();){if(i=n.isPartiallySelectedSubtree(),t=t.cloneNode(!i),i&&(u=n.getSubtreeIterator(),t.appendChild(ii(u)),u.detach()),10==t.nodeType)throw new f("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function w(n,i,r){var e,o,u,f;for(r=r||{stop:!1};u=n.next();)if(n.isPartiallySelectedSubtree()){if(i(u)===!1)return r.stop=!0,void 0;if(f=n.getSubtreeIterator(),w(f,i,r),f.detach(),r.stop)return}else for(e=t.createIterator(u);o=e.next();)if(i(o)===!1)return r.stop=!0,void 0}function ri(n){for(var t;n.next();)n.isPartiallySelectedSubtree()?(t=n.getSubtreeIterator(),ri(t),t.detach()):n.remove()}function ui(n){for(var t,i,r=e(n.range).createDocumentFragment();t=n.next();){if(n.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=n.getSubtreeIterator(),t.appendChild(ui(i)),i.detach()):n.remove(),10==t.nodeType)throw new f("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function ur(n,t,i){var f,u,e=!(!t||!t.length),s=!!i;return e&&(f=RegExp("^("+t.join("|")+")$")),u=[],w(new o(n,!1),function(t){var o,h;(!e||f.test(t.nodeType))&&(!s||i(t))&&(o=n.startContainer,t==o&&r(o)&&n.startOffset==o.length||(h=n.endContainer,t==h&&r(h)&&0==n.endOffset||u.push(t)))}),u}function fi(n){var i=void 0===n.getName?"Range":n.getName();return"["+i+"("+t.inspectNode(n.startContainer)+":"+n.startOffset+", "+t.inspectNode(n.endContainer)+":"+n.endOffset+")]"}function o(n,t){if(this.range=n,this.clonePartiallySelectedTextNodes=t,!n.collapsed){this.sc=n.startContainer;this.so=n.startOffset;this.ec=n.endContainer;this.eo=n.endOffset;var i=n.commonAncestorContainer;this.sc===this.ec&&r(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==i||r(this.sc)?bt(this.sc,i,!0):this.sc.childNodes[this.so],this._last=this.ec!==i||r(this.ec)?bt(this.ec,i,!0):this.ec.childNodes[this.eo-1])}}function ut(n){return function(t,i){for(var u,r=i?t:t.parentNode;r;){if(u=r.nodeType,dt(n,u))return r;r=r.parentNode}return null}}function a(n,t){if(nr(n,t))throw new f("INVALID_NODE_TYPE_ERR");}function v(n,t){if(!dt(t,n.nodeType))throw new f("INVALID_NODE_TYPE_ERR");}function ft(n,t){if(0>t||t>(r(n)?n.length:n.childNodes.length))throw new f("INDEX_SIZE_ERR");}function et(n,t){if(k(n,!0)!==k(t,!0))throw new f("WRONG_DOCUMENT_ERR");}function s(n){if(gi(n,!0))throw new f("NO_MODIFICATION_ALLOWED_ERR");}function b(n,t){if(!n)throw new f(t);}function ei(n){return fr&&t.isBrokenNode(n)||!dt(st,n.nodeType)&&!k(n,!0)}function oi(n,t){return t<=(r(n)?n.length:n.childNodes.length)}function si(n){return!!n.startContainer&&!!n.endContainer&&!ei(n.startContainer)&&!ei(n.endContainer)&&oi(n.startContainer,n.startOffset)&&oi(n.endContainer,n.endOffset)}function i(n){if(!si(n))throw Error("Range error: Range is no longer valid after DOM mutation ("+n.inspect()+")");}function hi(n,t){var u,o,f,e,s;i(n);u=n.startContainer;o=n.startOffset;f=n.endContainer;e=n.endOffset;s=u===f;r(f)&&e>0&&e<f.length&&wt(f,e,t);r(u)&&o>0&&o<u.length&&(u=wt(u,o,t),s?(e-=o,f=u):f==u.parentNode&&e>=c(u)&&e++,o=0);n.setStartAndEnd(u,o,f,e)}function ci(n){i(n);var t=n.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(n.cloneContents()),t.innerHTML}function li(n){n.START_TO_START=nt;n.START_TO_END=ct;n.END_TO_END=ir;n.END_TO_START=lt;n.NODE_BEFORE=at;n.NODE_AFTER=vt;n.NODE_BEFORE_AND_AFTER=yt;n.NODE_INSIDE=tt}function ai(n){li(n);li(n.prototype)}function vi(n,t){return function(){var r,f,e,u,c,h,l;return i(this),r=this.startContainer,f=this.startOffset,e=this.commonAncestorContainer,u=new o(this,!0),r!==e&&(c=bt(r,e,!0),h=rt(c),r=h.node,f=h.offset),w(u,s),u.reset(),l=n(u),u.detach(),t(this,r,f,r,f),l}}function yi(t,f){function e(n,t){return function(i){v(i,ot);v(p(i),st);var r=(n?gt:rt)(i);(t?h:y)(this,r.node,r.offset)}}function h(n,t,i){var r=n.endContainer,e=n.endOffset;(t!==n.startContainer||i!==n.startOffset)&&((p(t)!=p(r)||1==u(t,i,r,e))&&(r=t,e=i),f(n,t,i,r,e))}function y(n,t,i){var r=n.startContainer,e=n.startOffset;(t!==n.endContainer||i!==n.endOffset)&&((p(t)!=p(r)||-1==u(t,i,r,e))&&(r=t,e=i),f(n,r,e,t,i))}var w=function(){};w.prototype=n.rangePrototype;t.prototype=new w;pt.extend(t.prototype,{setStart:function(n,t){a(n,!0);ft(n,t);h(this,n,t)},setEnd:function(n,t){a(n,!0);ft(n,t);y(this,n,t)},setStartAndEnd:function(){var n=arguments,i=n[0],r=n[1],u=i,t=r;switch(n.length){case 3:t=n[2];break;case 4:u=n[2];t=n[3]}f(this,i,r,u,t)},setBoundary:function(n,t,i){this["set"+(i?"Start":"End")](n,t)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(n){i(this);n?f(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):f(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(n){a(n,!0);f(this,n,0,n,kt(n))},selectNode:function(n){a(n,!1);v(n,ot);var t=gt(n),i=rt(n);f(this,t.node,t.offset,i.node,i.offset)},extractContents:vi(ui,f),deleteContents:vi(ri,f),canSurroundContents:function(){var n,t;return i(this),s(this.startContainer),s(this.endContainer),n=new o(this,!0),t=n._first&&l(n._first,this)||n._last&&l(n._last,this),n.detach(),!t},splitBoundaries:function(){hi(this)},splitBoundariesPreservingPositions:function(n){hi(this,n)},normalizeBoundaries:function(){var u,e,n,t,h,l,a,o,s;i(this);u=this.startContainer;e=this.startOffset;n=this.endContainer;t=this.endOffset;h=function(i){var r=i.nextSibling;r&&r.nodeType==i.nodeType&&(n=i,t=i.length,i.appendData(r.data),r.parentNode.removeChild(r))};l=function(i){var o,f,r=i.previousSibling;r&&r.nodeType==i.nodeType&&(u=i,o=i.length,e=r.length,i.insertData(0,r.data),r.parentNode.removeChild(r),u==n?(t+=e,n=u):n==i.parentNode&&(f=c(i),t==f?(n=i,t=o):t>f&&t--))};a=!0;r(n)?n.length==t&&h(n):(t>0&&(o=n.childNodes[t-1],o&&r(o)&&h(o)),a=!this.collapsed);a?r(u)?0==e&&l(u):e<u.childNodes.length&&(s=u.childNodes[e],s&&r(s)&&l(s)):(u=n,e=t);f(this,u,e,n,t)},collapseToPoint:function(n,t){a(n,!0);ft(n,t);this.setStartAndEnd(n,t)}});ai(t)}function pi(n){n.collapsed=n.startContainer===n.endContainer&&n.startOffset===n.endOffset;n.commonAncestorContainer=n.collapsed?n.startContainer:t.getCommonAncestor(n.startContainer,n.endContainer)}function wi(n,i,r,u,f){n.startContainer=i;n.startOffset=r;n.endContainer=u;n.endOffset=f;n.document=t.getDocument(i);pi(n)}function h(n){this.startContainer=n;this.startOffset=0;this.endContainer=n;this.endOffset=0;this.document=n;pi(this)}var ot,st,bi,ki,di,k,gi,nr,ht,d,tr,g,nt,ct,ir,lt,at,vt,yt,tt,t=n.dom,pt=n.util,rr=t.DomPosition,f=n.DOMException,r=t.isCharacterDataNode,c=t.getNodeIndex,y=t.isOrIsAncestorOf,it=t.getDocument,u=t.comparePoints,wt=t.splitDataNode,bt=t.getClosestAncestorIn,kt=t.getNodeLength,dt=t.arrayContains,p=t.getRootContainer,fr=n.features.crashyTextNodes;o.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var n=this._current=this._next;return n&&(this._next=n!==this._last?n.nextSibling:null,r(n)&&this.clonePartiallySelectedTextNodes&&(n===this.ec&&(n=n.cloneNode(!0)).deleteData(this.eo,n.length-this.eo),this._current===this.sc&&(n=n.cloneNode(!0)).deleteData(0,this.so))),n},remove:function(){var t,i,n=this._current;!r(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(t=n===this.sc?this.so:0,i=n===this.ec?this.eo:n.length,t!=i&&n.deleteData(t,i-t))},isPartiallySelectedSubtree:function(){var n=this._current;return l(n,this.range)},getSubtreeIterator:function(){var t,n,i,r,u,f;return this.isSingleCharacterDataNode?(t=this.range.cloneRange(),t.collapse(!1)):(t=new h(e(this.range)),n=this._current,i=n,r=0,u=n,f=kt(n),y(n,this.sc)&&(i=this.sc,r=this.so),y(n,this.ec)&&(u=this.ec,f=this.eo),wi(t,i,r,u,f)),new o(t,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};ot=[1,3,4,5,7,8,10];st=[2,9,11];bi=[5,6,10,12];ki=[1,3,4,5,7,8,10,11];di=[1,3,4,5,7,8];k=ut([9,11]);gi=ut(bi);nr=ut([6,10,12]);ht=document.createElement("style");d=!1;try{ht.innerHTML="<b>x<\/b>";d=3==ht.firstChild.nodeType}catch(er){}n.features.htmlParsingConforms=d;tr=d?function(n){var i,u=this.startContainer,e=it(u);if(!u)throw new f("INVALID_STATE_ERR");return i=null,1==u.nodeType?i=u:r(u)&&(i=t.parentElement(u)),i=null===i||"HTML"==i.nodeName&&t.isHtmlNamespace(it(i).documentElement)&&t.isHtmlNamespace(i)?e.createElement("body"):i.cloneNode(!1),i.innerHTML=n,t.fragmentFromNodeChildren(i)}:function(n){var r=e(this),i=r.createElement("body");return i.innerHTML=n,t.fragmentFromNodeChildren(i)};g=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];nt=0;ct=1;ir=2;lt=3;at=0;vt=1;yt=2;tt=3;pt.extend(n.rangePrototype,{compareBoundaryPoints:function(n,t){var e,o,s,h,r,f;return i(this),et(this.startContainer,t.startContainer),r=n==lt||n==nt?"start":"end",f=n==ct||n==nt?"start":"end",e=this[r+"Container"],o=this[r+"Offset"],s=t[f+"Container"],h=t[f+"Offset"],u(e,o,s,h)},insertNode:function(n){if(i(this),v(n,ki),s(this.startContainer),y(n,this.startContainer))throw new f("HIERARCHY_REQUEST_ERR");var t=ni(n,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var n,t,u;return i(this),this.collapsed?e(this).createDocumentFragment():this.startContainer===this.endContainer&&r(this.startContainer)?(n=this.startContainer.cloneNode(!0),n.data=n.data.slice(this.startOffset,this.endOffset),t=e(this).createDocumentFragment(),t.appendChild(n),t):(u=new o(this,!0),n=ii(u),u.detach(),n)},canSurroundContents:function(){var n,t;return i(this),s(this.startContainer),s(this.endContainer),n=new o(this,!0),t=n._first&&l(n._first,this)||n._last&&l(n._last,this),n.detach(),!t},surroundContents:function(n){if(v(n,di),!this.canSurroundContents())throw new f("INVALID_STATE_ERR");var t=this.extractContents();if(n.hasChildNodes())for(;n.lastChild;)n.removeChild(n.lastChild);ni(n,this.startContainer,this.startOffset);n.appendChild(t);this.selectNode(n)},cloneRange:function(){var n,t,r;for(i(this),n=new h(e(this)),t=g.length;t--;)r=g[t],n[r]=this[r];return n},toString:function(){var n,t,u;return i(this),n=this.startContainer,n===this.endContainer&&r(n)?3==n.nodeType||4==n.nodeType?n.data.slice(this.startOffset,this.endOffset):"":(t=[],u=new o(this,!0),w(u,function(n){(3==n.nodeType||4==n.nodeType)&&t.push(n.data)}),u.detach(),t.join(""))},compareNode:function(n){var t,r,e,u;if(i(this),t=n.parentNode,r=c(n),!t)throw new f("NOT_FOUND_ERR");return e=this.comparePoint(t,r),u=this.comparePoint(t,r+1),0>e?u>0?yt:at:u>0?vt:tt},comparePoint:function(n,t){return i(this),b(n,"HIERARCHY_REQUEST_ERR"),et(n,this.startContainer),u(n,t,this.startContainer,this.startOffset)<0?-1:u(n,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:tr,toHtml:function(){return ci(this)},intersectsNode:function(n,t){var r,f,o,s;return i(this),b(n,"NOT_FOUND_ERR"),it(n)!==e(this)?!1:(r=n.parentNode,f=c(n),b(r,"NOT_FOUND_ERR"),o=u(r,f,this.endContainer,this.endOffset),s=u(r,f+1,this.startContainer,this.startOffset),t?0>=o&&s>=0:0>o&&s>0)},isPointInRange:function(n,t){return i(this),b(n,"HIERARCHY_REQUEST_ERR"),et(n,this.startContainer),u(n,t,this.startContainer,this.startOffset)>=0&&u(n,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(n){return ti(this,n,!1)},intersectsOrTouchesRange:function(n){return ti(this,n,!0)},intersection:function(n){var i,r,t;return this.intersectsRange(n)?(i=u(this.startContainer,this.startOffset,n.startContainer,n.startOffset),r=u(this.endContainer,this.endOffset,n.endContainer,n.endOffset),t=this.cloneRange(),-1==i&&t.setStart(n.startContainer,n.startOffset),1==r&&t.setEnd(n.endContainer,n.endOffset),t):null},union:function(n){if(this.intersectsOrTouchesRange(n)){var t=this.cloneRange();return-1==u(n.startContainer,n.startOffset,this.startContainer,this.startOffset)&&t.setStart(n.startContainer,n.startOffset),1==u(n.endContainer,n.endOffset,this.endContainer,this.endOffset)&&t.setEnd(n.endContainer,n.endOffset),t}throw new f("Ranges do not intersect");},containsNode:function(n,t){return t?this.intersectsNode(n,!1):this.compareNode(n)==tt},containsNodeContents:function(n){return this.comparePoint(n,0)>=0&&this.comparePoint(n,kt(n))<=0},containsRange:function(n){var t=this.intersection(n);return null!==t&&n.equals(t)},containsNodeText:function(n){var i,r,t=this.cloneRange();return t.selectNode(n),i=t.getNodes([3]),i.length>0?(t.setStart(i[0],0),r=i.pop(),t.setEnd(r,r.length),this.containsRange(t)):this.containsNodeContents(n)},getNodes:function(n,t){return i(this),ur(this,n,t)},getDocument:function(){return e(this)},collapseBefore:function(n){this.setEndBefore(n);this.collapse(!1)},collapseAfter:function(n){this.setStartAfter(n);this.collapse(!0)},getBookmark:function(i){var r,u,o,s=e(this),f=n.createRange(s);return i=i||t.getBody(s),f.selectNodeContents(i),r=this.intersection(f),u=0,o=0,r&&(f.setEnd(r.startContainer,r.startOffset),u=(""+f).length,o=u+(""+r).length),{start:u,end:o,containerNode:i}},moveToBookmark:function(n){var f,t,r,e,u,o,s,h=n.containerNode,i=0;for(this.setStart(h,0),this.collapse(!0),f=[h],r=!1,e=!1;!e&&(t=f.pop());)if(3==t.nodeType)u=i+t.length,!r&&n.start>=i&&n.start<=u&&(this.setStart(t,n.start-i),r=!0),r&&n.end>=i&&n.end<=u&&(this.setEnd(t,n.end-i),e=!0),i=u;else for(s=t.childNodes,o=s.length;o--;)f.push(s[o])},getName:function(){return"DomRange"},equals:function(n){return h.rangesEqual(this,n)},isValid:function(){return si(this)},inspect:function(){return fi(this)},detach:function(){}});yi(h,wi);pt.extend(h,{rangeProperties:g,RangeIterator:o,copyComparisonConstants:ai,createPrototypeRange:yi,inspect:fi,toHtml:ci,getRangeDocument:e,rangesEqual:function(n,t){return n.startContainer===t.startContainer&&n.startOffset===t.startOffset&&n.endContainer===t.endContainer&&n.endOffset===t.endOffset}});n.DomRange=h}),n.createCoreModule("WrappedRange",["DomRange"],function(n,t){var o,r,y,p,s,h,a,v,i=n.dom,w=n.util,u=i.DomPosition,f=n.DomRange,e=i.getBody,c=i.getContentDocument,l=i.isCharacterDataNode;n.features.implementsDomRange&&!function(){function s(n){for(var t,i=b.length;i--;)t=b[i],n[t]=n.nativeRange[t];n.collapsed=n.startContainer===n.endContainer&&n.startOffset===n.endOffset}function k(n,t,i,r,u){var f=n.startContainer!==t||n.startOffset!=i,e=n.endContainer!==r||n.endOffset!=u,o=!n.equals(n.nativeRange);(f||e||o)&&(n.setEnd(r,u),n.setStart(t,i))}var r,l,h,u,a,v,y,p,b=f.rangeProperties;o=function(n){if(!n)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=n;s(this)};f.createPrototypeRange(o,k);r=o.prototype;r.selectNode=function(n){this.nativeRange.selectNode(n);s(this)};r.cloneContents=function(){return this.nativeRange.cloneContents()};r.surroundContents=function(n){this.nativeRange.surroundContents(n);s(this)};r.collapse=function(n){this.nativeRange.collapse(n);s(this)};r.cloneRange=function(){return new o(this.nativeRange.cloneRange())};r.refresh=function(){s(this)};r.toString=function(){return""+this.nativeRange};h=document.createTextNode("test");e(document).appendChild(h);u=document.createRange();u.setStart(h,0);u.setEnd(h,0);try{u.setStart(h,1);r.setStart=function(n,t){this.nativeRange.setStart(n,t);s(this)};r.setEnd=function(n,t){this.nativeRange.setEnd(n,t);s(this)};l=function(n){return function(t){this.nativeRange[n](t);s(this)}}}catch(d){r.setStart=function(n,t){try{this.nativeRange.setStart(n,t)}catch(i){this.nativeRange.setEnd(n,t);this.nativeRange.setStart(n,t)}s(this)};r.setEnd=function(n,t){try{this.nativeRange.setEnd(n,t)}catch(i){this.nativeRange.setStart(n,t);this.nativeRange.setEnd(n,t)}s(this)};l=function(n,t){return function(i){try{this.nativeRange[n](i)}catch(r){this.nativeRange[t](i);this.nativeRange[n](i)}s(this)}}}r.setStartBefore=l("setStartBefore","setEndBefore");r.setStartAfter=l("setStartAfter","setEndAfter");r.setEndBefore=l("setEndBefore","setStartBefore");r.setEndAfter=l("setEndAfter","setStartAfter");r.selectNodeContents=function(n){this.setStartAndEnd(n,0,i.getNodeLength(n))};u.selectNodeContents(h);u.setEnd(h,3);a=document.createRange();a.selectNodeContents(h);a.setEnd(h,4);a.setStart(h,2);r.compareBoundaryPoints=-1==u.compareBoundaryPoints(u.START_TO_END,a)&&1==u.compareBoundaryPoints(u.END_TO_START,a)?function(n,t){return t=t.nativeRange||t,n==t.START_TO_END?n=t.END_TO_START:n==t.END_TO_START&&(n=t.START_TO_END),this.nativeRange.compareBoundaryPoints(n,t)}:function(n,t){return this.nativeRange.compareBoundaryPoints(n,t.nativeRange||t)};v=document.createElement("div");v.innerHTML="123";y=v.firstChild;p=e(document);p.appendChild(v);u.setStart(y,1);u.setEnd(y,2);u.deleteContents();"13"==y.data&&(r.deleteContents=function(){this.nativeRange.deleteContents();s(this)},r.extractContents=function(){var n=this.nativeRange.extractContents();return s(this),n});p.removeChild(v);p=null;w.isHostMethod(u,"createContextualFragment")&&(r.createContextualFragment=function(n){return this.nativeRange.createContextualFragment(n)});e(document).removeChild(h);r.getName=function(){return"WrappedRange"};n.WrappedRange=o;n.createNativeRange=function(n){return n=c(n,t,"createNativeRange"),n.createRange()}}();n.features.implementsTextRange&&(y=function(n){var r,f,u,e=n.parentElement(),t=n.duplicate();return t.collapse(!0),r=t.parentElement(),t=n.duplicate(),t.collapse(!1),f=t.parentElement(),u=r==f?r:i.getCommonAncestor(r,f),u==e?u:i.getCommonAncestor(e,u)},p=function(n){return 0==n.compareEndPoints("StartToEnd",n)},s=function(n,t,r,f,e){var o,k,s,p,it,w,d,nt,b,h,tt,c,a,g,y,rt,v=n.duplicate();if(v.collapse(r),o=v.parentElement(),i.isOrIsAncestorOf(t,o)||(o=t),!o.canHaveHTML)return k=new u(o.parentNode,i.getNodeIndex(o)),{boundaryPosition:k,nodeInfo:{nodeIndex:k.offset,containerElement:k.node}};for(s=i.getDocument(o).createElement("span"),s.parentNode&&s.parentNode.removeChild(s),it=r?"StartToStart":"StartToEnd",h=e&&e.containerElement==o?e.nodeIndex:0,tt=o.childNodes.length,c=tt,a=c;;){if(a==tt?o.appendChild(s):o.insertBefore(s,o.childNodes[a]),v.moveToElementText(s),p=v.compareEndPoints(it,n),0==p||h==c)break;if(-1==p){if(c==h+1)break;h=a}else c=c==h+1?h:a;a=Math.floor((h+c)/2);o.removeChild(s)}if(b=s.nextSibling,-1==p&&b&&l(b)){if(v.setEndPoint(r?"EndToStart":"EndToEnd",n),/[\r\n]/.test(b.data))for(y=v.duplicate(),rt=y.text.replace(/\r\n/g,"\r").length,g=y.moveStart("character",rt);-1==(p=y.compareEndPoints("StartToEnd",y));)g++,y.moveStart("character",1);else g=v.text.length;nt=new u(b,g)}else w=(f||!r)&&s.previousSibling,d=(f||r)&&s.nextSibling,nt=d&&l(d)?new u(d,0):w&&l(w)?new u(w,w.data.length):new u(o,i.getNodeIndex(s));return s.parentNode.removeChild(s),{boundaryPosition:nt,nodeInfo:{nodeIndex:a,containerElement:o}}},h=function(n,t){var u,f,r,s,h=n.offset,c=i.getDocument(n.node),o=e(c).createTextRange(),a=l(n.node);return a?(u=n.node,f=u.parentNode):(s=n.node.childNodes,u=h<s.length?s[h]:null,f=n.node),r=c.createElement("span"),r.innerHTML="&#feff;",u?f.insertBefore(r,u):f.appendChild(r),o.moveToElementText(r),o.collapse(!t),f.removeChild(r),a&&o[t?"moveStart":"moveEnd"]("character",h),o},r=function(n){this.textRange=n;this.refresh()},r.prototype=new f(document),r.prototype.refresh=function(){var n,t,i,r=y(this.textRange);p(this.textRange)?t=n=s(this.textRange,r,!0,!0).boundaryPosition:(i=s(this.textRange,r,!0,!1),n=i.boundaryPosition,t=s(this.textRange,r,!1,!1,i.nodeInfo).boundaryPosition);this.setStart(n.node,n.offset);this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},f.copyComparisonConstants(r),a=function(n){var i,r,t;return n.collapsed?h(new u(n.startContainer,n.startOffset),!0):(i=h(new u(n.startContainer,n.startOffset),!0),r=h(new u(n.endContainer,n.endOffset),!1),t=e(f.getRangeDocument(n)).createTextRange(),t.setEndPoint("StartToStart",i),t.setEndPoint("EndToEnd",r),t)},r.rangeToTextRange=a,r.prototype.toTextRange=function(){return a(this)},n.WrappedTextRange=r,(!n.features.implementsDomRange||n.config.preferTextRange)&&(v=function(){return this}(),void 0===v.Range&&(v.Range=r),n.createNativeRange=function(n){return n=c(n,t,"createNativeRange"),e(n).createTextRange()},n.WrappedRange=r));n.createRange=function(i){return i=c(i,t,"createRange"),new n.WrappedRange(n.createNativeRange(i))};n.createRangyRange=function(n){return n=c(n,t,"createRangyRange"),new f(n)};n.createIframeRange=function(i){return t.deprecationNotice("createIframeRange()","createRange(iframeEl)"),n.createRange(i)};n.createIframeRangyRange=function(i){return t.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)"),n.createRangyRange(i)};n.addShimListener(function(t){var i=t.document;void 0===i.createRange&&(i.createRange=function(){return n.createRange(i)});i=t=null})}),n.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(n,t){function wt(n){return"string"==typeof n?/^backward(s)?$/i.test(n):!!n}function ft(n,i){if(n){if(f.isWindow(n))return n;if(n instanceof o)return n.win;var r=f.getContentDocument(n,t,i);return f.getWindow(r)}return window}function bi(n){return ft(n,"getWinSelection").getSelection()}function oi(n){return ft(n,"getDocSelection").document.selection}function si(n){var t=!1;return n.anchorNode&&(t=1==f.comparePoints(n.anchorNode,n.anchorOffset,n.focusNode,n.focusOffset)),t}function d(n,t,i){var r=i?"end":"start",u=i?"start":"end";n.anchorNode=t[r+"Container"];n.anchorOffset=t[r+"Offset"];n.focusNode=t[u+"Container"];n.focusOffset=t[u+"Offset"]}function ki(n){var t=n.nativeSelection;n.anchorNode=t.anchorNode;n.anchorOffset=t.anchorOffset;n.focusNode=t.focusNode;n.focusOffset=t.focusOffset}function v(n){n.anchorNode=n.focusNode=null;n.anchorOffset=n.focusOffset=0;n.rangeCount=0;n.isCollapsed=!0;n._ranges.length=0}function bt(t){var i;return t instanceof w?(i=n.createNativeRange(t.getDocument()),i.setEnd(t.endContainer,t.endOffset),i.setStart(t.startContainer,t.startOffset)):t instanceof ot?i=t.nativeRange:r.implementsDomRange&&t instanceof f.getWindow(t.startContainer).Range&&(i=t),i}function di(n){if(!n.length||1!=n[0].nodeType)return!1;for(var t=1,i=n.length;i>t;++t)if(!f.isAncestorOf(n[0],n[t]))return!1;return!0}function kt(n){var i=n.getNodes();if(!di(i))throw t.createError("getSingleElementFromRange: range "+n.inspect()+" did not consist of a single element");return i[0]}function dt(n){return!!n&&void 0!==n.text}function hi(n,t){var i=new ot(t);n._ranges=[i];d(n,i,!1);n.rangeCount=1;n.isCollapsed=i.collapsed}function g(t){var i,u,f,r;if(t._ranges.length=0,"None"==t.docSelection.type)v(t);else if(i=t.docSelection.createRange(),dt(i))hi(t,i);else{for(t.rangeCount=i.length,f=e(i.item(0)),r=0;r<t.rangeCount;++r)u=n.createRange(f),u.selectNode(i.item(r)),t._ranges.push(u);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed;d(t,t._ranges[t.rangeCount-1],!1)}}function ci(n,i){for(var u=n.docSelection.createRange(),s=kt(i),h=e(u.item(0)),f=a(h).createControlRange(),r=0,o=u.length;o>r;++r)f.add(u.item(r));try{f.add(s)}catch(c){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}f.select();g(n)}function o(n,t,i){this.nativeSelection=n;this.docSelection=t;this._ranges=[];this.win=i;this.refresh()}function li(n){n.win=n.anchorNode=n.focusNode=n._ranges=null;n.rangeCount=n.anchorOffset=n.focusOffset=0;n.detached=!0}function gt(n,t){for(var i,r,u=k.length;u--;)if(i=k[u],r=i.selection,"deleteAll"==t)li(r);else if(i.win==n)return"delete"==t?(k.splice(u,1),!0):r;return"deleteAll"==t&&(k.length=0),null}function ai(n,i){for(var u,s=e(i[0].startContainer),o=a(s).createControlRange(),r=0,f=i.length;f>r;++r){u=kt(i[r]);try{o.add(u)}catch(h){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)");}}o.select();g(n)}function vi(n,t){if(n.win.document!=e(t))throw new nt("WRONG_DOCUMENT_ERR");}function yi(t){return function(i,r){var u;this.rangeCount?(u=this.getRangeAt(0),u["set"+(t?"Start":"End")](i,r)):(u=n.createRange(this.win.document),u.setStartAndEnd(i,r));this.setSingleRange(u,this.isBackward())}}function pi(n){var t,i,r=[],u=new ti(n.anchorNode,n.anchorOffset),f=new ti(n.focusNode,n.focusOffset),e="function"==typeof n.getName?n.getName():"Selection";if(void 0!==n.rangeCount)for(t=0,i=n.rangeCount;i>t;++t)r[t]=w.inspect(n.getRangeAt(t));return"["+e+"(Ranges: "+r.join(", ")+")(anchor: "+u.inspect()+", focus: "+f.inspect()+"]"}var ni,et,f,y,c,w,ot,nt,ti,tt,st,r,l,e,a,ht,ct,s,b,u,ii,lt,p,it,ri,rt,ui,at,h,wi,vt,k,yt,i,fi,pt,ei,ut;if(n.config.checkSelectionRanges=!0,ni="boolean",et="number",f=n.dom,y=n.util,c=y.isHostMethod,w=n.DomRange,ot=n.WrappedRange,nt=n.DOMException,ti=f.DomPosition,r=n.features,l="Control",e=f.getDocument,a=f.getBody,ht=w.rangesEqual,ct=c(window,"getSelection"),s=y.isHostObject(document,"selection"),r.implementsWinGetSelection=ct,r.implementsDocSelection=s,b=s&&(!ct||n.config.preferTextRange),b?(tt=oi,n.isSelectionValid=function(n){var t=ft(n,"isSelectionValid").document,i=t.selection;return"None"!=i.type||e(i.createRange().parentElement())==t}):ct?(tt=bi,n.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),n.getNativeSelection=tt,u=tt(),ii=n.createNativeRange(document),lt=a(document),p=y.areHostProperties(u,["anchorNode","focusNode","anchorOffset","focusOffset"]),r.selectionHasAnchorAndFocus=p,it=c(u,"extend"),r.selectionHasExtend=it,ri=typeof u.rangeCount==et,r.selectionHasRangeCount=ri,rt=!1,ui=!0,at=it?function(t,i){var u=w.getRangeDocument(i),r=n.createRange(u);r.collapseToPoint(i.endContainer,i.endOffset);t.addRange(bt(r));t.extend(i.startContainer,i.startOffset)}:null,y.areHostMethods(u,["addRange","getRangeAt","removeAllRanges"])&&typeof u.rangeCount==et&&r.implementsDomRange&&!function(){var e,l,u,v,i,h,o,f,r,c,s,t=window.getSelection();if(t){for(e=t.rangeCount,l=e>1,u=[],v=si(t),i=0;e>i;++i)u[i]=t.getRangeAt(i);for(h=a(document),o=h.appendChild(document.createElement("div")),o.contentEditable="false",f=o.appendChild(document.createTextNode("   ")),r=document.createRange(),r.setStart(f,1),r.collapse(!0),t.addRange(r),ui=1==t.rangeCount,t.removeAllRanges(),l||(c=window.navigator.appVersion.match(/Chrome\/(.*?) /),c&&parseInt(c[1])>=36?rt=!1:(s=r.cloneRange(),r.setStart(f,0),s.setEnd(f,3),s.setStart(f,2),t.addRange(r),t.addRange(s),rt=2==t.rangeCount)),h.removeChild(o),t.removeAllRanges(),i=0;e>i;++i)0==i&&v?at?at(t,u[i]):(n.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(u[i])):t.addRange(u[i])}}(),r.selectionSupportsMultipleRanges=rt,r.collapsedNonEditableSelectionsSupported=ui,h=!1,lt&&c(lt,"createControlRange")&&(wi=lt.createControlRange(),y.areHostProperties(wi,["item","add"])&&(h=!0)),r.implementsControlRange=h,st=p?function(n){return n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset}:function(n){return n.rangeCount?n.getRangeAt(n.rangeCount-1).collapsed:!1},c(u,"getRangeAt")?vt=function(n,t){try{return n.getRangeAt(t)}catch(i){return null}}:p&&(vt=function(t){var r=e(t.anchorNode),i=n.createRange(r);return i.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),i}),o.prototype=n.selectionPrototype,k=[],yt=function(n){var t,i,r;return n&&n instanceof o?(n.refresh(),n):(n=ft(n,"getNativeSelection"),t=gt(n),i=tt(n),r=s?oi(n):null,t?(t.nativeSelection=i,t.docSelection=r,t.refresh()):(t=new o(i,r,n),k.push({win:n,selection:t})),t)},n.getSelection=yt,n.getIframeSelection=function(i){return t.deprecationNotice("getIframeSelection()","getSelection(iframeEl)"),n.getSelection(f.getIframeWindow(i))},i=o.prototype,!b&&p&&y.areHostMethods(u,["removeAllRanges","addRange"]))i.removeAllRanges=function(){this.nativeSelection.removeAllRanges();v(this)},fi=function(n,t){at(n.nativeSelection,t);n.refresh()},i.addRange=ri?function(t,i){var u,r;h&&s&&this.docSelection.type==l?ci(this,t):wt(i)&&it?fi(this,t):(rt?u=this.rangeCount:(this.removeAllRanges(),u=0),this.nativeSelection.addRange(bt(t).cloneRange()),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==u+1?(n.config.checkSelectionRanges&&(r=vt(this.nativeSelection,this.rangeCount-1),r&&!ht(r,t)&&(t=new ot(r))),this._ranges[this.rangeCount-1]=t,d(this,t,ut(this.nativeSelection)),this.isCollapsed=st(this)):this.refresh())}:function(n,t){wt(t)&&it?fi(this,n):(this.nativeSelection.addRange(bt(n)),this.refresh())},i.setRanges=function(n){if(h&&s&&n.length>1)ai(this,n);else{this.removeAllRanges();for(var t=0,i=n.length;i>t;++t)this.addRange(n[t])}};else{if(!(c(u,"empty")&&c(ii,"select")&&h&&b))return t.fail("No means of selecting a Range or TextRange was found"),!1;i.removeAllRanges=function(){var n,t,i;try{this.docSelection.empty();"None"!=this.docSelection.type&&(this.anchorNode?n=e(this.anchorNode):this.docSelection.type==l&&(t=this.docSelection.createRange(),t.length&&(n=e(t.item(0)))),n&&(i=a(n).createTextRange(),i.select(),this.docSelection.empty()))}catch(r){}v(this)};i.addRange=function(t){this.docSelection.type==l?ci(this,t):(n.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,d(this,t,!1))};i.setRanges=function(n){this.removeAllRanges();var t=n.length;t>1?ai(this,n):t&&this.addRange(n[0])}}if(i.getRangeAt=function(n){if(0>n||n>=this.rangeCount)throw new nt("INDEX_SIZE_ERR");return this._ranges[n].cloneRange()},b)pt=function(t){var i;n.isSelectionValid(t.win)?i=t.docSelection.createRange():(i=a(t.win.document).createTextRange(),i.collapse(!0));t.docSelection.type==l?g(t):dt(i)?hi(t,i):v(t)};else if(c(u,"getRangeAt")&&typeof u.rangeCount==et)pt=function(t){if(h&&s&&t.docSelection.type==l)g(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var i=0,r=t.rangeCount;r>i;++i)t._ranges[i]=new n.WrappedRange(t.nativeSelection.getRangeAt(i));d(t,t._ranges[t.rangeCount-1],ut(t.nativeSelection));t.isCollapsed=st(t)}else v(t)};else{if(!p||typeof u.isCollapsed!=ni||typeof ii.collapsed!=ni||!r.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;pt=function(n){var t,i=n.nativeSelection;i.anchorNode?(t=vt(i,0),n._ranges=[t],n.rangeCount=1,ki(n),n.isCollapsed=st(n)):v(n)}}i.refresh=function(n){var t,i=n?this._ranges.slice(0):null,r=this.anchorNode,u=this.anchorOffset;if(pt(this),n){if((t=i.length,t!=this._ranges.length)||this.anchorNode!=r||this.anchorOffset!=u)return!0;for(;t--;)if(!ht(i[t],this._ranges[t]))return!0;return!1}};ei=function(n,t){var i,u,r=n.getAllRanges();for(n.removeAllRanges(),i=0,u=r.length;u>i;++i)ht(t,r[i])||n.addRange(r[i]);n.rangeCount||v(n)};i.removeRange=h&&s?function(n){var t,f,o,r,s,u,i,h;if(this.docSelection.type==l){for(t=this.docSelection.createRange(),f=kt(n),o=e(t.item(0)),r=a(o).createControlRange(),u=!1,i=0,h=t.length;h>i;++i)s=t.item(i),s!==f||u?r.add(t.item(i)):u=!0;r.select();g(this)}else ei(this,n)}:function(n){ei(this,n)};!b&&p&&r.implementsDomRange?(ut=si,i.isBackward=function(){return ut(this)}):ut=i.isBackward=function(){return!1};i.isBackwards=i.isBackward;i.toString=function(){for(var i=[],n=0,t=this.rangeCount;t>n;++n)i[n]=""+this._ranges[n];return i.join("")};i.collapse=function(t,i){vi(this,t);var r=n.createRange(t);r.collapseToPoint(t,i);this.setSingleRange(r);this.isCollapsed=!0};i.collapseToStart=function(){if(!this.rangeCount)throw new nt("INVALID_STATE_ERR");var n=this._ranges[0];this.collapse(n.startContainer,n.startOffset)};i.collapseToEnd=function(){if(!this.rangeCount)throw new nt("INVALID_STATE_ERR");var n=this._ranges[this.rangeCount-1];this.collapse(n.endContainer,n.endOffset)};i.selectAllChildren=function(t){vi(this,t);var i=n.createRange(t);i.selectNodeContents(t);this.setSingleRange(i)};i.deleteFromDocument=function(){var t,i,n,r,u;if(h&&s&&this.docSelection.type==l){for(t=this.docSelection.createRange();t.length;)i=t.item(0),t.remove(i),i.parentNode.removeChild(i);this.refresh()}else if(this.rangeCount&&(n=this.getAllRanges(),n.length)){for(this.removeAllRanges(),r=0,u=n.length;u>r;++r)n[r].deleteContents();this.addRange(n[u-1])}};i.eachRange=function(n,t){for(var i=0,r=this._ranges.length;r>i;++i)if(n(this.getRangeAt(i)))return t};i.getAllRanges=function(){var n=[];return this.eachRange(function(t){n.push(t)}),n};i.setSingleRange=function(n,t){this.removeAllRanges();this.addRange(n,t)};i.callMethodOnEachRange=function(n,t){var i=[];return this.eachRange(function(r){i.push(r[n].apply(r,t))}),i};i.setStart=yi(!0);i.setEnd=yi(!1);n.rangePrototype.select=function(n){yt(this.getDocument()).setSingleRange(this,n)};i.changeEachRange=function(n){var t=[],i=this.isBackward();this.eachRange(function(i){n(i);t.push(i)});this.removeAllRanges();i&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)};i.containsNode=function(n,t){return this.eachRange(function(i){return i.containsNode(n,t)},!0)||!1};i.getBookmark=function(n){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[n])}};i.moveToBookmark=function(t){for(var f,i,r=[],u=0;f=t.rangeBookmarks[u++];)i=n.createRange(this.win),i.moveToBookmark(f),r.push(i);t.backward?this.setSingleRange(r[0],"backward"):this.setRanges(r)};i.toHtml=function(){var n=[];return this.eachRange(function(t){n.push(w.toHtml(t))}),n.join("")};r.implementsTextRange&&(i.getNativeTextRange=function(){var r,i;if(r=this.docSelection){if(i=r.createRange(),dt(i))return i;throw t.createError("getNativeTextRange: selection is a control selection");}if(this.rangeCount>0)return n.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range");});i.getName=function(){return"WrappedSelection"};i.inspect=function(){return pi(this)};i.detach=function(){gt(this.win,"delete");li(this)};o.detachAll=function(){gt(null,"deleteAll")};o.inspect=pi;o.isDirectionBackward=wt;n.Selection=o;n.selectionPrototype=i;n.addShimListener(function(n){void 0===n.getSelection&&(n.getSelection=function(){return yt(n)});n=null})}),n)},this),function(n,t){"function"==typeof define&&define.amd?define(["rangy"],n):n(t.rangy)}(function(n){n.createModule("SaveRestore",["WrappedRange"],function(n,t){function i(n,t){return(t||document).getElementById(n)}function u(n,t){var i,f="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),r=y.getDocument(n.startContainer),u=n.cloneRange();return u.collapse(t),i=r.createElement("span"),i.id=f,i.style.lineHeight="0",i.style.display="none",i.className="rangySelectionBoundary",i.appendChild(r.createTextNode(p)),u.insertNode(i),i}function f(n,r,u,f){var e=i(u,n);e?(r[f?"setStartBefore":"setEndBefore"](e),e.parentNode.removeChild(e)):t.warn("Marker element has been removed. Cannot restore selection.")}function c(n,t){return t.compareBoundaryPoints(n.START_TO_START,n)}function e(t,i){var f,r,e=n.DomRange.getRangeDocument(t),o=""+t;return t.collapsed?(r=u(t,!1),{document:e,markerId:r.id,collapsed:!0}):(r=u(t,!1),f=u(t,!0),{document:e,startMarkerId:f.id,endMarkerId:r.id,collapsed:!1,backward:i,toString:function(){return"original text: '"+o+"', new text: '"+t+"'"}})}function o(r,u){var o,e,s,h=r.document;return void 0===u&&(u=!0),o=n.createRange(h),r.collapsed?(e=i(r.markerId,h),e?(e.style.display="inline",s=e.previousSibling,s&&3==s.nodeType?(e.parentNode.removeChild(e),o.collapseToPoint(s,s.length)):(o.collapseBefore(e),e.parentNode.removeChild(e))):t.warn("Marker element has been removed. Cannot restore selection.")):(f(h,o,r.startMarkerId,!0),f(h,o,r.endMarkerId,!1)),u&&o.normalizeBoundaries(),o}function s(t,r){var f,s,u,h,o=[];for(t=t.slice(0),t.sort(c),u=0,h=t.length;h>u;++u)o[u]=e(t[u],r);for(u=h-1;u>=0;--u)f=t[u],s=n.DomRange.getRangeDocument(f),f.collapsed?f.collapseAfter(i(o[u].markerId,s)):(f.setEndBefore(i(o[u].endMarkerId,s)),f.setStartAfter(i(o[u].startMarkerId,s)));return o}function l(i){var r,u,f,e;return n.isSelectionValid(i)?(r=n.getSelection(i),u=r.getAllRanges(),f=1==u.length&&r.isBackward(),e=s(u,f),f?r.setSingleRange(u[0],"backward"):r.setRanges(u),{win:i,rangeInfos:e,restored:!1}):(t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null)}function h(n){for(var i=[],r=n.length,t=r-1;t>=0;t--)i[t]=o(n[t],!0);return i}function a(t,i){var r,u,f,e;t.restored||(r=t.rangeInfos,u=n.getSelection(t.win),f=h(r),e=r.length,1==e&&i&&n.features.selectionHasExtend&&r[0].backward?(u.removeAllRanges(),u.addRange(f[0],!0)):u.setRanges(f),t.restored=!0)}function r(n,t){var r=i(t,n);r&&r.parentNode.removeChild(r)}function v(n){for(var t,f=n.rangeInfos,i=0,u=f.length;u>i;++i)t=f[i],t.collapsed?r(n.doc,t.markerId):(r(n.doc,t.startMarkerId),r(n.doc,t.endMarkerId))}var y=n.dom,p="﻿";n.util.extend(n,{saveRange:e,restoreRange:o,saveRanges:s,restoreRanges:h,saveSelection:l,restoreSelection:a,removeMarkerElement:r,removeMarkers:v})})},this);Base=function(){};Base.extend=function(n,t){var r,u,i,f=Base.prototype.extend;return Base._prototyping=!0,r=new this,f.call(r,n),r.base=function(){},delete Base._prototyping,u=r.constructor,i=r.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==i)this._constructing=!0,u.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||f).call(arguments[0],r)},i.ancestor=this,i.extend=this.extend,i.forEach=this.forEach,i.implement=this.implement,i.prototype=r,i.toString=this.toString,i.valueOf=function(n){return"object"==n?i:u.valueOf()},f.call(i,t),"function"==typeof i.init&&i.init(),i};Base.prototype={extend:function(n,t){var r,f,u,e,o,s,i;if(arguments.length>1)r=this[n],!r||"function"!=typeof t||r.valueOf&&r.valueOf()==t.valueOf()||!/\bbase\b/.test(t)||(f=t.valueOf(),t=function(){var n,t=this.base||Base.prototype.base;return this.base=r,n=f.apply(this,arguments),this.base=t,n},t.valueOf=function(n){return"object"==n?t:f},t.toString=Base.toString),this[n]=t;else if(n){for(u=Base.prototype.extend,Base._prototyping||"function"==typeof this||(u=this.extend||u),e={toSource:null},o=["constructor","toString","valueOf"],s=Base._prototyping?0:1;i=o[s++];)n[i]!=e[i]&&u.call(this,i,n[i]);for(i in n)e[i]||u.call(this,i,n[i])}return this}};Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(n,t,i){for(var r in n)void 0===this.prototype[r]&&t.call(i,n[r],r,n)},implement:function(){for(var n=0;n<arguments.length;n++)"function"==typeof arguments[n]?arguments[n](this.prototype):this.prototype.extend(arguments[n]);return this},toString:function(){return this.valueOf()+""}});wysihtml5.browser=function(){function e(n){return+(/ipad|iphone|ipod/.test(n)&&n.match(/ os (\d+).+? like mac os x/)||[void 0,0])[1]}function o(n){return+(n.match(/android (\d+)/)||[void 0,0])[1]}function n(n,t){var r,i=-1;return"Microsoft Internet Explorer"==navigator.appName?r=RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"==navigator.appName&&(r=RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})")),r&&null!=r.exec(navigator.userAgent)&&(i=parseFloat(RegExp.$1)),-1===i?!1:n?t?"<"===t?i>n:">"===t?n>i:"<="===t?i>=n:">="===t?n>=i:void 0:n===i:!0}var t=navigator.userAgent,i=document.createElement("div"),r=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),f=-1!==t.indexOf("AppleWebKit/"),s=-1!==t.indexOf("Chrome/"),u=-1!==t.indexOf("Opera/");return{USER_AGENT:t,supported:function(){var n=this.USER_AGENT.toLowerCase(),t="contentEditable"in i,r=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,u=document.querySelector&&document.querySelectorAll,f=this.isIos()&&e(n)<5||this.isAndroid()&&o(n)<4||-1!==n.indexOf("opera mobi")||-1!==n.indexOf("hpwos/");return t&&r&&u&&!f},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return n()},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return n()},hasCurrentStyleProperty:function(){return"currentStyle"in i},hasHistoryIssue:function(){return r&&"Mac"===navigator.platform.substr(0,3)},insertsLineBreaksOnReturn:function(){return r},supportsPlaceholderAttributeOn:function(n){return"placeholder"in n},supportsEvent:function(n){return"on"+n in i||function(){return i.setAttribute("on"+n,"return;"),"function"==typeof i["on"+n]}()},supportsEventsInIframeCorrectly:function(){return!u},supportsHTML5Tags:function(n){var t=n.createElement("div"),i="<article>foo<\/article>";return t.innerHTML=i,t.innerHTML.toLowerCase()===i},supportsCommand:function(){var t={formatBlock:n(10,"<="),insertUnorderedList:n(),insertOrderedList:n()},i={insertHTML:r};return function(n,r){var u=t[r];if(!u){try{return n.queryCommandSupported(r)}catch(f){}try{return n.queryCommandEnabled(r)}catch(e){return!!i[r]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return n()},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return r||u||f},supportsGetAttributeCorrectly:function(){var n=document.createElement("td");return"1"!=n.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return r||n()||u},autoScrollsToCaret:function(){return!f},autoClosesUnclosedTags:function(){var n,t,r=i.cloneNode(!1);return r.innerHTML="<p><div><\/div>",t=r.innerHTML.toLowerCase(),n="<p><\/p><div><\/div>"===t||"<p><div><\/div><\/p>"===t,this.autoClosesUnclosedTags=function(){return n},n},supportsNativeGetElementsByClassName:function(){return-1!==(document.getElementsByClassName+"").indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return u},supportsSpeechApiOn:function(n){var i=t.match(/Chrome\/(\d+)/)||[void 0,0];return i[1]>=11&&("onwebkitspeechchange"in n||"speech"in n)},crashesWhenDefineProperty:function(t){return n(9)&&("XMLHttpRequest"===t||"XDomainRequest"===t)},doesAsyncFocus:function(){return n()},hasProblemsSettingCaretAfterImg:function(){return n()},hasUndoInContextMenu:function(){return r||s||u},hasInsertNodeIssue:function(){return u},hasIframeFocusIssue:function(){return n()},createsNestedInvalidMarkupAfterPaste:function(){return f},supportsMutationEvents:function(){return"MutationEvent"in window},supportsModenPaste:function(){return!("clipboardData"in window)}}}();wysihtml5.lang.array=function(n){return{contains:function(t){if(Array.isArray(t)){for(var i=t.length;i--;)if(-1!==wysihtml5.lang.array(n).indexOf(t[i]))return!0;return!1}return-1!==wysihtml5.lang.array(n).indexOf(t)},indexOf:function(t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1},without:function(t){t=wysihtml5.lang.array(t);for(var r=[],i=0,u=n.length;u>i;i++)t.contains(n[i])||r.push(n[i]);return r},get:function(){for(var t=0,r=n.length,i=[];r>t;t++)i.push(n[t]);return i},map:function(t,i){if(Array.prototype.map)return n.map(t,i);for(var u=n.length>>>0,f=Array(u),r=0;u>r;r++)f[r]=t.call(i,n[r],r,n);return f},unique:function(){for(var i=[],r=n.length,t=0;r>t;)wysihtml5.lang.array(i).contains(n[t])||i.push(n[t]),t++;return i}}};wysihtml5.lang.Dispatcher=Base.extend({on:function(n,t){return this.events=this.events||{},this.events[n]=this.events[n]||[],this.events[n].push(t),this},off:function(n,t){this.events=this.events||{};var i,u,r=0;if(n){for(i=this.events[n]||[],u=[];r<i.length;r++)i[r]!==t&&t&&u.push(i[r]);this.events[n]=u}else this.events={};return this},fire:function(n,t){this.events=this.events||{};for(var r=this.events[n]||[],i=0;i<r.length;i++)r[i].call(this,t);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}});wysihtml5.lang.object=function(n){return{merge:function(t){for(var i in t)n[i]=t[i];return this},get:function(){return n},clone:function(t){var i,r={};if(null===n||!wysihtml5.lang.object(n).isPlainObject())return n;for(i in n)n.hasOwnProperty(i)&&(r[i]=t?wysihtml5.lang.object(n[i]).clone(t):n[i]);return r},isArray:function(){return"[object Array]"===Object.prototype.toString.call(n)},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(n)},isPlainObject:function(){return"[object Object]"===Object.prototype.toString.call(n)}}},function(){var n=/^\s+/,t=/\s+$/,i=/[&<>\t"]/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","\t":"&nbsp; "};wysihtml5.lang.string=function(u){return u+="",{trim:function(){return u.replace(n,"").replace(t,"")},interpolate:function(n){for(var t in n)u=this.replace("#{"+t+"}").by(n[t]);return u},replace:function(n){return{by:function(t){return u.split(n).join(t)}}},escapeHTML:function(n,t){var f=u.replace(i,function(n){return r[n]});return n&&(f=f.replace(/(?:\r\n|\r|\n)/g,"<br />")),t&&(f=f.replace(/  /gi,"&nbsp; ")),f}}}}(),function(n){function e(n,t){return c(n,t)?n:(n===n.ownerDocument.documentElement&&(n=n.ownerDocument.body),i(n,t))}function o(n){return n.replace(t,function(n,t){var i,e,r=(t.match(u)||[])[1]||"",o=l[r];return t=t.replace(u,""),t.split(o).length>t.split(r).length&&(t+=r,r=""),i=t,e=t,t.length>f&&(e=e.substr(0,f)+"..."),"www."===i.substr(0,4)&&(i="http://"+i),'<a href="'+i+'">'+e+"<\/a>"+r})}function s(n){var t=n._wysihtml5_tempElement;return t||(t=n._wysihtml5_tempElement=n.createElement("div")),t}function h(t){var r=t.parentNode,u=n.lang.string(t.data).escapeHTML(),i=s(r.ownerDocument);for(i.innerHTML="<span><\/span>"+o(u),i.removeChild(i.firstChild);i.firstChild;)r.insertBefore(i.firstChild,t);r.removeChild(t)}function c(t,i){for(var u;t.parentNode;){if((t=t.parentNode,u=t.nodeName,t.className&&n.lang.array(t.className.split(" ")).contains(i))||r.contains(u))return!0;if("body"===u)return!1}return!1}function i(u,f){if(!(r.contains(u.nodeName)||u.className&&n.lang.array(u.className.split(" ")).contains(f))){if(u.nodeType===n.TEXT_NODE&&u.data.match(t))return h(u),void 0;for(var o=n.lang.array(u.childNodes).get(),s=o.length,e=0;s>e;e++)i(o[e],f);return u}}var r=n.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),t=/((https?:\/\/|www\.)[^\s<]{3,})/gi,u=/([^\w\/\-](,?))$/i,f=100,l={")":"(","]":"[","}":"{"};n.dom.autoLink=e;n.dom.autoLink.URL_REG_EXP=t}(wysihtml5),function(n){var t=n.dom;t.addClass=function(n,i){var r=n.classList;return r?r.add(i):(t.hasClass(n,i)||(n.className+=" "+i),void 0)};t.removeClass=function(n,t){var i=n.classList;return i?i.remove(t):(n.className=n.className.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "),void 0)};t.hasClass=function(n,t){var i,r=n.classList;return r?r.contains(t):(i=n.className,i.length>0&&(i==t||RegExp("(^|\\s)"+t+"(\\s|$)").test(i)))}}(wysihtml5);wysihtml5.dom.contains=function(){var n=document.documentElement;return n.contains?function(n,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),n!==t&&n.contains(t)}:n.compareDocumentPosition?function(n,t){return!!(16&n.compareDocumentPosition(t))}:void 0}();wysihtml5.dom.convertToList=function(){function n(n,t){var i=n.createElement("li");return t.appendChild(i),i}function t(n,t){return n.createElement(t)}function i(i,r,u){if("UL"===i.nodeName||"OL"===i.nodeName||"MENU"===i.nodeName)return i;for(var l,v,o,s,h,y,p,f,a=i.ownerDocument,c=t(a,r),w=i.querySelectorAll("br"),b=w.length,e=0;b>e;e++)for(s=w[e];(h=s.parentNode)&&h!==i&&h.lastChild===s;){if("block"===wysihtml5.dom.getStyle("display").from(h)){h.removeChild(s);break}wysihtml5.dom.insert(s).after(s.parentNode)}for(l=wysihtml5.lang.array(i.childNodes).get(),v=l.length,e=0;v>e;e++)f=f||n(a,c),o=l[e],y="block"===wysihtml5.dom.getStyle("display").from(o),p="BR"===o.nodeName,!y||u&&wysihtml5.dom.hasClass(o,u)?p?f=f.firstChild?null:f:f.appendChild(o):(f=f.firstChild?n(a,c):f,f.appendChild(o),f=null);return 0===l.length&&n(a,c),i.parentNode.replaceChild(c,i),c}return i}();wysihtml5.dom.copyAttributes=function(n){return{from:function(t){return{to:function(i){for(var r,u=0,f=n.length;f>u;u++)r=n[u],void 0!==t[r]&&""!==t[r]&&(i[r]=t[r]);return{andTo:arguments.callee}}}}}},function(n){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],i=function(t){return r(t)?parseInt(n.getStyle("width").from(t),10)<t.offsetWidth:!1},r=function(i){for(var r=0,u=t.length;u>r;r++)if("border-box"===n.getStyle(t[r]).from(i))return t[r]};n.copyStyles=function(r){return{from:function(u){i(u)&&(r=wysihtml5.lang.array(r).without(t));for(var f,o="",s=r.length,e=0;s>e;e++)f=r[e],o+=f+":"+n.getStyle(f).from(u)+";";return{to:function(t){return n.setStyles(o).on(t),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(n){n.dom.delegate=function(t,i,r,u){return n.dom.observe(t,r,function(r){for(var f=r.target,e=n.lang.array(t.querySelectorAll(i));f&&f!==t;){if(e.contains(f)){u.call(f,r);break}f=f.parentNode}})}}(wysihtml5),function(n){n.dom.domNode=function(t){var i=[n.ELEMENT_NODE,n.TEXT_NODE],r=function(t){return t.nodeType===n.TEXT_NODE&&/^\s*$/g.test(t.data)};return{prev:function(u){var f=t.previousSibling,e=u&&u.nodeTypes?u.nodeTypes:i;return f?!n.lang.array(e).contains(f.nodeType)||u&&u.ignoreBlankTexts&&r(f)?n.dom.domNode(f).prev(u):f:null},next:function(u){var f=t.nextSibling,e=u&&u.nodeTypes?u.nodeTypes:i;return f?!n.lang.array(e).contains(f.nodeType)||u&&u.ignoreBlankTexts&&r(f)?n.dom.domNode(f).next(u):f:null}}}}(wysihtml5);wysihtml5.dom.getAsDom=function(){var t=function(n,t){var i=t.createElement("div");i.style.display="none";t.body.appendChild(i);try{i.innerHTML=n}catch(r){}return t.body.removeChild(i),i},i=function(t){if(!t._wysihtml5_supportsHTML5Tags){for(var i=0,r=n.length;r>i;i++)t.createElement(n[i]);t._wysihtml5_supportsHTML5Tags=!0}},n=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(n,r){r=r||document;var u;return"object"==typeof n&&n.nodeType?(u=r.createElement("div"),u.appendChild(n)):wysihtml5.browser.supportsHTML5Tags(r)?(u=r.createElement("div"),u.innerHTML=n):(i(r),u=t(n,r)),u}}();wysihtml5.dom.getParentElement=function(){function n(n,t){return t&&t.length?"string"==typeof t?n===t:wysihtml5.lang.array(t).contains(n):!0}function t(n){return n.nodeType===wysihtml5.ELEMENT_NODE}function i(n,t,i){var r=(n.className||"").match(i)||[];return t?r[r.length-1]===t:!!r.length}function r(n,t,i){var r=(n.getAttribute("style")||"").match(i)||[];return t?r[r.length-1]===t:!!r.length}return function(u,f,e,o){var s=f.cssStyle||f.styleRegExp,h=f.className||f.classRegExp;for(e=e||50;e--&&u&&"BODY"!==u.nodeName&&(!o||u!==o);){if(t(u)&&n(u.nodeName,f.nodeName)&&(!s||r(u,f.cssStyle,f.styleRegExp))&&(!h||i(u,f.className,f.classRegExp)))return u;u=u.parentNode}return null}}();wysihtml5.dom.getStyle=function(){function n(n){return n.replace(i,function(n){return n.charAt(1).toUpperCase()})}var t={float:"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},i=/\-[a-z]/g;return function(i){return{from:function(r){var f,e,u,o,s,h,c,l,a;if(r.nodeType===wysihtml5.ELEMENT_NODE){if(f=r.ownerDocument,e=t[i]||n(i),u=r.style,o=r.currentStyle,s=u[e],s)return s;if(o)try{return o[e]}catch(v){}return h=f.defaultView||f.parentWindow,c=("height"===i||"width"===i)&&"TEXTAREA"===r.nodeName,h.getComputedStyle?(c&&(l=u.overflow,u.overflow="hidden"),a=h.getComputedStyle(r,null).getPropertyValue(i),c&&(u.overflow=l||""),a):void 0}}}}}();wysihtml5.dom.getTextNodes=function(n,t){var i=[];for(n=n.firstChild;n;n=n.nextSibling)3==n.nodeType?t&&/^\s*$/.test(n.innerText||n.textContent)||i.push(n):i=i.concat(wysihtml5.dom.getTextNodes(n,t));return i};wysihtml5.dom.hasElementWithTagName=function(){function t(n){return n._wysihtml5_identifier||(n._wysihtml5_identifier=i++)}var n={},i=1;return function(i,r){var f=t(i)+":"+r,u=n[f];return u||(u=n[f]=i.getElementsByTagName(r)),u.length>0}}(),function(n){function i(n){return n._wysihtml5_identifier||(n._wysihtml5_identifier=r++)}var t={},r=1;n.dom.hasElementWithClassName=function(r,u){if(!n.browser.supportsNativeGetElementsByClassName())return!!r.querySelector("."+u);var e=i(r)+":"+u,f=t[e];return f||(f=t[e]=r.getElementsByClassName(u)),f.length>0}}(wysihtml5);wysihtml5.dom.insert=function(n){return{after:function(t){t.parentNode.insertBefore(n,t.nextSibling)},before:function(t){t.parentNode.insertBefore(n,t)},into:function(t){t.appendChild(n)}}};wysihtml5.dom.insertCSS=function(n){return n=n.join("\n"),{into:function(t){var r,u,i=t.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=n:i.appendChild(t.createTextNode(n)),r=t.querySelector("head link"),r?(r.parentNode.insertBefore(i,r),void 0):(u=t.querySelector("head"),u&&u.appendChild(i),void 0)}}},function(n){n.dom.lineBreaks=function(t){function i(n){return"BR"===n.nodeName}function r(t){return i(t)?!0:"block"===n.dom.getStyle("display").from(t)?!0:!1}return{add:function(){var i=t.ownerDocument,u=n.dom.domNode(t).next({ignoreBlankTexts:!0}),f=n.dom.domNode(t).prev({ignoreBlankTexts:!0});u&&!r(u)&&n.dom.insert(i.createElement("br")).after(t);f&&!r(f)&&n.dom.insert(i.createElement("br")).before(t)},remove:function(){var r=n.dom.domNode(t).next({ignoreBlankTexts:!0}),u=n.dom.domNode(t).prev({ignoreBlankTexts:!0});r&&i(r)&&r.parentNode.removeChild(r);u&&i(u)&&u.parentNode.removeChild(u)}}}}(wysihtml5);wysihtml5.dom.observe=function(n,t,i){t="string"==typeof t?[t]:t;for(var r,u,f=0,e=t.length;e>f;f++)u=t[f],n.addEventListener?n.addEventListener(u,i,!1):(r=function(t){"target"in t||(t.target=t.srcElement);t.preventDefault=t.preventDefault||function(){this.returnValue=!1};t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0};i.call(n,t)},n.attachEvent("on"+u,r));return{stop:function(){for(var u,f=0,e=t.length;e>f;f++)u=t[f],n.removeEventListener?n.removeEventListener(u,i,!1):n.detachEvent("on"+u,r)}}};wysihtml5.dom.parse=function(n,t){function c(n,t){var c,f,a,v,u,e,o,s,h;for(wysihtml5.lang.object(i).merge(tt).merge(t.rules).get(),c=t.context||n.ownerDocument||document,f=c.createDocumentFragment(),a="string"==typeof n,v=!1,t.clearInternals===!0&&(v=!0),u=a?wysihtml5.dom.getAsDom(n,c):n,i.selectors&&l(u,i.selectors);u.firstChild;)o=u.firstChild,e=r(o,t.cleanUp,v,t.uneditableClass),e&&f.appendChild(e),o!==e&&u.removeChild(o);if(t.unjoinNbsps)for(s=wysihtml5.dom.getTextNodes(f),h=s.length;h--;)s[h].nodeValue=s[h].nodeValue.replace(/([\S\u00A0])\u00A0/gi,"$1 ");return u.innerHTML="",u.appendChild(f),a?wysihtml5.quirks.getCorrectInnerHTML(u):u}function r(n,t,i,f){var o,e,h,l=n.nodeType,c=n.childNodes,a=c.length,v=nt[l],s=0;if(f&&1===l&&wysihtml5.dom.hasClass(n,f))return n;if(e=v&&v(n,i),!e){if(e===!1){for(o=n.ownerDocument.createDocumentFragment(),s=a;s--;)c[s]&&(h=r(c[s],t,i,f),h&&(c[s]===h&&s--,o.insertBefore(h,o.firstChild)));return"block"===wysihtml5.dom.getStyle("display").from(n)&&o.appendChild(n.ownerDocument.createElement("br")),wysihtml5.lang.array(["div","pre","p","table","td","th","ul","ol","li","dd","dl","footer","header","section","h1","h2","h3","h4","h5","h6"]).contains(n.nodeName.toLowerCase())&&n.parentNode.lastChild!==n&&(n.nextSibling&&3===n.nextSibling.nodeType&&/^\s/.test(n.nextSibling.nodeValue)||o.appendChild(n.ownerDocument.createTextNode(" "))),o.normalize&&o.normalize(),o}return null}for(s=0;a>s;s++)c[s]&&(h=r(c[s],t,i,f),h&&(c[s]===h&&s--,e.appendChild(h)));if(t&&e.nodeName.toLowerCase()===u&&(!e.childNodes.length||/^\s*$/gi.test(e.innerHTML)&&(i||"_wysihtml5-temp-placeholder"!==n.className&&"rangySelectionBoundary"!==n.className)||!e.attributes.length)){for(o=e.ownerDocument.createDocumentFragment();e.firstChild;)o.appendChild(e.firstChild);return o.normalize&&o.normalize(),o}return e.normalize&&e.normalize(),e}function l(n,t){var i,r,u,f;for(i in t)if(t.hasOwnProperty(i))for(wysihtml5.lang.object(t[i]).isFunction()?r=t[i]:"string"==typeof t[i]&&h[t[i]]&&(r=h[t[i]]),u=n.querySelectorAll(i),f=u.length;f--;)r(u[f])}function a(n,t){var r,f,s,h=i.tags,e=n.nodeName.toLowerCase(),o=n.scopeName;if(n._wysihtml5||(n._wysihtml5=1,"wysihtml5-temp"===n.className))return null;if(o&&"HTML"!=o&&(e=o+":"+e),"outerHTML"in n&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==n.nodeName||"<\/p>"===n.outerHTML.slice(-4).toLowerCase()||(e="div")),e in h){if(r=h[e],!r||r.remove)return null;if(r.unwrap)return!1;r="string"==typeof r?{rename_tag:r}:r}else{if(!n.firstChild)return null;r={rename_tag:u}}if(r.one_of_type&&!v(n,i,r.one_of_type,t)){if(!r.remove_action)return null;if("unwrap"===r.remove_action)return!1;if("rename"!==r.remove_action)return null;s=r.remove_action_rename_to||u}return f=n.ownerDocument.createElement(s||r.rename_tag||e),k(n,f,r,t),p(n,f,r),n=null,f.normalize&&f.normalize(),f}function v(n,t,i,r){var f,u;if("SPAN"===n.nodeName&&!r&&("_wysihtml5-temp-placeholder"===n.className||"rangySelectionBoundary"===n.className))return!0;for(u in i)if(i.hasOwnProperty(u)&&t.type_definitions&&t.type_definitions[u]&&(f=t.type_definitions[u],y(n,f)))return!0;return!1}function y(n,t){var v,i,e,c,l,o,h,a,r=n.getAttribute("class"),u=n.getAttribute("style");if(t.methods)for(o in t.methods)if(t.methods.hasOwnProperty(o)&&s[o]&&s[o](n))return!0;if(r&&t.classes)for(r=r.replace(/^\s+/g,"").replace(/\s+$/g,"").split(f),v=r.length,h=0;v>h;h++)if(t.classes[r[h]])return!0;if(u&&t.styles){u=u.split(";");for(i in t.styles)if(t.styles.hasOwnProperty(i))for(a=u.length;a--;)if(l=u[a].split(":"),l[0].replace(/\s/g,"").toLowerCase()===i&&(t.styles[i]===!0||1===t.styles[i]||wysihtml5.lang.array(t.styles[i]).contains(l[1].replace(/\s/g,"").toLowerCase())))return!0}if(t.attrs)for(e in t.attrs)if(t.attrs.hasOwnProperty(e)&&(c=wysihtml5.dom.getAttribute(n,e),"string"==typeof c&&c.search(t.attrs[e])>-1))return!0;return!1}function p(n,t,i){var r,u;if(i&&i.keep_styles)for(r in i.keep_styles)if(i.keep_styles.hasOwnProperty(r)){if(u="float"===r?n.style.styleFloat||n.style.cssFloat:n.style[r],i.keep_styles[r]instanceof RegExp&&!i.keep_styles[r].test(u))continue;"float"===r?t.style[n.style.styleFloat?"styleFloat":"cssFloat"]=u:n.style[r]&&(t.style[r]=u)}}function w(n,t){var i,r=[];for(i in t)t.hasOwnProperty(i)&&0===i.indexOf(n)&&r.push(i);return r}function o(n,t,i,r){var u,f=it[i];return f&&(t||"alt"===n&&"IMG"==r)&&(u=f(t),"string"==typeof u)?u:!1}function b(n,t){var r,u,e,f,l,a=wysihtml5.lang.object(i.attributes||{}).clone(),s=wysihtml5.lang.object(a).merge(wysihtml5.lang.object(t||{}).clone()).get(),h={},c=wysihtml5.dom.getAttributes(n);for(r in s)if(/\*$/.test(r))for(e=w(r.slice(0,-1),c),f=0,l=e.length;l>f;f++)u=o(e[f],c[e[f]],s[r],n.nodeName),u!==!1&&(h[e[f]]=u);else u=o(r,c[r],s[r],n.nodeName),u!==!1&&(h[r]=u);return h}function k(n,t,r,u){var p,h,w,s,c,e={},nt=r.set_class,k=r.add_class,d=r.add_style,tt=r.set_attributes,l=i.classes,a=0,o=[],g=[],v=[],y=[];if(tt&&(e=wysihtml5.lang.object(tt).clone()),e=wysihtml5.lang.object(e).merge(b(n,r.check_attributes)).get(),nt&&o.push(nt),k)for(s in k)c=ut[k[s]],c&&(w=c(wysihtml5.dom.getAttribute(n,s)),"string"==typeof w&&o.push(w));if(d)for(s in d)c=rt[d[s]],c&&(newStyle=c(wysihtml5.dom.getAttribute(n,s)),"string"==typeof newStyle&&g.push(newStyle));if("string"==typeof l&&"any"===l&&n.getAttribute("class"))if(i.classes_blacklist){for(y=n.getAttribute("class"),y&&(o=o.concat(y.split(f))),p=o.length;p>a;a++)h=o[a],i.classes_blacklist[h]||v.push(h);v.length&&(e["class"]=wysihtml5.lang.array(v).unique().join(" "))}else e["class"]=n.getAttribute("class");else{for(u||(l["_wysihtml5-temp-placeholder"]=1,l._rangySelectionBoundary=1,l["wysiwyg-tmp-selected-cell"]=1),y=n.getAttribute("class"),y&&(o=o.concat(y.split(f))),p=o.length;p>a;a++)h=o[a],l[h]&&v.push(h);v.length&&(e["class"]=wysihtml5.lang.array(v).unique().join(" "))}e["class"]&&u&&(e["class"]=e["class"].replace("wysiwyg-tmp-selected-cell",""),/^\s*$/g.test(e["class"])&&delete e["class"]);g.length&&(e.style=wysihtml5.lang.array(g).unique().join(" "));for(s in e)try{t.setAttribute(s,e[s])}catch(it){}e.src&&(void 0!==e.width&&t.setAttribute("width",e.width),void 0!==e.height&&t.setAttribute("height",e.height))}function d(n){var i,t=n.nextSibling;return t&&t.nodeType===wysihtml5.TEXT_NODE?(t.data=n.data.replace(e,"")+t.data.replace(e,""),void 0):(i=n.data.replace(e,""),n.ownerDocument.createTextNode(i))}function g(n){if(i.comments)return n.ownerDocument.createComment(n.nodeValue)}var nt={1:a,3:d,8:g},u="span",f=/\s+/,tt={tags:{},classes:{}},i={},e=/\uFEFF/g,it={url:function(){var n=/^https?:\/\//i;return function(t){return t&&t.match(n)?t.replace(n,function(n){return n.toLowerCase()}):null}}(),src:function(){var n=/^(\/|https?:\/\/)/i;return function(t){return t&&t.match(n)?t.replace(n,function(n){return n.toLowerCase()}):null}}(),href:function(){var n=/^(#|\/|https?:\/\/|mailto:)/i;return function(t){return t&&t.match(n)?t.replace(n,function(n){return n.toLowerCase()}):null}}(),alt:function(){var n=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(n,""):""}}(),numbers:function(){var n=/\D/g;return function(t){return t=(t||"").replace(n,""),t||null}}(),any:function(){return function(n){return n}}()},rt={align_text:function(){var n={left:"text-align: left;",right:"text-align: right;",center:"text-align: center;"};return function(t){return n[(t+"").toLowerCase()]}}()},ut={align_img:function(){var n={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return n[(t+"").toLowerCase()]}}(),align_text:function(){var n={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return n[(t+"").toLowerCase()]}}(),clear_br:function(){var n={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return n[(t+"").toLowerCase()]}}(),size_font:function(){var n={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return n[(t+"").charAt(0)]}}()},s={has_visible_contet:function(){var n,t=["img","video","picture","br","script","noscript","style","table","iframe","object","embed","audio","svg","input","button","select","textarea","canvas"];return function(i){if(n=(i.innerText||i.textContent).replace(/\s/g,""),n&&n.length>0)return!0;for(var r=t.length;r--;)if(i.querySelector(t[r]))return!0;return i.offsetWidth&&i.offsetWidth>0&&i.offsetHeight&&i.offsetHeight>0?!0:!1}}()},h={unwrap:function(n){wysihtml5.dom.unwrap(n)},remove:function(n){n.parentNode.removeChild(n)}};return c(n,t)};wysihtml5.dom.removeEmptyTextNodes=function(n){for(var t,r=wysihtml5.lang.array(n.childNodes).get(),u=r.length,i=0;u>i;i++)t=r[i],t.nodeType===wysihtml5.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)};wysihtml5.dom.renameElement=function(n,t){for(var r,i=n.ownerDocument.createElement(t);r=n.firstChild;)i.appendChild(r);return wysihtml5.dom.copyAttributes(["align","className"]).from(n).to(i),n.parentNode.replaceChild(i,n),i};wysihtml5.dom.replaceWithChildNodes=function(n){if(n.parentNode){if(!n.firstChild)return n.parentNode.removeChild(n),void 0;for(var t=n.ownerDocument.createDocumentFragment();n.firstChild;)t.appendChild(n.firstChild);n.parentNode.replaceChild(t,n);n=t=null}},function(n){function t(t){return"block"===n.getStyle("display").from(t)}function i(n){return"BR"===n.nodeName}function r(n){var t=n.ownerDocument.createElement("br");n.appendChild(t)}function u(n,u){if(n.nodeName.match(/^(MENU|UL|OL)$/)){var e,c,l,a,s,f,v=n.ownerDocument,o=v.createDocumentFragment(),h=wysihtml5.dom.domNode(n).prev({ignoreBlankTexts:!0});if(u)for(!h||t(h)||i(h)||r(o);f=n.firstElementChild||n.firstChild;){for(c=f.lastChild;e=f.firstChild;)l=e===c,a=l&&!t(e)&&!i(e),o.appendChild(e),a&&r(o);f.parentNode.removeChild(f)}else for(;f=n.firstElementChild||n.firstChild;){if(f.querySelector&&f.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))for(;e=f.firstChild;)o.appendChild(e);else{for(s=v.createElement("p");e=f.firstChild;)s.appendChild(e);o.appendChild(s)}f.parentNode.removeChild(f)}n.parentNode.replaceChild(o,n)}}n.resolveList=u}(wysihtml5.dom),function(n){var t=document,i=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],r=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],u=["referrer","write","open","close"];n.dom.Sandbox=Base.extend({constructor:function(t,i){this.callback=t||n.EMPTY_FUNCTION;this.config=n.lang.object({}).merge(i).get();this.editableArea=this._createIframe()},insertInto:function(n){"string"==typeof n&&(n=t.getElementById(n));n.appendChild(this.editableArea)},getIframe:function(){return this.editableArea},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var n=this.getIframe();n.parentNode.removeChild(n)},_readyError:function(){throw Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet");},_createIframe:function(){var r=this,i=t.createElement("iframe");return i.className="wysihtml5-sandbox",n.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),n.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html><\/html>'"),i.onload=function(){i.onreadystatechange=i.onload=null;r._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,r._onLoadIframe(i))},i},_onLoadIframe:function(f){var c,h,o,l,a,e,s;if(n.dom.contains(t.documentElement,f)){if(c=this,h=f.contentWindow,o=f.contentWindow.document,l=t.characterSet||t.charset||"utf-8",a=this._getHtml({charset:l,stylesheets:this.config.stylesheets}),o.open("text/html","replace"),o.write(a),o.close(),this.getWindow=function(){return f.contentWindow},this.getDocument=function(){return f.contentWindow.document},h.onerror=function(n,t,i){throw Error("wysihtml5.Sandbox: "+n,t,i);},!n.browser.supportsSandboxedIframes()){for(e=0,s=i.length;s>e;e++)this._unset(h,i[e]);for(e=0,s=r.length;s>e;e++)this._unset(h,r[e],n.EMPTY_FUNCTION);for(e=0,s=u.length;s>e;e++)this._unset(o,u[e]);this._unset(o,"cookie","",!0)}this.loaded=!0;setTimeout(function(){c.callback(c)},0)}},_getHtml:function(t){var u,i=t.stylesheets,f="",r=0;if(i="string"==typeof i?[i]:i,i)for(u=i.length;u>r;r++)f+='<link rel="stylesheet" href="'+i[r]+'">';return t.stylesheets=f,n.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}<\/head><body><\/body><\/html>').interpolate(t)},_unset:function(t,i,r,u){try{t[i]=r}catch(e){}try{t.__defineGetter__(i,function(){return r})}catch(e){}if(u)try{t.__defineSetter__(i,function(){})}catch(e){}if(!n.browser.crashesWhenDefineProperty(i))try{var f={get:function(){return r}};u&&(f.set=function(){});Object.defineProperty(t,i,f)}catch(e){}}})}(wysihtml5),function(n){var t=document;n.dom.ContentEditableArea=Base.extend({getContentEditable:function(){return this.element},getWindow:function(){return this.element.ownerDocument.defaultView},getDocument:function(){return this.element.ownerDocument},constructor:function(t,i,r){this.callback=t||n.EMPTY_FUNCTION;this.config=n.lang.object({}).merge(i).get();this.element=r?this._bindElement(r):this._createElement()},_createElement:function(){var n=t.createElement("div");return n.className="wysihtml5-sandbox",this._loadElement(n),n},_bindElement:function(n){return n.className=n.className&&""!=n.className?n.className+" wysihtml5-sandbox":"wysihtml5-sandbox",this._loadElement(n,!0),n},_loadElement:function(n,t){var i,r=this;t||(i=this._getHtml(),n.innerHTML=i);this.getWindow=function(){return n.ownerDocument.defaultView};this.getDocument=function(){return n.ownerDocument};this.loaded=!0;setTimeout(function(){r.callback(r)},0)},_getHtml:function(){return""}})}(wysihtml5),function(){var n={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(i){for(var r in t)i.setAttribute(n[r]||r,t[r])}}}}();wysihtml5.dom.setStyles=function(n){return{on:function(t){var i,r=t.style;if("string"==typeof n)return r.cssText+=";"+n,void 0;for(i in n)"float"===i?(r.cssFloat=n[i],r.styleFloat=n[i]):r[i]=n[i]}}},function(n){n.simulatePlaceholder=function(t,i,r){var e="placeholder",u=function(){var t=i.element.offsetWidth>0&&i.element.offsetHeight>0;i.hasPlaceholderSet()&&(i.clear(),i.element.focus(),t&&setTimeout(function(){var n=i.selection.getSelection();n.focusNode&&n.anchorNode||i.selection.selectNode(i.element.firstChild||i.element)},0));i.placeholderSet=!1;n.removeClass(i.element,e)},f=function(){i.isEmpty()&&(i.placeholderSet=!0,i.setValue(r),n.addClass(i.element,e))};t.on("set_placeholder",f).on("unset_placeholder",u).on("focus:composer",u).on("paste:composer",u).on("blur:composer",f);f()}}(wysihtml5.dom),function(n){var t=document.documentElement;"textContent"in t?(n.setTextContent=function(n,t){n.textContent=t},n.getTextContent=function(n){return n.textContent}):"innerText"in t?(n.setTextContent=function(n,t){n.innerText=t},n.getTextContent=function(n){return n.innerText}):(n.setTextContent=function(n,t){n.nodeValue=t},n.getTextContent=function(n){return n.nodeValue})}(wysihtml5.dom);wysihtml5.dom.getAttribute=function(n,t){var i,r,u,f=!wysihtml5.browser.supportsGetAttributeCorrectly();return t=t.toLowerCase(),i=n.nodeName,"IMG"==i&&"src"==t&&wysihtml5.dom.isLoadedImage(n)===!0?n.src:f&&"outerHTML"in n?(r=n.outerHTML.toLowerCase(),u=-1!=r.indexOf(" "+t+"="),u?n.getAttribute(t):null):n.getAttribute(t)};wysihtml5.dom.getAttributes=function(n){var t,r=!wysihtml5.browser.supportsGetAttributeCorrectly(),u=n.nodeName,i=[];for(t in n.attributes)(n.attributes.hasOwnProperty&&n.attributes.hasOwnProperty(t)||!n.attributes.hasOwnProperty&&Object.prototype.hasOwnProperty.call(n.attributes,t))&&n.attributes[t].specified&&("IMG"==u&&"src"==n.attributes[t].name.toLowerCase()&&wysihtml5.dom.isLoadedImage(n)===!0?i.src=n.src:wysihtml5.lang.array(["rowspan","colspan"]).contains(n.attributes[t].name.toLowerCase())&&r?1!==n.attributes[t].value&&(i[n.attributes[t].name]=n.attributes[t].value):i[n.attributes[t].name]=n.attributes[t].value);return i};wysihtml5.dom.isLoadedImage=function(n){try{return n.complete&&!n.mozMatchesSelector(":-moz-broken")}catch(t){if(n.complete&&"complete"===n.readyState)return!0}},function(n){function e(n,t){for(var i,u,e=[],r=0,f=n.length;f>r;r++)if(i=n[r].querySelectorAll(t),i)for(u=i.length;u--;e.unshift(i[u]));return e}function u(n){n.parentNode.removeChild(n)}function r(n,t){n.parentNode.insertBefore(t,n.nextSibling)}function o(n,t){for(var i=n.nextSibling;1!=i.nodeType;)if(i=i.nextSibling,!t||t==i.tagName.toLowerCase())return i;return null}var t=n.dom,f=function(n){this.el=n;this.isColspan=!1;this.isRowspan=!1;this.firstCol=!0;this.lastCol=!0;this.firstRow=!0;this.lastRow=!0;this.isReal=!0;this.spanCollection=[];this.modified=!1},i=function(n,i){n?(this.cell=n,this.table=t.getParentElement(n,{nodeName:["TABLE"]})):i&&(this.table=i,this.cell=this.table.querySelectorAll("th, td")[0])};i.prototype={addSpannedCellToMap:function(n,t,i,r,u,e){for(var s,h=[],c=i+(e?parseInt(e,10)-1:0),l=r+(u?parseInt(u,10)-1:0),o=i;c>=o;o++)for(void 0===t[o]&&(t[o]=[]),s=r;l>=s;s++)t[o][s]=new f(n),t[o][s].isColspan=u&&parseInt(u,10)>1,t[o][s].isRowspan=e&&parseInt(e,10)>1,t[o][s].firstCol=s==r,t[o][s].lastCol=s==l,t[o][s].firstRow=o==i,t[o][s].lastRow=o==c,t[o][s].isReal=s==r&&o==i,t[o][s].spanCollection=h,h.push(t[o][s])},setCellAsModified:function(n){if(n.modified=!0,n.spanCollection.length>0)for(var t=0,i=n.spanCollection.length;i>t;t++)n.spanCollection[t].modified=!0},setTableMap:function(){for(var c,s,o,u,i,e,h,r=[],l=this.getTableRows(),n=0;n<l.length;n++)for(c=l[n],s=this.getRowCells(c),i=0,void 0===r[n]&&(r[n]=[]),o=0;o<s.length;o++){for(u=s[o];void 0!==r[n][i];)i++;e=t.getAttribute(u,"colspan");h=t.getAttribute(u,"rowspan");e||h?(this.addSpannedCellToMap(u,r,n,i,e,h),i+=e?parseInt(e,10):1):(r[n][i]=new f(u),i++)}return this.map=r,r},getRowCells:function(t){var i=this.table.querySelectorAll("table"),r=i?e(i,"th, td"):[],u=t.querySelectorAll("th, td");return r.length>0?n.lang.array(u).without(r):u},getTableRows:function(){var t=this.table.querySelectorAll("table"),i=t?e(t,"tr"):[],r=this.table.querySelectorAll("tr");return i.length>0?n.lang.array(r).without(i):r},getMapIndex:function(n){for(var i,r=this.map.length,u=this.map&&this.map[0]?this.map[0].length:0,t=0;r>t;t++)for(i=0;u>i;i++)if(this.map[t][i].el===n)return{row:t,col:i};return!1},getElementAtIndex:function(n){return this.setTableMap(),this.map[n.row]&&this.map[n.row][n.col]&&this.map[n.row][n.col].el?this.map[n.row][n.col].el:null},getMapElsTo:function(n){var r,u,t,f,i,e,o=[];if(this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(n),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(r=this.idx_start,this.idx_start=this.idx_end,this.idx_end=r),this.idx_start.col>this.idx_end.col&&(u=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=u),null!=this.idx_start&&null!=this.idx_end)for(t=this.idx_start.row,f=this.idx_end.row;f>=t;t++)for(i=this.idx_start.col,e=this.idx_end.col;e>=i;i++)o.push(this.map[t][i].el);return o},orderSelectionEnds:function(n){var t,i;return this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(n),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(t=this.idx_start,this.idx_start=this.idx_end,this.idx_end=t),this.idx_start.col>this.idx_end.col&&(i=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=i),{start:this.map[this.idx_start.row][this.idx_start.col].el,end:this.map[this.idx_end.row][this.idx_end.col].el}},createCells:function(n,t,i){for(var r,u,e=this.table.ownerDocument,o=e.createDocumentFragment(),f=0;t>f;f++){if(r=e.createElement(n),i)for(u in i)i.hasOwnProperty(u)&&r.setAttribute(u,i[u]);r.appendChild(document.createTextNode(" "));o.appendChild(r)}return o},correctColIndexForUnreals:function(n,t){for(var f=this.map[t],r=-1,i=0,u=n;n>i;i++)f[i].isReal&&r++;return r},getLastNewCellOnRow:function(n,t){for(var r,u,e=this.getRowCells(n),i=0,f=e.length;f>i;i++)if(r=e[i],u=this.getMapIndex(r),u===!1||void 0!==t&&u.row!=t)return r;return null},removeEmptyTable:function(){var n=this.table.querySelectorAll("td, th");return n&&0!=n.length?!1:(u(this.table),!0)},splitRowToCells:function(n){var i,u,f;n.isColspan&&(i=parseInt(t.getAttribute(n.el,"colspan")||1,10),u=n.el.tagName.toLowerCase(),i>1&&(f=this.createCells(u,i-1),r(n.el,f)),n.el.removeAttribute("colspan"))},getRealRowEl:function(n,i){var u,e,r=null,f=null;for(i=i||this.idx,u=0,e=this.map[i.row].length;e>u;u++)if(f=this.map[i.row][u],f.isReal&&(r=t.getParentElement(f.el,{nodeName:["TR"]}),r))return r;return null===r&&n&&(r=t.getParentElement(this.map[i.row][i.col].el,{nodeName:["TR"]})||null),r},injectRowAt:function(n,i,u,f,e){var s,h,o=this.getRealRowEl(!1,{row:n,col:i}),c=this.createCells(f,u);o?(s=this.correctColIndexForUnreals(i,n),s>=0?r(this.getRowCells(o)[s],c):o.insertBefore(c,o.firstChild)):(h=this.table.ownerDocument.createElement("tr"),h.appendChild(c),r(t.getParentElement(e.el,{nodeName:["TR"]}),h))},canMerge:function(n){var r,u,t,f,i,e;for(this.to=n,this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(this.to),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(r=this.idx_start,this.idx_start=this.idx_end,this.idx_end=r),this.idx_start.col>this.idx_end.col&&(u=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=u),t=this.idx_start.row,f=this.idx_end.row;f>=t;t++)for(i=this.idx_start.col,e=this.idx_end.col;e>=i;i++)if(this.map[t][i].isColspan||this.map[t][i].isRowspan)return!1;return!0},decreaseCellSpan:function(n,i){var r=parseInt(t.getAttribute(n.el,i),10)-1;r>=1?n.el.setAttribute(i,r):(n.el.removeAttribute(i),"colspan"==i&&(n.isColspan=!1),"rowspan"==i&&(n.isRowspan=!1),n.firstCol=!0,n.lastCol=!0,n.firstRow=!0,n.lastRow=!0,n.isReal=!0)},removeSurplusLines:function(){var n,f,i,e,r,o,s,h;if(this.setTableMap(),this.map){for(i=0,e=this.map.length;e>i;i++){for(n=this.map[i],s=!0,r=0,o=n.length;o>r;r++)if(f=n[r],!(t.getAttribute(f.el,"rowspan")&&parseInt(t.getAttribute(f.el,"rowspan"),10)>1&&f.firstRow!==!0)){s=!1;break}if(s)for(r=0;o>r;r++)this.decreaseCellSpan(n[r],"rowspan")}for(h=this.getTableRows(),i=0,e=h.length;e>i;i++)n=h[i],0==n.childNodes.length&&/^\s*$/.test(n.textContent||n.innerText)&&u(n)}},fillMissingCells:function(){var i,n,t,e=0,o=0,u=null;if(this.setTableMap(),this.map){for(e=this.map.length,i=0;e>i;i++)this.map[i].length>o&&(o=this.map[i].length);for(n=0;e>n;n++)for(t=0;o>t;t++)this.map[n]&&!this.map[n][t]&&t>0&&(this.map[n][t]=new f(this.createCells("td",1)),u=this.map[n][t-1],u&&u.el&&u.el.parent&&r(this.map[n][t-1].el,this.map[n][t].el))}},rectify:function(){return this.removeEmptyTable()?!1:(this.removeSurplusLines(),this.fillMissingCells(),!0)},unmerge:function(){var n,u,f,r,i,e;if(this.rectify()&&(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx)){if(n=this.map[this.idx.row][this.idx.col],u=t.getAttribute(n.el,"colspan")?parseInt(t.getAttribute(n.el,"colspan"),10):1,f=n.el.tagName.toLowerCase(),n.isRowspan){if(r=parseInt(t.getAttribute(n.el,"rowspan"),10),r>1)for(i=1,e=r-1;e>=i;i++)this.injectRowAt(this.idx.row+i,this.idx.col,u,f,n);n.el.removeAttribute("rowspan")}this.splitRowToCells(n)}},merge:function(n){var r,f,t,e,i,o;if(this.rectify())if(this.canMerge(n)){for(r=this.idx_end.row-this.idx_start.row+1,f=this.idx_end.col-this.idx_start.col+1,t=this.idx_start.row,e=this.idx_end.row;e>=t;t++)for(i=this.idx_start.col,o=this.idx_end.col;o>=i;i++)t==this.idx_start.row&&i==this.idx_start.col?(r>1&&this.map[t][i].el.setAttribute("rowspan",r),f>1&&this.map[t][i].el.setAttribute("colspan",f)):(/^\s*<br\/?>\s*$/.test(this.map[t][i].el.innerHTML.toLowerCase())||(this.map[this.idx_start.row][this.idx_start.col].el.innerHTML+=" "+this.map[t][i].el.innerHTML),u(this.map[t][i].el));this.rectify()}else window.console&&void 0},collapseCellToNextRow:function(n){var i,u,f,s=this.getMapIndex(n.el),e=s.row+1,o={row:e,col:s.col};e<this.map.length&&(i=this.getRealRowEl(!1,o),null!==i&&(u=this.correctColIndexForUnreals(o.col,o.row),u>=0?r(this.getRowCells(i)[u],n.el):(f=this.getLastNewCellOnRow(i,e),null!==f?r(f,n.el):i.insertBefore(n.el,i.firstChild)),parseInt(t.getAttribute(n.el,"rowspan"),10)>2?n.el.setAttribute("rowspan",parseInt(t.getAttribute(n.el,"rowspan"),10)-1):n.el.removeAttribute("rowspan")))},removeRowCell:function(n){n.isReal?n.isRowspan?this.collapseCellToNextRow(n):u(n.el):parseInt(t.getAttribute(n.el,"rowspan"),10)>2?n.el.setAttribute("rowspan",parseInt(t.getAttribute(n.el,"rowspan"),10)-1):n.el.removeAttribute("rowspan")},getRowElementsByCell:function(){var t,n,i,r=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(t=this.map[this.idx.row],n=0,i=t.length;i>n;n++)t[n].isReal&&r.push(t[n].el);return r},getColumnElementsByCell:function(){var n,t,i=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(n=0,t=this.map.length;t>n;n++)this.map[n][this.idx.col]&&this.map[n][this.idx.col].isReal&&i.push(this.map[n][this.idx.col].el);return i},removeRow:function(){var i,n,r,f=t.getParentElement(this.cell,{nodeName:["TR"]});if(f){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(i=this.map[this.idx.row],n=0,r=i.length;r>n;n++)i[n].modified||(this.setCellAsModified(i[n]),this.removeRowCell(i[n]));u(f)}},removeColCell:function(n){n.isColspan?parseInt(t.getAttribute(n.el,"colspan"),10)>2?n.el.setAttribute("colspan",parseInt(t.getAttribute(n.el,"colspan"),10)-1):n.el.removeAttribute("colspan"):n.isReal&&u(n.el)},removeColumn:function(){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var n=0,t=this.map.length;t>n;n++)this.map[n][this.idx.col].modified||(this.setCellAsModified(this.map[n][this.idx.col]),this.removeColCell(this.map[n][this.idx.col]))},remove:function(n){if(this.rectify()){switch(n){case"row":this.removeRow();break;case"column":this.removeColumn()}this.rectify()}},addRow:function(n){var u,f,i,o,e,s=this.table.ownerDocument;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"below"==n&&t.getAttribute(this.cell,"rowspan")&&(this.idx.row=this.idx.row+parseInt(t.getAttribute(this.cell,"rowspan"),10)-1),this.idx!==!1){for(u=this.map[this.idx.row],f=s.createElement("tr"),i=0,o=u.length;o>i;i++)u[i].modified||(this.setCellAsModified(u[i]),this.addRowCell(u[i],f,n));switch(n){case"below":r(this.getRealRowEl(!0),f);break;case"above":e=t.getParentElement(this.map[this.idx.row][this.idx.col].el,{nodeName:["TR"]});e&&e.parentNode.insertBefore(f,e)}}},addRowCell:function(n,i,r){var u=n.isColspan?{colspan:t.getAttribute(n.el,"colspan")}:null;n.isReal?"above"!=r&&n.isRowspan?n.el.setAttribute("rowspan",parseInt(t.getAttribute(n.el,"rowspan"),10)+1):i.appendChild(this.createCells("td",1,u)):"above"!=r&&n.isRowspan&&n.lastRow?i.appendChild(this.createCells("td",1,u)):c.isRowspan&&n.el.attr("rowspan",parseInt(t.getAttribute(n.el,"rowspan"),10)+1)},add:function(n){this.rectify()&&(("below"==n||"above"==n)&&this.addRow(n),("before"==n||"after"==n)&&this.addColumn(n))},addColCell:function(n,i,u){var f,e=n.el.tagName.toLowerCase();switch(u){case"before":f=!n.isColspan||n.firstCol;break;case"after":f=!n.isColspan||n.lastCol||n.isColspan&&c.el==this.cell}if(f){switch(u){case"before":n.el.parentNode.insertBefore(this.createCells(e,1),n.el);break;case"after":r(n.el,this.createCells(e,1))}n.isRowspan&&this.handleCellAddWithRowspan(n,i+1,u)}else n.el.setAttribute("colspan",parseInt(t.getAttribute(n.el,"colspan"),10)+1)},addColumn:function(n){var u,r,i,f;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"after"==n&&t.getAttribute(this.cell,"colspan")&&(this.idx.col=this.idx.col+parseInt(t.getAttribute(this.cell,"colspan"),10)-1),this.idx!==!1)for(i=0,f=this.map.length;f>i;i++)u=this.map[i],u[this.idx.col]&&(r=u[this.idx.col],r.modified||(this.setCellAsModified(r),this.addColCell(r,i,n)))},handleCellAddWithRowspan:function(n,i,u){for(var f,s,l,a=parseInt(t.getAttribute(this.cell,"rowspan"),10)-1,e=t.getParentElement(n.el,{nodeName:["TR"]}),c=n.el.tagName.toLowerCase(),v=this.table.ownerDocument,h=0;a>h;h++)if(f=this.correctColIndexForUnreals(this.idx.col,i+h),e=o(e,"tr"),e)if(f>0)switch(u){case"before":s=this.getRowCells(e);f>0&&this.map[i+h][this.idx.col].el!=s[f]&&f==s.length-1?r(s[f],this.createCells(c,1)):s[f].parentNode.insertBefore(this.createCells(c,1),s[f]);break;case"after":r(this.getRowCells(e)[f],this.createCells(c,1))}else e.insertBefore(this.createCells(c,1),e.firstChild);else l=v.createElement("tr"),l.appendChild(this.createCells(c,1)),this.table.appendChild(l)}};t.table={getCellsBetween:function(n,t){var r=new i(n);return r.getMapElsTo(t)},addCells:function(n,t){var r=new i(n);r.add(t)},removeCells:function(n,t){var r=new i(n);r.remove(t)},mergeCellsBetween:function(n,t){var r=new i(n);r.merge(t)},unmergeCell:function(n){var t=new i(n);t.unmerge()},orderSelectionEnds:function(n,t){var r=new i(n);return r.orderSelectionEnds(t)},indexOf:function(n){var t=new i(n);return t.setTableMap(),t.getMapIndex(n)},findCell:function(n,t){var r=new i(null,n);return r.getElementAtIndex(t)},findRowByCell:function(n){var t=new i(n);return t.getRowElementsByCell()},findColumnByCell:function(n){var t=new i(n);return t.getColumnElementsByCell()},canMerge:function(n,t){var r=new i(n);return r.canMerge(t)}}}(wysihtml5);wysihtml5.dom.query=function(n,t){var i,r,f,u,e=[];for(n.nodeType&&(n=[n]),r=0,f=n.length;f>r;r++)if(i=n[r].querySelectorAll(t),i)for(u=i.length;u--;e.unshift(i[u]));return e};wysihtml5.dom.compareDocumentPosition=function(){var n=document.documentElement;return n.compareDocumentPosition?function(n,t){return n.compareDocumentPosition(t)}:function(n,t){var o,s,i,r,u,f,e,h,c;if(o=9===n.nodeType?n:n.ownerDocument,s=9===t.nodeType?t:t.ownerDocument,n===t)return 0;if(n===t.ownerDocument)return 20;if(n.ownerDocument===t)return 10;if(o!==s)return 1;if(2===n.nodeType&&n.childNodes&&-1!==wysihtml5.lang.array(n.childNodes).indexOf(t))return 20;if(2===t.nodeType&&t.childNodes&&-1!==wysihtml5.lang.array(t.childNodes).indexOf(n))return 10;for(i=n,r=[],u=null;i;){if(i==t)return 10;r.push(i);i=i.parentNode}for(i=t,u=null;i;){if(i==n)return 20;if(f=wysihtml5.lang.array(r).indexOf(i),-1!==f)return e=r[f],h=wysihtml5.lang.array(e.childNodes).indexOf(r[f-1]),c=wysihtml5.lang.array(e.childNodes).indexOf(u),h>c?2:4;u=i;i=i.parentNode}return 1}}();wysihtml5.dom.unwrap=function(n){if(n.parentNode){for(;n.lastChild;)wysihtml5.dom.insert(n.lastChild).after(n);n.parentNode.removeChild(n)}};wysihtml5.dom.getPastedHtml=function(n){var t;return n.clipboardData&&(wysihtml5.lang.array(n.clipboardData.types).contains("text/html")?t=n.clipboardData.getData("text/html"):wysihtml5.lang.array(n.clipboardData.types).contains("text/plain")&&(t=wysihtml5.lang.string(n.clipboardData.getData("text/plain")).escapeHTML(!0,!0))),t};wysihtml5.dom.getPastedHtmlWithDiv=function(n,t){var u=n.selection.getBookmark(),r=n.element.ownerDocument,i=r.createElement("DIV");r.body.appendChild(i);i.style.width="1px";i.style.height="1px";i.style.overflow="hidden";i.setAttribute("contenteditable","true");i.focus();setTimeout(function(){n.selection.setBookmark(u);t(i.innerHTML);i.parentNode.removeChild(i)},0)};wysihtml5.quirks.cleanPastedHTML=function(){var n=function(n){var t=wysihtml5.lang.string(n).trim(),i=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return RegExp("^((?!^"+i+"$).)*$","i")},t=function(t,i){var u,f,r=wysihtml5.lang.object(t).clone(!0);for(u in r.tags)if(r.tags.hasOwnProperty(u)&&r.tags[u].keep_styles)for(f in r.tags[u].keep_styles)r.tags[u].keep_styles.hasOwnProperty(f)&&i[f]&&(r.tags[u].keep_styles[f]=n(i[f]));return r},i=function(n,t){var r,i,u;if(!n)return null;for(i=0,u=n.length;u>i;i++)if(n[i].condition||(r=n[i].set),n[i].condition&&n[i].condition.test(t))return n[i].set;return r};return function(n,r){var u,f={color:wysihtml5.dom.getStyle("color").from(r.referenceNode),fontSize:wysihtml5.dom.getStyle("font-size").from(r.referenceNode)},e=t(i(r.rules,n)||{},f);return u=wysihtml5.dom.parse(n,{rules:e,cleanUp:!0,context:r.referenceNode.ownerDocument,uneditableClass:r.uneditableClass,clearInternals:!0,unjoinNbsps:!0}),u}}();wysihtml5.quirks.ensureProperClearing=function(){var n=function(){var n=this;setTimeout(function(){var t=n.innerHTML.toLowerCase();("<p>&nbsp;<\/p>"==t||"<p>&nbsp;<\/p><p>&nbsp;<\/p>"==t)&&(n.innerHTML="")},0)};return function(t){wysihtml5.dom.observe(t.element,["cut","keydown"],n)}}(),function(n){var t="%7E";n.quirks.getCorrectInnerHTML=function(i){var f,e,o,s,r,u=i.innerHTML;if(-1===u.indexOf(t))return u;for(f=i.querySelectorAll("[href*='~'], [src*='~']"),r=0,s=f.length;s>r;r++)e=f[r].href||f[r].src,o=n.lang.string(e).replace("~").by(t),u=n.lang.string(u).replace(o).by(e);return u}}(wysihtml5),function(n){var t="wysihtml5-quirks-redraw";n.quirks.redraw=function(i){n.dom.addClass(i,t);n.dom.removeClass(i,t);try{var r=i.ownerDocument;r.execCommand("italic",!1,null);r.execCommand("italic",!1,null)}catch(u){}}}(wysihtml5);wysihtml5.quirks.tableCellsSelection=function(n,t){function c(){return r.observe(n,"mousedown",function(n){var t=wysihtml5.dom.getParentElement(n.target,{nodeName:["TD","TH"]});t&&l(t)}),i}function l(e){i.start=e;i.end=e;i.cells=[e];i.table=r.getParentElement(i.start,{nodeName:["TABLE"]});i.table&&(f(),r.addClass(e,u),s=r.observe(n,"mousemove",a),h=r.observe(n,"mouseup",v),t.fire("tableselectstart").fire("tableselectstart:composer"))}function f(){var t,i;if(n&&(t=n.querySelectorAll("."+u),t.length>0))for(i=0;i<t.length;i++)r.removeClass(t[i],u)}function e(n){for(var t=0;t<n.length;t++)r.addClass(n[t],u)}function a(n){var s,o=null,u=r.getParentElement(n.target,{nodeName:["TD","TH"]});u&&i.table&&i.start&&(o=r.getParentElement(u,{nodeName:["TABLE"]}),o&&o===i.table&&(f(),s=i.end,i.end=u,i.cells=r.table.getCellsBetween(i.start,u),i.cells.length>1&&t.composer.selection.deselect(),e(i.cells),i.end!==s&&t.fire("tableselectchange").fire("tableselectchange:composer")))}function v(){s.stop();h.stop();t.fire("tableselect").fire("tableselect:composer");setTimeout(function(){o()},0)}function o(){var u=r.observe(n.ownerDocument,"click",function(n){u.stop();r.getParentElement(n.target,{nodeName:["TABLE"]})!=i.table&&(f(),i.table=null,i.start=null,i.end=null,t.fire("tableunselect").fire("tableunselect:composer"))})}function y(n,u){i.start=n;i.end=u;i.table=r.getParentElement(i.start,{nodeName:["TABLE"]});selectedCells=r.table.getCellsBetween(i.start,i.end);e(selectedCells);o();t.fire("tableselect").fire("tableselect:composer")}var r=wysihtml5.dom,i={table:null,start:null,end:null,cells:null,select:y},u="wysiwyg-tmp-selected-cell",s=null,h=null;return c()},function(n){var t=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,i=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,r=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,u=/^#([0-9a-f])([0-9a-f])([0-9a-f])/i,f=function(n){return RegExp("(^|\\s|;)"+n+"\\s*:\\s*[^;$]+","gi")};n.quirks.styleParser={parseColor:function(e,o){var h,s,l,v=f(o),c=e.match(v),a=10;if(c){for(l=c.length;l--;)c[l]=n.lang.string(c[l].split(":")[1]).trim();if(h=c[c.length-1],t.test(h))s=h.match(t);else if(i.test(h))s=h.match(i);else if(r.test(h))s=h.match(r),a=16;else if(u.test(h))return s=h.match(u),s.shift(),s.push(1),n.lang.array(s).map(function(n,t){return 3>t?16*parseInt(n,16)+parseInt(n,16):parseFloat(n)});if(s)return s.shift(),s[3]||s.push(1),n.lang.array(s).map(function(n,t){return 3>t?parseInt(n,a):parseFloat(n)})}return!1},unparseColor:function(n,t){if(t){if("hex"==t)return n[0].toString(16).toUpperCase()+n[1].toString(16).toUpperCase()+n[2].toString(16).toUpperCase();if("hash"==t)return"#"+n[0].toString(16).toUpperCase()+n[1].toString(16).toUpperCase()+n[2].toString(16).toUpperCase();if("rgb"==t)return"rgb("+n[0]+","+n[1]+","+n[2]+")";if("rgba"==t)return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")";if("csv"==t)return n[0]+","+n[1]+","+n[2]+","+n[3]}return n[3]&&1!==n[3]?"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")":"rgb("+n[0]+","+n[1]+","+n[2]+")"},parseFontSize:function(t){var i=t.match(f("font-size"));return i?n.lang.string(i[i.length-1].split(":")[1]).trim():!1}}}(wysihtml5),function(n){function u(n){var t=0;if(n.parentNode)do t+=n.offsetTop||0,n=n.offsetParent;while(n);return t}function i(n,t){for(var i=0;t!==n;)if(i++,t=t.parentNode,!t)throw Error("not a descendant of ancestor!");return i}function r(n){if(!n.canSurroundContents())for(var t=n.commonAncestorContainer,r=i(t,n.startContainer),u=i(t,n.endContainer);!n.canSurroundContents();)r>u?(n.setStartBefore(n.startContainer),r=i(t,n.startContainer)):(n.setEndAfter(n.endContainer),u=i(t,n.endContainer))}var t=n.dom;n.Selection=Base.extend({constructor:function(n,t,i){window.rangy.init();this.editor=n;this.composer=n.composer;this.doc=this.composer.doc;this.contain=t;this.unselectableClass=i||!1},getBookmark:function(){var n=this.getRange();return n&&r(n),n&&n.cloneRange()},setBookmark:function(n){n&&this.setSelection(n)},setBefore:function(n){var t=rangy.createRange(this.doc);return t.setStartBefore(n),t.setEndBefore(n),this.setSelection(t)},setAfter:function(n){var t=rangy.createRange(this.doc);return t.setStartAfter(n),t.setEndAfter(n),this.setSelection(t)},selectNode:function(i,r){var u=rangy.createRange(this.doc),e=i.nodeType===n.ELEMENT_NODE,f="canHaveHTML"in i?i.canHaveHTML:"IMG"!==i.nodeName,s=e?i.innerHTML:i.data,o=""===s||s===n.INVISIBLE_SPACE,h=t.getStyle("display").from(i),c="block"===h||"list-item"===h;if(o&&e&&f&&!r)try{i.innerHTML=n.INVISIBLE_SPACE}catch(l){}f?u.selectNodeContents(i):u.selectNode(i);f&&o&&e?u.collapse(c):f&&o&&(u.setStartAfter(i),u.setEndAfter(i));this.setSelection(u)},getSelectedNode:function(n){var i,t;return n&&this.doc.selection&&"Control"===this.doc.selection.type&&(t=this.doc.selection.createRange(),t&&t.length)?t.item(0):(i=this.getSelection(this.doc),i.focusNode===i.anchorNode?i.focusNode:(t=this.getRange(this.doc),t?t.commonAncestorContainer:this.doc.body))},fixSelBorders:function(){var n=this.getRange();r(n);this.setSelection(n)},getSelectedOwnNodes:function(){for(var i=this.getOwnRanges(),r=[],n=0,t=i.length;t>n;n++)r.push(i[n].commonAncestorContainer||this.doc.body);return r},findNodesInSelection:function(t){for(var u,e=this.getOwnRanges(),r=[],i=0,f=e.length;f>i;i++)u=e[i].getNodes([1],function(i){return n.lang.array(t).contains(i.nodeName)}),r=r.concat(u);return r},containsUneditable:function(){for(var i=this.getOwnUneditables(),r=this.getSelection(),n=0,t=i.length;t>n;n++)if(r.containsNode(i[n]))return!0;return!1},deleteContents:function(){for(var t=this.getOwnRanges(),n=t.length;n--;)t[n].deleteContents();this.setSelection(t[0])},getPreviousNode:function(t,i){var f,r,u;return t||(f=this.getSelection(),t=f.anchorNode),t===this.contain?!1:(r=t.previousSibling,r===this.contain?!1:(r&&3!==r.nodeType&&1!==r.nodeType?r=this.getPreviousNode(r,i):r&&3===r.nodeType&&/^\s*$/.test(r.textContent)?r=this.getPreviousNode(r,i):i&&r&&1===r.nodeType&&!n.lang.array(["BR","HR","IMG"]).contains(r.nodeName)&&/^[\s]*$/.test(r.innerHTML)?r=this.getPreviousNode(r,i):r||t===this.contain||(u=t.parentNode,u!==this.contain&&(r=this.getPreviousNode(u,i))),r!==this.contain?r:!1))},getSelectionParentsByTag:function(){for(var r,i=this.getSelectedOwnNodes(),u=[],t=0,f=i.length;f>t;t++)r=i[t].nodeName&&"LI"===i[t].nodeName?i[t]:n.dom.getParentElement(i[t],{nodeName:["LI"]},!1,this.contain),r&&u.push(r);return u.length?u:null},getRangeToNodeEnd:function(){if(this.isCollapsed()){var t=this.getRange(),i=t.startContainer,r=t.startOffset,n=rangy.createRange(this.doc);return n.selectNodeContents(i),n.setStart(i,r),n}},caretIsLastInSelection:function(){var n=(rangy.createRange(this.doc),this.getSelection(),this.getRangeToNodeEnd().cloneContents()),t=n.textContent;return/^\s*$/.test(t)},caretIsFirstInSelection:function(){var t=rangy.createRange(this.doc),i=this.getSelection(),u=this.getRange(),r=u.startContainer;return r.nodeType===n.TEXT_NODE?this.isCollapsed()&&r.nodeType===n.TEXT_NODE&&/^\s*$/.test(r.data.substr(0,u.startOffset)):(t.selectNodeContents(this.getRange().commonAncestorContainer),t.collapse(!0),this.isCollapsed()&&(t.startContainer===i.anchorNode||t.endContainer===i.anchorNode)&&t.startOffset===i.anchorOffset)},caretIsInTheBeginnig:function(t){var r=this.getSelection(),i=r.anchorNode,u=r.anchorOffset;return t?0===u&&(i.nodeName&&i.nodeName===t.toUpperCase()||n.dom.getParentElement(i.parentNode,{nodeName:t},1)):0===u&&!this.getPreviousNode(i,!0)},caretIsBeforeUneditable:function(){var i,t,n,r,u=this.getSelection(),f=u.anchorNode,e=u.anchorOffset;if(0===e&&(i=this.getPreviousNode(f,!0),i))for(t=this.getOwnUneditables(),n=0,r=t.length;r>n;n++)if(i===t[n])return t[n];return!1},executeAndRestoreRangy:function(n){var i=this.doc.defaultView||this.doc.parentWindow,t=rangy.saveSelection(i);if(t)try{n()}catch(r){setTimeout(function(){throw r;},0)}else n();rangy.restoreSelection(t)},executeAndRestore:function(i,r){var u,h,l,a,p,v,s,e,c,o=this.doc.body,b=r&&o.scrollTop,k=r&&o.scrollLeft,y="_wysihtml5-temp-placeholder",w='<span class="'+y+'">'+n.INVISIBLE_SPACE+"<\/span>",f=this.getRange(!0);if(!f)return i(o,o),void 0;f.collapsed||(s=f.cloneRange(),v=s.createContextualFragment(w),s.collapse(!1),s.insertNode(v),s.detach());p=f.createContextualFragment(w);f.insertNode(p);v&&(u=this.contain.querySelectorAll("."+y),f.setStartBefore(u[0]),f.setEndAfter(u[u.length-1]));this.setSelection(f);try{i(f.startContainer,f.endContainer)}catch(d){setTimeout(function(){throw d;},0)}if(u=this.contain.querySelectorAll("."+y),u&&u.length)for(e=rangy.createRange(this.doc),l=u[0].nextSibling,u.length>1&&(a=u[u.length-1].previousSibling),a&&l?(e.setStartBefore(l),e.setEndAfter(a)):(h=this.doc.createTextNode(n.INVISIBLE_SPACE),t.insert(h).after(u[0]),e.setStartBefore(h),e.setEndAfter(h)),this.setSelection(e),c=u.length;c--;)u[c].parentNode.removeChild(u[c]);else this.contain.focus();r&&(o.scrollTop=b,o.scrollLeft=k);try{u.parentNode.removeChild(u)}catch(g){}},set:function(n,t){var i=rangy.createRange(this.doc);i.setStart(n,t||0);this.setSelection(i)},insertHTML:function(n){var i,t=(rangy.createRange(this.doc),this.doc.createElement("DIV")),r=this.doc.createDocumentFragment();for(t.innerHTML=n,i=t.lastChild;t.firstChild;)r.appendChild(t.firstChild);this.insertNode(r);i&&this.setAfter(i)},insertNode:function(n){var t=this.getRange();t&&t.insertNode(n)},surround:function(n){var t,i,r=this.getOwnRanges(),u=[];if(0==r.length)return u;for(i=r.length;i--;){t=this.doc.createElement(n.nodeName);u.push(t);n.className&&(t.className=n.className);n.cssStyle&&t.setAttribute("style",n.cssStyle);try{r[i].surroundContents(t);this.selectNode(t)}catch(f){t.appendChild(r[i].extractContents());r[i].insertNode(t)}}return u},deblockAndSurround:function(t){var r,f,i,u=this.doc.createElement("div"),e=rangy.createRange(this.doc);if(u.className=t.className,this.composer.commands.exec("formatBlock",t.nodeName,t.className),r=this.contain.querySelectorAll("."+t.className),r[0])for(r[0].parentNode.insertBefore(u,r[0]),e.setStartBefore(r[0]),e.setEndAfter(r[r.length-1]),f=e.extractContents();f.firstChild;)if(i=f.firstChild,1==i.nodeType&&n.dom.hasClass(i,t.className)){for(;i.firstChild;)u.appendChild(i.firstChild);"BR"!==i.nodeName&&u.appendChild(this.doc.createElement("br"));f.removeChild(i)}else u.appendChild(i);else u=null;return u},scrollIntoView:function(){var r,t=this.doc,f=t.documentElement.scrollHeight>t.documentElement.offsetHeight,i=t._wysihtml5ScrollIntoViewElement=t._wysihtml5ScrollIntoViewElement||function(){var i=t.createElement("span");return i.innerHTML=n.INVISIBLE_SPACE,i}();f&&(this.insertNode(i),r=u(i),i.parentNode.removeChild(i),r>=t.body.scrollTop+t.documentElement.offsetHeight-5&&(t.body.scrollTop=r))},selectLine:function(){n.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var t=this.doc.defaultView,n=t.getSelection();n.modify("move","left","lineboundary");n.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,f,n,r,u,t=this.doc.selection.createRange(),i=t.boundingTop,o=this.doc.body.scrollWidth;if(t.moveToPoint){for(0===i&&(n=this.doc.createElement("span"),this.insertNode(n),i=n.offsetTop,n.parentNode.removeChild(n)),i+=1,r=-10;o>r;r+=2)try{t.moveToPoint(r,i);break}catch(s){}for(e=i,f=this.doc.selection.createRange(),u=o;u>=0;u--)try{f.moveToPoint(u,e);break}catch(h){}t.setEndPoint("EndToEnd",f);t.select()}},getText:function(){var n=this.getSelection();return n?""+n:""},getNodes:function(n,t){var i=this.getRange();return i?i.getNodes([n],t):[]},fixRangeOverflow:function(n){var t,i;this.contain&&this.contain.firstChild&&n&&(t=n.compareNode(this.contain),2!==t?(1===t&&n.setStartBefore(this.contain.firstChild),0===t&&n.setEndAfter(this.contain.lastChild),3===t&&(n.setStartBefore(this.contain.firstChild),n.setEndAfter(this.contain.lastChild))):this._detectInlineRangeProblems(n)&&(i=n.endContainer.previousElementSibling,i&&n.setEnd(i,this._endOffsetForNode(i))))},_endOffsetForNode:function(n){var t=document.createRange();return t.selectNodeContents(n),t.endOffset},_detectInlineRangeProblems:function(n){var i=t.compareDocumentPosition(n.startContainer,n.endContainer);return 0==n.endOffset&&4&i},getRange:function(n){var t=this.getSelection(),i=t&&t.rangeCount&&t.getRangeAt(0);return n!==!0&&this.fixRangeOverflow(i),i},getOwnUneditables:function(){var i=t.query(this.contain,"."+this.unselectableClass),r=t.query(i,"."+this.unselectableClass);return n.lang.array(i).without(r)},getOwnRanges:function(){var f,i,r,u,o,t,s,n=[],e=this.getRange();if(e&&n.push(e),this.unselectableClass&&this.contain&&e&&(i=this.getOwnUneditables(),i.length>0))for(u=0,o=i.length;o>u;u++)for(f=[],t=0,s=n.length;s>t;t++){if(n[t])switch(n[t].compareNode(i[u])){case 2:break;case 3:r=n[t].cloneRange();r.setEndBefore(i[u]);f.push(r);r=n[t].cloneRange();r.setStartAfter(i[u]);f.push(r);break;default:f.push(n[t])}n=f}return n},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(n){var t=this.doc.defaultView||this.doc.parentWindow,i=rangy.getSelection(t);return i.setSingleRange(n)},createRange:function(){return rangy.createRange(this.doc)},isCollapsed:function(){return this.getSelection().isCollapsed},getHtml:function(){return this.getSelection().toHtml()},isEndToEndInNode:function(t){var f=this.getRange(),i=f.commonAncestorContainer,r=f.startContainer,u=f.endContainer;if((i.nodeType===n.TEXT_NODE&&(i=i.parentNode),r.nodeType===n.TEXT_NODE&&!/^\s*$/.test(r.data.substr(f.startOffset)))||u.nodeType===n.TEXT_NODE&&!/^\s*$/.test(u.data.substr(f.endOffset)))return!1;for(;r&&r!==i;){if(r.nodeType!==n.TEXT_NODE&&!n.dom.contains(i,r)||n.dom.domNode(r).prev({ignoreBlankTexts:!0}))return!1;r=r.parentNode}for(;u&&u!==i;){if(u.nodeType!==n.TEXT_NODE&&!n.dom.contains(i,u)||n.dom.domNode(u).next({ignoreBlankTexts:!0}))return!1;u=u.parentNode}return n.lang.array(t).contains(i.nodeName)?i:!1},deselect:function(){var n=this.getSelection();n&&n.removeAllRanges()}})}(wysihtml5),function(n,t){function a(n,t,i){if(!n.className)return!1;var r=n.className.match(i)||[];return r[r.length-1]===t}function v(n,t){return!n.getAttribute||!n.getAttribute("style")?!1:(n.getAttribute("style").match(t),n.getAttribute("style").match(t)?!0:!1)}function u(n,t,i){n.getAttribute("style")?(e(n,i),n.getAttribute("style")&&!/^\s*$/.test(n.getAttribute("style"))?n.setAttribute("style",t+";"+n.getAttribute("style")):n.setAttribute("style",t)):n.setAttribute("style",t)}function y(n,t,i){n.className?(f(n,i),n.className+=" "+t):n.className=t}function f(n,t){n.className&&(n.className=n.className.replace(t,""))}function e(n,t){var i,r,u=[];if(n.getAttribute("style")){for(i=n.getAttribute("style").split(";"),r=i.length;r--;)i[r].match(t)||/^\s*$/.test(i[r])||u.push(i[r]);u.length?n.setAttribute("style",u.join(";")):n.removeAttribute("style")}}function o(n,t){var u,i,o,r=[],e=t.split(";"),f=n.getAttribute("style");if(f){for(f=f.replace(/\s/gi,"").toLowerCase(),r.push(RegExp("(^|\\s|;)"+t.replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi")),u=e.length;u-->0;)/^\s*$/.test(e[u])||r.push(RegExp("(^|\\s|;)"+e[u].replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(i=0,o=r.length;o>i;i++)if(f.match(r[i]))return r[i]}return!1}function p(i,r,u,f){return u?o(i,u):f?n.dom.hasClass(i,f):t.dom.arrayContains(r,i.tagName.toLowerCase())}function s(n,t,i,r){for(var u=n.length;u--;)if(!p(n[u],t,i,r))return!1;return n.length?!0:!1}function w(n,t,i){var r=o(n,t);return r?(e(n,r),"remove"):(u(n,t,i),"change")}function b(n,t){return n.className.replace(l," ")==t.className.replace(l," ")}function k(n){for(var t=n.parentNode;n.firstChild;)t.insertBefore(n.firstChild,n);t.removeChild(n)}function d(n,t){if(n.attributes.length!=t.attributes.length)return!1;for(var i,r,u,f=0,e=n.attributes.length;e>f;++f)if((i=n.attributes[f],u=i.name,"class"!=u)&&((r=t.attributes.getNamedItem(u),i.specified!=r.specified)||i.specified&&i.nodeValue!==r.nodeValue))return!1;return!0}function h(n,i){return t.dom.isCharacterDataNode(n)?0==i?!!n.previousSibling:i==n.length?!!n.nextSibling:!0:i>0&&i<n.childNodes.length}function i(n,r,u,f){var e,o;if(t.dom.isCharacterDataNode(r)&&(0==u?(u=t.dom.getNodeIndex(r),r=r.parentNode):u==r.length?(u=t.dom.getNodeIndex(r)+1,r=r.parentNode):e=t.dom.splitDataNode(r,u)),!(e||f&&r===f)){for(e=r.cloneNode(!1),e.id&&e.removeAttribute("id");o=r.childNodes[u];)e.appendChild(o);t.dom.insertAfter(e,r)}return r==n?e:i(n,e.parentNode,t.dom.getNodeIndex(e),f)}function r(t){this.isElementMerge=t.nodeType==n.ELEMENT_NODE;this.firstTextNode=this.isElementMerge?t.lastChild:t;this.textNodes=[this.firstTextNode]}function c(n,t,i,r,u,f,e){this.tagNames=n||[g];this.cssClass=t||(t===!1?!1:"");this.similarClassRegExp=i;this.cssStyle=u||"";this.similarStyleRegExp=f;this.normalize=r;this.applyToAnyTagName=!1;this.container=e}var g="span",l=/\s+/g;r.prototype={doMerge:function(){for(var i,t,r,f=[],n=0,u=this.textNodes.length;u>n;++n)i=this.textNodes[n],t=i.parentNode,f[n]=i.data,n&&(t.removeChild(i),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=r=f.join(""),r},getLength:function(){for(var n=this.textNodes.length,t=0;n--;)t+=this.textNodes[n].length;return t},toString:function(){for(var i=[],n=0,t=this.textNodes.length;t>n;++n)i[n]="'"+this.textNodes[n].data+"'";return"[Merge("+i.join(",")+")]"}};c.prototype={getAncestorWithClass:function(i){for(var r;i;){if(r=this.cssClass?a(i,this.cssClass,this.similarClassRegExp):""!==this.cssStyle?!1:!0,i.nodeType==n.ELEMENT_NODE&&"false"!=i.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&r)return i;i=i.parentNode}return!1},getAncestorWithStyle:function(i){for(var r;i;){if(r=this.cssStyle?v(i,this.similarStyleRegExp):!1,i.nodeType==n.ELEMENT_NODE&&"false"!=i.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&r)return i;i=i.parentNode}return!1},getMatchingAncestor:function(n){var t=this.getAncestorWithClass(n),i=!1;return t?this.cssStyle&&(i="class"):(t=this.getAncestorWithStyle(n),t&&(i="style")),{element:t,type:i}},postApply:function(n,t){for(var i,f,s,c,a=n[0],e=n[n.length-1],o=[],l=a,v=e,y=0,p=e.length,u=0,h=n.length;h>u;++u)f=n[u],s=null,f&&f.parentNode&&(s=this.getAdjacentMergeableTextNode(f.parentNode,!1)),s?(i||(i=new r(s),o.push(i)),i.textNodes.push(f),f===a&&(l=i.firstTextNode,y=l.length),f===e&&(v=i.firstTextNode,p=i.getLength())):i=null;if(e&&e.parentNode&&(c=this.getAdjacentMergeableTextNode(e.parentNode,!0),c&&(i||(i=new r(e),o.push(i)),i.textNodes.push(c))),o.length){for(u=0,h=o.length;h>u;++u)o[u].doMerge();t.setStart(l,y);t.setEnd(v,p)}},getAdjacentMergeableTextNode:function(t,i){var r,u=t.nodeType==n.TEXT_NODE,e=u?t.parentNode:t,f=i?"nextSibling":"previousSibling";if(u){if(r=t[f],r&&r.nodeType==n.TEXT_NODE)return r}else if(r=e[f],r&&this.areElementsMergeable(t,r))return r[i?"firstChild":"lastChild"];return null},areElementsMergeable:function(n,i){return t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(i.tagName||"").toLowerCase())&&b(n,i)&&d(n,i)},createContainer:function(n){var t=n.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),this.cssStyle&&t.setAttribute("style",this.cssStyle),t},applyToTextNode:function(n){var r,i=n.parentNode;1==i.childNodes.length&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())?(this.cssClass&&y(i,this.cssClass,this.similarClassRegExp),this.cssStyle&&u(i,this.cssStyle,this.similarStyleRegExp)):(r=this.createContainer(t.dom.getDocument(n)),n.parentNode.insertBefore(r,n),r.appendChild(n))},isRemovable:function(i){return t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&""===n.lang.string(i.className).trim()&&(!i.getAttribute("style")||""===n.lang.string(i.getAttribute("style")).trim())},undoToTextNode:function(n,t,r,u){var o,s=r?!1:!0,e=r||u,c=!1;t.containsNode(e)||(o=t.cloneRange(),o.selectNode(e),o.isPointInRange(t.endContainer,t.endOffset)&&h(t.endContainer,t.endOffset)&&(i(e,t.endContainer,t.endOffset,this.container),t.setEndAfter(e)),o.isPointInRange(t.startContainer,t.startOffset)&&h(t.startContainer,t.startOffset)&&(e=i(e,t.startContainer,t.startOffset,this.container)));!s&&this.similarClassRegExp&&f(e,this.similarClassRegExp);s&&this.similarStyleRegExp&&(c="change"===w(e,this.cssStyle,this.similarStyleRegExp));this.isRemovable(e)&&!c&&k(e)},applyToRange:function(t){for(var r,e,u,f,o,i=t.length;i--;){if(r=t[i].getNodes([n.TEXT_NODE]),!r.length)try{return e=this.createContainer(t[i].endContainer.ownerDocument),t[i].surroundContents(e),this.selectNode(t[i],e),void 0}catch(s){}if(t[i].splitBoundaries(),r=t[i].getNodes([n.TEXT_NODE]),r.length){for(f=0,o=r.length;o>f;++f)u=r[f],this.getMatchingAncestor(u).element||this.applyToTextNode(u);t[i].setStart(r[0],0);u=r[r.length-1];t[i].setEnd(u,u.length);this.normalize&&this.postApply(r,t[i])}}},undoToRange:function(t){for(var r,u,f,h,e,o,s,i=t.length;i--;){for(r=t[i].getNodes([n.TEXT_NODE]),r.length?(t[i].splitBoundaries(),r=t[i].getNodes([n.TEXT_NODE])):(h=t[i].endContainer.ownerDocument,e=h.createTextNode(n.INVISIBLE_SPACE),t[i].insertNode(e),t[i].selectNode(e),r=[e]),o=0,s=r.length;s>o;++o)t[i].isValid()&&(u=r[o],f=this.getMatchingAncestor(u),"style"===f.type?this.undoToTextNode(u,t[i],!1,f.element):f.element&&this.undoToTextNode(u,t[i],f.element));1==s?this.selectNode(t[i],r[0]):(t[i].setStart(r[0],0),u=r[r.length-1],t[i].setEnd(u,u.length),this.normalize&&this.postApply(r,t[i]))}},selectNode:function(t,i){var r=i.nodeType===n.ELEMENT_NODE,e="canHaveHTML"in i?i.canHaveHTML:!0,f=r?i.innerHTML:i.data,u=""===f||f===n.INVISIBLE_SPACE;if(u&&r&&e)try{i.innerHTML=n.INVISIBLE_SPACE}catch(o){}t.selectNodeContents(i);u&&r?t.collapse(!1):u&&(t.setStartAfter(i),t.setEndAfter(i))},getTextSelectedByRange:function(n,t){var i,u,r=t.cloneRange();return r.selectNodeContents(n),i=r.intersection(t),u=i?""+i:"",r.detach(),u},isAppliedToRange:function(t){for(var i,u,e,s,h,o=[],r="full",f=t.length;f--;){if(u=t[f].getNodes([n.TEXT_NODE]),!u.length)return i=this.getMatchingAncestor(t[f].startContainer).element,i?{elements:[i],coverage:r}:!1;for(e=0,s=u.length;s>e;++e)h=this.getTextSelectedByRange(u[e],t[f]),i=this.getMatchingAncestor(u[e]).element,i&&""!=h?(o.push(i),1===n.dom.getTextNodes(i,!0).length?r="full":"full"===r&&(r="inline")):i||(r="partial")}return o.length?{elements:o,coverage:r}:!1},toggleRange:function(n){var i,t=this.isAppliedToRange(n);t?"full"===t.coverage?this.undoToRange(n):"inline"===t.coverage?(i=s(t.elements,this.tagNames,this.cssStyle,this.cssClass),this.undoToRange(n),i||this.applyToRange(n)):(s(t.elements,this.tagNames,this.cssStyle,this.cssClass)||this.undoToRange(n),this.applyToRange(n)):this.applyToRange(n)}};n.selection.HTMLApplier=c}(wysihtml5,rangy);wysihtml5.Commands=Base.extend({constructor:function(n){this.editor=n;this.composer=n.composer;this.doc=this.composer.doc},support:function(n){return wysihtml5.browser.supportsCommand(this.doc,n)},exec:function(n,t){var i=wysihtml5.commands[n],u=wysihtml5.lang.array(arguments).get(),f=i&&i.exec,r=null;if(this.editor.fire("beforecommand:composer"),f)u.unshift(this.composer),r=f.apply(i,u);else try{r=this.doc.execCommand(n,!1,t)}catch(e){}return this.editor.fire("aftercommand:composer"),r},state:function(n){var t=wysihtml5.commands[n],i=wysihtml5.lang.array(arguments).get(),r=t&&t.state;if(r)return i.unshift(this.composer),r.apply(t,i);try{return this.doc.queryCommandState(n)}catch(u){return!1}},stateValue:function(n){var t=wysihtml5.commands[n],i=wysihtml5.lang.array(arguments).get(),r=t&&t.stateValue;return r?(i.unshift(this.composer),r.apply(t,i)):!1}});wysihtml5.commands.bold={exec:function(n,t){wysihtml5.commands.formatInline.execWithToggle(n,t,"b")},state:function(n,t){return wysihtml5.commands.formatInline.state(n,t,"b")}},function(n){function u(u,f){var s,h,e,y,p,c,l,a,o,w=u.doc,b="_wysihtml5-temp-"+ +new Date,v=0;for(n.commands.formatInline.exec(u,t,r,b,/non-matching-class/g,t,t,!0,!0),h=w.querySelectorAll(r+"."+b),s=h.length;s>v;v++){e=h[v];e.removeAttribute("class");for(o in f)"text"!==o&&e.setAttribute(o,f[o])}c=e;1===s&&(l=i.getTextContent(e),y=!!e.querySelector("*"),p=""===l||l===n.INVISIBLE_SPACE,!y&&p&&(i.setTextContent(e,f.text||e.href),a=w.createTextNode(" "),u.selection.setAfter(e),i.insert(a).after(e),c=a));u.selection.setAfter(c)}function f(n,t,i){for(var f,e,u,r=t.length;r--;){for(f=t[r].attributes,e=f.length;e--;)t[r].removeAttribute(f.item(e).name);for(u in i)i.hasOwnProperty(u)&&t[r].setAttribute(u,i[u])}}var t,r="A",i=n.dom;n.commands.createLink={exec:function(n,t,i){var r=this.state(n,t);r?n.selection.executeAndRestore(function(){f(n,r,i)}):(i="object"==typeof i?i:{href:i},u(n,i))},state:function(t,i){return n.commands.formatInline.state(t,i,"A")}}}(wysihtml5),function(n){function i(n,i){for(var r,u,e,o=i.length,f=0;o>f;f++)r=i[f],u=t.getParentElement(r,{nodeName:"code"}),e=t.getTextContent(r),e.match(t.autoLink.URL_REG_EXP)&&!u?u=t.renameElement(r,"code"):t.replaceWithChildNodes(r)}var t=n.dom;n.commands.removeLink={exec:function(n,t){var r=this.state(n,t);r&&n.selection.executeAndRestore(function(){i(n,r)})},state:function(t,i){return n.commands.formatInline.state(t,i,"A")}}}(wysihtml5),function(n){var t=/wysiwyg-font-size-[0-9a-z\-]+/g;n.commands.fontSize={exec:function(i,r,u){n.commands.formatInline.execWithToggle(i,r,"span","wysiwyg-font-size-"+u,t)},state:function(i,r,u){return n.commands.formatInline.state(i,r,"span","wysiwyg-font-size-"+u,t)}}}(wysihtml5),function(n){var t=/(\s|^)font-size\s*:\s*[^;\s]+;?/gi;n.commands.fontSizeStyle={exec:function(i,r,u){u="object"==typeof u?u.size:u;/^\s*$/.test(u)||n.commands.formatInline.execWithToggle(i,r,"span",!1,!1,"font-size:"+u,t)},state:function(i,r){return n.commands.formatInline.state(i,r,"span",!1,!1,"font-size",t)},stateValue:function(t,i){var u,r=this.state(t,i);return r&&n.lang.object(r).isArray()&&(r=r[0]),r&&(u=r.getAttribute("style"),u)?n.quirks.styleParser.parseFontSize(u):!1}}}(wysihtml5),function(n){var t=/wysiwyg-color-[0-9a-z]+/g;n.commands.foreColor={exec:function(i,r,u){n.commands.formatInline.execWithToggle(i,r,"span","wysiwyg-color-"+u,t)},state:function(i,r,u){return n.commands.formatInline.state(i,r,"span","wysiwyg-color-"+u,t)}}}(wysihtml5),function(n){var t=/(\s|^)color\s*:\s*[^;\s]+;?/gi;n.commands.foreColorStyle={exec:function(i,r,u){var e,f=n.quirks.styleParser.parseColor("object"==typeof u?"color:"+u.color:"color:"+u,"color");f&&(e="color: rgb("+f[0]+","+f[1]+","+f[2]+");",1!==f[3]&&(e+="color: rgba("+f[0]+","+f[1]+","+f[2]+","+f[3]+");"),n.commands.formatInline.execWithToggle(i,r,"span",!1,!1,e,t))},state:function(i,r){return n.commands.formatInline.state(i,r,"span",!1,!1,"color",t)},stateValue:function(t,i,r){var f,u=this.state(t,i);return u&&n.lang.object(u).isArray()&&(u=u[0]),u&&(f=u.getAttribute("style"),f&&f)?(val=n.quirks.styleParser.parseColor(f,"color"),n.quirks.styleParser.unparseColor(val,r)):!1}}}(wysihtml5),function(n){var t=/(\s|^)background-color\s*:\s*[^;\s]+;?/gi;n.commands.bgColorStyle={exec:function(i,r,u){var e,f=n.quirks.styleParser.parseColor("object"==typeof u?"background-color:"+u.color:"background-color:"+u,"background-color");f&&(e="background-color: rgb("+f[0]+","+f[1]+","+f[2]+");",1!==f[3]&&(e+="background-color: rgba("+f[0]+","+f[1]+","+f[2]+","+f[3]+");"),n.commands.formatInline.execWithToggle(i,r,"span",!1,!1,e,t))},state:function(i,r){return n.commands.formatInline.state(i,r,"span",!1,!1,"background-color",t)},stateValue:function(t,i,r){var f,u=this.state(t,i),e=!1;return u&&n.lang.object(u).isArray()&&(u=u[0]),u&&(f=u.getAttribute("style"),f)?(e=n.quirks.styleParser.parseColor(f,"background-color"),n.quirks.styleParser.unparseColor(e,r)):!1}}}(wysihtml5),function(n){function f(t,i,u){t.className?(r(t,u),t.className=n.lang.string(t.className+" "+i).trim()):t.className=i}function e(t,i,r){u(t,r);t.getAttribute("style")?t.setAttribute("style",n.lang.string(t.getAttribute("style")+" "+i).trim()):t.setAttribute("style",i)}function r(t,i){var r=i.test(t.className);return t.className=t.className.replace(i,""),""==n.lang.string(t.className).trim()&&t.removeAttribute("class"),r}function u(t,i){var r=i.test(t.getAttribute("style"));return t.setAttribute("style",(t.getAttribute("style")||"").replace(i,"")),""==n.lang.string(t.getAttribute("style")||"").trim()&&t.removeAttribute("style"),r}function o(n){var t=n.lastChild;t&&s(t)&&t.parentNode.removeChild(t)}function s(n){return"BR"===n.nodeName}function h(t,i){var u,r,f;for(t.selection.isCollapsed()&&t.selection.selectLine(),u=t.selection.surround(i),r=0,f=u.length;f>r;r++)n.dom.lineBreaks(u[r]).remove(),o(u[r])}function c(t){return!!n.lang.string(t.className).trim()}function l(t){return!!n.lang.string(t.getAttribute("style")||"").trim()}var t=n.dom,i=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"];n.commands.formatBlock={exec:function(o,s,a,v,y,p,w){var d,nt,tt,it,k,b=(o.doc,this.state(o,s,a,v,y,p,w)),rt=o.config.useLineBreaks,g=rt?"DIV":"P";return a="string"==typeof a?a.toUpperCase():a,b.length?(o.selection.executeAndRestoreRangy(function(){for(var f,e,i=b.length;i--;){if(y&&(nt=r(b[i],y)),w&&(it=u(b[i],w)),(it||nt)&&null===a&&b[i].nodeName!=g)return;f=c(b[i]);e=l(b[i]);f||e||!rt&&"P"!==a?t.renameElement(b[i],"P"===a?"DIV":g):(n.dom.lineBreaks(b[i]).add(),t.replaceWithChildNodes(b[i]))}}),void 0):((null!==a&&!n.lang.array(i).contains(a)||(d=o.selection.findNodesInSelection(i).concat(o.selection.getSelectedOwnNodes()),o.selection.executeAndRestoreRangy(function(){for(var n=d.length;n--;)k=t.getParentElement(d[n],{nodeName:i}),k==o.element&&(k=null),k&&(a&&(k=t.renameElement(k,a)),v&&f(k,v,y),p&&e(k,p,w),tt=!0)}),!tt))&&h(o,{nodeName:a||g,className:v||null,cssStyle:p||null}),void 0)},state:function(i,r,u,f,e,o,s){var h,c,a,v=i.selection.getSelectedOwnNodes(),l=[];for(u="string"==typeof u?u.toUpperCase():u,c=0,a=v.length;a>c;c++)h=t.getParentElement(v[c],{nodeName:u,className:f,classRegExp:e,cssStyle:o,styleRegExp:s}),h&&-1==n.lang.array(l).indexOf(h)&&l.push(h);return 0==l.length?!1:l}}}(wysihtml5);wysihtml5.commands.formatCode={exec:function(n,t,i){var r,f,e,u=this.state(n);u?n.selection.executeAndRestore(function(){r=u.querySelector("code");wysihtml5.dom.replaceWithChildNodes(u);r&&wysihtml5.dom.replaceWithChildNodes(r)}):(f=n.selection.getRange(),e=f.extractContents(),u=n.doc.createElement("pre"),r=n.doc.createElement("code"),i&&(r.className=i),u.appendChild(r),r.appendChild(e),f.insertNode(u),n.selection.selectNode(u))},state:function(n){var t=n.selection.getSelectedNode();return t&&t.nodeName&&"PRE"==t.nodeName&&t.firstChild&&t.firstChild.nodeName&&"CODE"==t.firstChild.nodeName?t:wysihtml5.dom.getParentElement(t,{nodeName:"CODE"})&&wysihtml5.dom.getParentElement(t,{nodeName:"PRE"})}},function(n){function u(n){var t=r[n];return t?[n.toLowerCase(),t.toLowerCase()]:[n.toLowerCase()]}function i(i,r,f,e,o,s){var h=i;return r&&(h+=":"+r),e&&(h+=":"+e),t[h]||(t[h]=new n.selection.HTMLApplier(u(i),r,f,!0,e,o,s)),t[h]}var r={strong:"b",em:"i",b:"strong",i:"em"},t={};n.commands.formatInline={exec:function(n,t,r,u,f,e,o,s,h){var l=n.selection.createRange(),c=n.selection.getOwnRanges();return c&&0!=c.length?(n.selection.getSelection().removeAllRanges(),i(r,u,f,e,o,n.element).toggleRange(c),s?h||n.cleanUp():(l.setStart(c[0].startContainer,c[0].startOffset),l.setEnd(c[c.length-1].endContainer,c[c.length-1].endOffset),n.selection.setSelection(l),n.selection.executeAndRestore(function(){h||n.cleanUp()},!0,!0)),void 0):!1},execWithToggle:function(t,i,r,u,f,e,o){var s,h=this;this.state(t,i,r,u,f,e,o)&&t.selection.isCollapsed()&&!t.selection.caretIsLastInSelection()&&!t.selection.caretIsFirstInSelection()?(s=h.state(t,i,r,u,f)[0],t.selection.executeAndRestoreRangy(function(){s.parentNode;t.selection.selectNode(s,!0);n.commands.formatInline.exec(t,i,r,u,f,e,o,!0,!0)})):this.state(t,i,r,u,f,e,o)&&!t.selection.isCollapsed()?t.selection.executeAndRestoreRangy(function(){n.commands.formatInline.exec(t,i,r,u,f,e,o,!0,!0)}):n.commands.formatInline.exec(t,i,r,u,f,e,o)},state:function(t,u,f,e,o,s,h){var c,l,a=t.doc,v=r[f]||f;return n.dom.hasElementWithTagName(a,f)||n.dom.hasElementWithTagName(a,v)?e&&!n.dom.hasElementWithClassName(a,e)?!1:(c=t.selection.getOwnRanges(),c&&0!==c.length?(l=i(f,e,o,s,h,t.element).isAppliedToRange(c),l&&l.elements?l.elements:!1):!1):!1}}}(wysihtml5),function(n){n.commands.insertBlockQuote={exec:function(t,i){var u=this.state(t,i),r=t.selection.isEndToEndInNode(["H1","H2","H3","H4","H5","H6","P"]);t.selection.executeAndRestore(function(){if(u)t.config.useLineBreaks&&n.dom.lineBreaks(u).add(),n.dom.unwrap(u);else if(t.selection.isCollapsed()&&t.selection.selectLine(),r){var i=r.ownerDocument.createElement("blockquote");n.dom.insert(i).after(r);i.appendChild(r)}else t.selection.surround({nodeName:"blockquote"})})},state:function(t){var r=t.selection.getSelectedNode(),i=n.dom.getParentElement(r,{nodeName:"BLOCKQUOTE"},!1,t.element);return i?i:!1}}}(wysihtml5);wysihtml5.commands.insertHTML={exec:function(n,t,i){n.commands.support(t)?n.doc.execCommand(t,!1,i):n.selection.insertHTML(i)},state:function(){return!1}},function(n){var t="IMG";n.commands.insertImage={exec:function(i,r,u){var s,f,h,e,o;if(u="object"==typeof u?u:{src:u},s=i.doc,f=this.state(i),f)return i.selection.setBefore(f),e=f.parentNode,e.removeChild(f),n.dom.removeEmptyTextNodes(e),"A"!==e.nodeName||e.firstChild||(i.selection.setAfter(e),e.parentNode.removeChild(e)),n.quirks.redraw(i.element),void 0;f=s.createElement(t);for(o in u)f.setAttribute("className"===o?"class":o,u[o]);i.selection.insertNode(f);n.browser.hasProblemsSettingCaretAfterImg()?(h=s.createTextNode(n.INVISIBLE_SPACE),i.selection.insertNode(h),i.selection.setAfter(h)):i.selection.setAfter(f)},state:function(i){var r,u,f,e=i.doc;return n.dom.hasElementWithTagName(e,t)?(r=i.selection.getSelectedNode(),r?r.nodeName===t?r:r.nodeType!==n.ELEMENT_NODE?!1:(u=i.selection.getText(),u=n.lang.string(u).trim(),u?!1:(f=i.selection.getNodes(n.ELEMENT_NODE,function(n){return"IMG"===n.nodeName}),1!==f.length?!1:f[0])):!1):!1}}}(wysihtml5),function(n){var t="<br>"+(n.browser.needsSpaceAfterLineBreak()?" ":"");n.commands.insertLineBreak={exec:function(i,r){i.commands.support(r)?(i.doc.execCommand(r,!1,null),n.browser.autoScrollsToCaret()||i.selection.scrollIntoView()):i.commands.exec("insertHTML",t)},state:function(){return!1}}}(wysihtml5);wysihtml5.commands.insertOrderedList={exec:function(n,t){wysihtml5.commands.insertList.exec(n,t,"OL")},state:function(n,t){return wysihtml5.commands.insertList.state(n,t,"OL")}};wysihtml5.commands.insertUnorderedList={exec:function(n,t){wysihtml5.commands.insertList.exec(n,t,"UL")},state:function(n,t){return wysihtml5.commands.insertList.state(n,t,"UL")}};wysihtml5.commands.insertList=function(n){var t=function(n,t){if(n&&n.nodeName){"string"==typeof t&&(t=[t]);for(var i=t.length;i--;)if(n.nodeName===t[i])return!0}return!1},r=function(i,r,u){var e,o,f={el:null,other:!1};return i&&(e=n.dom.getParentElement(i,{nodeName:"LI"}),o="UL"===r?"OL":"UL",t(i,r)?f.el=i:t(i,o)?f={el:i,other:!0}:e&&(t(e.parentNode,r)?f.el=e.parentNode:t(e.parentNode,o)&&(f={el:e.parentNode,other:!0}))),f.el&&!u.element.contains(f.el)&&(f.el=null),f},u=function(t,r,u){var f,e="UL"===r?"OL":"UL";u.selection.executeAndRestore(function(){var o,s,h=i(e,u);if(h.length)for(o=h.length;o--;)n.dom.renameElement(h[o],r.toLowerCase());else{for(f=i(["OL","UL"],u),s=f.length;s--;)n.dom.resolveList(f[s],u.config.useLineBreaks);n.dom.resolveList(t,u.config.useLineBreaks)}})},f=function(t,r,u){var f="UL"===r?"OL":"UL";u.selection.executeAndRestore(function(){for(var o=[t].concat(i(f,u)),e=o.length;e--;)n.dom.renameElement(o[e],r.toLowerCase())})},i=function(n,i){for(var f=i.selection.getOwnRanges(),u=[],r=f.length;r--;)u=u.concat(f[r].getNodes([1],function(i){return t(i,n)}));return u},e=function(t,i){i.selection.executeAndRestoreRangy(function(){var u,f,e="_wysihtml5-temp-"+(new Date).getTime(),r=i.selection.deblockAndSurround({nodeName:"div",className:e});r.innerHTML=r.innerHTML.replace(/\uFEFF/g,"");r&&(u=n.lang.array(["","<br>",n.INVISIBLE_SPACE]).contains(r.innerHTML),f=n.dom.convertToList(r,t.toLowerCase(),i.parent.config.uneditableContainerClassname),u&&i.selection.selectNode(f.querySelector("li"),!0))})};return{exec:function(n,t,i){var h=n.doc,s="OL"===i?"insertOrderedList":"insertUnorderedList",c=n.selection.getSelectedNode(),o=r(c,i,n);o.el?o.other?f(o.el,i,n):u(o.el,i,n):n.commands.support(s)?h.execCommand(s,!1,null):e(i,n)},state:function(n,t,i){var f=n.selection.getSelectedNode(),u=r(f,i,n);return u.el&&!u.other?u.el:!1}}}(wysihtml5);wysihtml5.commands.italic={exec:function(n,t){wysihtml5.commands.formatInline.execWithToggle(n,t,"i")},state:function(n,t){return wysihtml5.commands.formatInline.state(n,t,"i")}},function(n){var t="wysiwyg-text-align-center",i=/wysiwyg-text-align-[0-9a-z]+/g;n.commands.justifyCenter={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,t,i)}}}(wysihtml5),function(n){var t="wysiwyg-text-align-left",i=/wysiwyg-text-align-[0-9a-z]+/g;n.commands.justifyLeft={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,t,i)}}}(wysihtml5),function(n){var t="wysiwyg-text-align-right",i=/wysiwyg-text-align-[0-9a-z]+/g;n.commands.justifyRight={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,t,i)}}}(wysihtml5),function(n){var t="wysiwyg-text-align-justify",i=/wysiwyg-text-align-[0-9a-z]+/g;n.commands.justifyFull={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,t,i)}}}(wysihtml5),function(n){var t="text-align: right;",i=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;n.commands.alignRightStyle={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,null,null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,null,null,t,i)}}}(wysihtml5),function(n){var t="text-align: left;",i=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;n.commands.alignLeftStyle={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,null,null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,null,null,t,i)}}}(wysihtml5),function(n){var t="text-align: center;",i=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;n.commands.alignCenterStyle={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,null,null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,null,null,t,i)}}}(wysihtml5);wysihtml5.commands.redo={exec:function(n){return n.undoManager.redo()},state:function(){return!1}};wysihtml5.commands.underline={exec:function(n,t){wysihtml5.commands.formatInline.execWithToggle(n,t,"u")},state:function(n,t){return wysihtml5.commands.formatInline.state(n,t,"u")}};wysihtml5.commands.undo={exec:function(n){return n.undoManager.undo()},state:function(){return!1}};wysihtml5.commands.createTable={exec:function(n,t,i){var u,f,r;if(i&&i.cols&&i.rows&&parseInt(i.cols,10)>0&&parseInt(i.rows,10)>0){for(r=i.tableStyle?'<table style="'+i.tableStyle+'">':"<table>",r+="<tbody>",f=0;f<i.rows;f++){for(r+="<tr>",u=0;u<i.cols;u++)r+="<td>&nbsp;<\/td>";r+="<\/tr>"}r+="<\/tbody><\/table>";n.commands.exec("insertHTML",r)}},state:function(){return!1}};wysihtml5.commands.mergeTableCells={exec:function(n,t){n.tableSelection&&n.tableSelection.start&&n.tableSelection.end&&(this.state(n,t)?wysihtml5.dom.table.unmergeCell(n.tableSelection.start):wysihtml5.dom.table.mergeCellsBetween(n.tableSelection.start,n.tableSelection.end))},state:function(n){if(n.tableSelection){var t=n.tableSelection.start,i=n.tableSelection.end;if(t&&i&&t==i&&(wysihtml5.dom.getAttribute(t,"colspan")&&parseInt(wysihtml5.dom.getAttribute(t,"colspan"),10)>1||wysihtml5.dom.getAttribute(t,"rowspan")&&parseInt(wysihtml5.dom.getAttribute(t,"rowspan"),10)>1))return[t]}return!1}};wysihtml5.commands.addTableCells={exec:function(n,t,i){if(n.tableSelection&&n.tableSelection.start&&n.tableSelection.end){var r=wysihtml5.dom.table.orderSelectionEnds(n.tableSelection.start,n.tableSelection.end);"before"==i||"above"==i?wysihtml5.dom.table.addCells(r.start,i):("after"==i||"below"==i)&&wysihtml5.dom.table.addCells(r.end,i);setTimeout(function(){n.tableSelection.select(r.start,r.end)},0)}},state:function(){return!1}};wysihtml5.commands.deleteTableCells={exec:function(n,t,i){if(n.tableSelection&&n.tableSelection.start&&n.tableSelection.end){var r,e=wysihtml5.dom.table.orderSelectionEnds(n.tableSelection.start,n.tableSelection.end),u=wysihtml5.dom.table.indexOf(e.start),f=n.tableSelection.table;wysihtml5.dom.table.removeCells(e.start,i);setTimeout(function(){r=wysihtml5.dom.table.findCell(f,u);r||("row"==i&&(r=wysihtml5.dom.table.findCell(f,{row:u.row-1,col:u.col})),"column"==i&&(r=wysihtml5.dom.table.findCell(f,{row:u.row,col:u.col-1})));r&&n.tableSelection.select(r,r)},0)}},state:function(){return!1}};wysihtml5.commands.indentList={exec:function(n){var t=n.selection.getSelectionParentsByTag("LI");return t?this.tryToPushLiLevel(t,n.selection):!1},state:function(){return!1},tryToPushLiLevel:function(n,t){var e,u,r,i,f,o=!1;return t.executeAndRestoreRangy(function(){for(var t=n.length;t--;)i=n[t],e="OL"===i.parentNode.nodeName?"OL":"UL",u=i.ownerDocument.createElement(e),r=wysihtml5.dom.domNode(i).prev({nodeTypes:[wysihtml5.ELEMENT_NODE]}),f=r?r.querySelector("ul, ol"):null,r&&(f?f.appendChild(i):(u.appendChild(i),r.appendChild(u)),o=!0)}),o}};wysihtml5.commands.outdentList={exec:function(n){var t=n.selection.getSelectionParentsByTag("LI");return t?this.tryToPullLiLevel(t,n):!1},state:function(){return!1},tryToPullLiLevel:function(n,t){var i,f,e,r,u,o=!1,s=this;return t.selection.executeAndRestoreRangy(function(){for(var c,h=n.length;h--;)if(r=n[h],r.parentNode&&(i=r.parentNode,"OL"===i.tagName||"UL"===i.tagName)){if(o=!0,f=wysihtml5.dom.getParentElement(i.parentNode,{nodeName:["OL","UL"]},!1,t.element),e=wysihtml5.dom.getParentElement(i.parentNode,{nodeName:["LI"]},!1,t.element),f&&e)r.nextSibling&&(u=s.getAfterList(i,r),r.appendChild(u)),f.insertBefore(r,e.nextSibling);else{for(r.nextSibling&&(u=s.getAfterList(i,r),r.appendChild(u)),c=r.childNodes.length;c--;)i.parentNode.insertBefore(r.childNodes[c],i.nextSibling);i.parentNode.insertBefore(document.createElement("br"),i.nextSibling);r.parentNode.removeChild(r)}0===i.childNodes.length&&i.parentNode.removeChild(i)}}),o},getAfterList:function(n,t){for(var r=n.nodeName,i=document.createElement(r);t.nextSibling;)i.appendChild(t.nextSibling);return i}},function(n){var r=90,f=89,e=8,o=46,s=25,i="data-wysihtml5-selection-node",t="data-wysihtml5-selection-offset",u=('<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+n.INVISIBLE_SPACE+"<\/span>",'<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+n.INVISIBLE_SPACE+"<\/span>",n.dom);n.UndoManager=n.lang.Dispatcher.extend({constructor:function(n){this.editor=n;this.composer=n.composer;this.element=this.composer.element;this.position=0;this.historyStr=[];this.historyDom=[];this.transact();this._observe()},_observe:function(){var t,n=this;this.composer.sandbox.getDocument();u.observe(this.element,"keydown",function(t){if(!t.altKey&&(t.ctrlKey||t.metaKey)){var i=t.keyCode,u=i===r&&!t.shiftKey,e=i===r&&t.shiftKey||i===f;u?(n.undo(),t.preventDefault()):e&&(n.redo(),t.preventDefault())}});u.observe(this.element,"keydown",function(i){var r=i.keyCode;r!==t&&(t=r,(r===e||r===o)&&n.transact())});this.editor.on("newword:composer",function(){n.transact()}).on("beforecommand:composer",function(){n.transact()})},transact:function(){var u,f,h,r,e,c,l,a=this.historyStr[this.position-1],o=this.composer.getValue(!1,!1),v=this.element.offsetWidth>0&&this.element.offsetHeight>0;o!==a&&(c=this.historyStr.length=this.historyDom.length=this.position,c>s&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++,v&&(u=this.composer.selection.getRange(),f=u&&u.startContainer?u.startContainer:this.element,h=u&&u.startOffset?u.startOffset:0,f.nodeType===n.ELEMENT_NODE?r=f:(r=f.parentNode,e=this.getChildNodeIndex(r,f)),r.setAttribute(t,h),void 0!==e&&r.setAttribute(i,e)),l=this.element.cloneNode(!!o),this.historyDom.push(l),this.historyStr.push(o),r&&(r.removeAttribute(t),r.removeAttribute(i)))},undo:function(){this.transact();this.undoPossible()&&(this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.redoPossible()&&(this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer"))},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(n){var u,o,s,e,r,f;for(this.element.innerHTML="",u=0,o=n.childNodes,s=n.childNodes.length;s>u;u++)this.element.appendChild(o[u].cloneNode(!0));n.hasAttribute(t)?(e=n.getAttribute(t),f=n.getAttribute(i),r=this.element):(r=this.element.querySelector("["+t+"]")||this.element,e=r.getAttribute(t),f=r.getAttribute(i),r.removeAttribute(t),r.removeAttribute(i));null!==f&&(r=this.getChildNodeByIndex(r,+f));this.composer.selection.set(r,e)},getChildNodeIndex:function(n,t){for(var i=0,r=n.childNodes,u=r.length;u>i;i++)if(r[i]===t)return i},getChildNodeByIndex:function(n,t){return n.childNodes[t]}})}(wysihtml5);wysihtml5.views.View=Base.extend({constructor:function(n,t,i){this.parent=n;this.element=t;this.config=i;this.config.noTextarea||this._observeViewChange()},_observeViewChange:function(){var n=this;this.parent.on("beforeload",function(){n.parent.on("change_view",function(t){t===n.name?(n.parent.currentView=n,n.show(),setTimeout(function(){n.focus()},0)):n.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(n){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(n){var t=n.dom,i=n.browser;n.views.Composer=n.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(n,t,i){this.base(n,t,i);this.config.noTextarea?this.editableArea=t:this.textarea=this.parent.textarea;this.config.contentEditableMode?this._initContentEditableArea():this._initSandbox()},clear:function(){this.element.innerHTML=i.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t,i){var r=this.isEmpty()?"":n.quirks.getCorrectInnerHTML(this.element);return t!==!1&&(r=this.parent.parse(r,i===!1?!1:!0)),r},setValue:function(n,t){t&&(n=this.parent.parse(n));try{this.element.innerHTML=n}catch(i){this.element.innerText=n}},cleanUp:function(){this.parent.parse(this.element)},show:function(){this.editableArea.style.display=this._displayStyle||"";this.config.noTextarea||this.textarea.element.disabled||(this.disable(),this.enable())},hide:function(){this._displayStyle=t.getStyle("display").from(this.editableArea);"none"===this._displayStyle&&(this._displayStyle=null);this.editableArea.style.display="none"},disable:function(){this.parent.fire("disable:composer");this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer");this.element.setAttribute("contentEditable","true")},focus:function(t){n.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear();this.base();var i=this.element.lastChild;t&&i&&this.selection&&("BR"===i.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==(this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"))&&this.placeholderSet},isEmpty:function(){var n=this.element.innerHTML.toLowerCase();return/^(\s|<br>|<\/br>|<p>|<\/p>)*$/i.test(n)||""===n||"<br>"===n||"<p><\/p>"===n||"<p><br><\/p>"===n||this.hasPlaceholderSet()},_initContentEditableArea:function(){var n=this;this.config.noTextarea?this.sandbox=new t.ContentEditableArea(function(){n._create()},{},this.editableArea):(this.sandbox=new t.ContentEditableArea(function(){n._create()}),this.editableArea=this.sandbox.getContentEditable(),t.insert(this.editableArea).after(this.textarea.element),this._createWysiwygFormField())},_initSandbox:function(){var n,i=this;this.sandbox=new t.Sandbox(function(){i._create()},{stylesheets:this.config.stylesheets});this.editableArea=this.sandbox.getIframe();n=this.textarea.element;t.insert(this.editableArea).after(n);this._createWysiwygFormField()},_createWysiwygFormField:function(){if(this.textarea.element.form){var n=document.createElement("input");n.type="hidden";n.name="_wysihtml5_mode";n.value=1;t.insert(n).after(this.textarea.element)}},_create:function(){var r,u,f=this;this.doc=this.sandbox.getDocument();this.element=this.config.contentEditableMode?this.sandbox.getContentEditable():this.doc.body;this.config.noTextarea?this.cleanUp():(this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0,!1));this.selection=new n.Selection(this.parent,this.element,this.config.uneditableContainerClassname);this.commands=new n.Commands(this.parent);this.config.noTextarea||t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element);t.addClass(this.element,this.config.composerClassName);this.config.style&&!this.config.contentEditableMode&&this.style();this.observe();r=this.config.name;r&&(t.addClass(this.element,r),this.config.contentEditableMode||t.addClass(this.editableArea,r));this.enable();!this.config.noTextarea&&this.textarea.element.disabled&&this.disable();u="string"==typeof this.config.placeholder?this.config.placeholder:this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder");u&&t.simulatePlaceholder(this.parent,this,u);this.commands.exec("styleWithCSS",!1);this._initAutoLinking();this._initObjectResizing();this._initUndoManager();this._initLineBreaking();this.config.noTextarea||!this.textarea.element.hasAttribute("autofocus")&&document.querySelector(":focus")!=this.textarea.element||i.isIos()||setTimeout(function(){f.focus(!0)},100);i.clearsContentEditableCorrectly()||n.quirks.ensureProperClearing(this);this.initSync&&this.config.sync&&this.initSync();this.config.noTextarea||this.textarea.hide();this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var f,e,u,r=this,o=i.canDisableAutoLinking(),s=i.doesAutoLinkingInContentEditable();o&&this.commands.exec("autoUrlDetect",!1);this.config.autoLink&&((!s||s&&o)&&(this.parent.on("newword:composer",function(){t.getTextContent(r.element).match(t.autoLink.URL_REG_EXP)&&r.selection.executeAndRestore(function(i,u){for(var e=r.element.querySelectorAll("."+r.config.uneditableContainerClassname),o=!1,f=e.length;f--;)n.dom.contains(e[f],u)&&(o=!0);o||t.autoLink(u.parentNode,[r.config.uneditableContainerClassname])})}),t.observe(this.element,"blur",function(){t.autoLink(r.element,[r.config.uneditableContainerClassname])})),f=this.sandbox.getDocument().getElementsByTagName("a"),e=t.autoLink.URL_REG_EXP,u=function(i){var r=n.lang.string(t.getTextContent(i)).trim();return"www."===r.substr(0,4)&&(r="http://"+r),r},t.observe(this.element,"keydown",function(n){if(f.length){var o,s=r.selection.getSelectedNode(n.target.ownerDocument),i=t.getParentElement(s,{nodeName:"A"},4);i&&(o=u(i),setTimeout(function(){var n=u(i);n!==o&&n.match(e)&&i.setAttribute("href",n)},0))}}))},_initObjectResizing:function(){if(this.commands.exec("enableObjectResizing",!0),i.supportsEvent("resizeend")){var r=["width","height"],f=r.length,u=this.element;t.observe(u,"resizeend",function(t){var i,e=t.target||t.srcElement,o=e.style,s=0;if("IMG"===e.nodeName){for(;f>s;s++)i=r[s],o[i]&&(e.setAttribute(i,parseInt(o[i],10)),o[i]="");n.quirks.redraw(u)}})}},_initUndoManager:function(){this.undoManager=new n.UndoManager(this.parent)},_initLineBreaking:function(){function u(n){var i=t.getParentElement(n,{nodeName:["P","DIV"]},2);i&&t.contains(r.element,i)&&r.selection.executeAndRestore(function(){r.config.useLineBreaks?t.replaceWithChildNodes(i):"P"!==i.nodeName&&t.renameElement(i,"p")})}var r=this,f=["LI","P","H1","H2","H3","H4","H5","H6"],e=["UL","OL","MENU"];this.config.useLineBreaks||t.observe(this.element,["focus","keydown"],function(){if(r.isEmpty()){var n=r.doc.createElement("P");r.element.innerHTML="";r.element.appendChild(n);i.displaysCaretInEmptyContentEditableCorrectly()?r.selection.selectNode(n,!0):(n.innerHTML="<br>",r.selection.setBefore(n.firstChild))}});t.observe(this.element,"keydown",function(i){var o,s=i.keyCode;if(!i.shiftKey&&(s===n.ENTER_KEY||s===n.BACKSPACE_KEY))return o=t.getParentElement(r.selection.getSelectedNode(),{nodeName:f},4),o?(setTimeout(function(){var f,i=r.selection.getSelectedNode();if("LI"===o.nodeName){if(!i)return;f=t.getParentElement(i,{nodeName:e},2);f||u(i)}s===n.ENTER_KEY&&o.nodeName.match(/^H[1-6]$/)&&u(i)},0),void 0):(r.config.useLineBreaks&&s===n.ENTER_KEY&&!n.browser.insertsLineBreaksOnReturn()&&(i.preventDefault(),r.commands.exec("insertLineBreak")),void 0)})}})}(wysihtml5),function(n){var t=n.dom,r=document,e=window,f=r.createElement("div"),i=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],u=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],o=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",n.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],s=function(n){if(n.setActive)try{n.setActive()}catch(s){}else{var i=n.style,u=r.documentElement.scrollTop||r.body.scrollTop,f=r.documentElement.scrollLeft||r.body.scrollLeft,o={position:i.position,top:i.top,left:i.left,WebkitUserSelect:i.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(n);n.focus();t.setStyles(o).on(n);e.scrollTo&&e.scrollTo(f,u)}};n.views.Composer.prototype.style=function(){var l,c,h=this,a=r.querySelector(":focus"),e=this.textarea.element,v=e.hasAttribute("placeholder"),p=v&&e.getAttribute("placeholder"),y=e.style.display,w=e.disabled;return this.focusStylesHost=f.cloneNode(!1),this.blurStylesHost=f.cloneNode(!1),this.disabledStylesHost=f.cloneNode(!1),v&&e.removeAttribute("placeholder"),e===a&&e.blur(),e.disabled=!1,e.style.display=l="none",(e.getAttribute("rows")&&"auto"===t.getStyle("height").from(e)||e.getAttribute("cols")&&"auto"===t.getStyle("width").from(e))&&(e.style.display=l=y),t.copyStyles(u).from(e).to(this.editableArea).andTo(this.blurStylesHost),t.copyStyles(i).from(e).to(this.element).andTo(this.blurStylesHost),t.insertCSS(o).into(this.element.ownerDocument),e.disabled=!0,t.copyStyles(u).from(e).to(this.disabledStylesHost),t.copyStyles(i).from(e).to(this.disabledStylesHost),e.disabled=w,e.style.display=y,s(e),e.style.display=l,t.copyStyles(u).from(e).to(this.focusStylesHost),t.copyStyles(i).from(e).to(this.focusStylesHost),e.style.display=y,t.copyStyles(["display"]).from(e).to(this.editableArea),c=n.lang.array(u).without(["display"]),a?a.focus():e.blur(),v&&e.setAttribute("placeholder",p),this.parent.on("focus:composer",function(){t.copyStyles(c).from(h.focusStylesHost).to(h.editableArea);t.copyStyles(i).from(h.focusStylesHost).to(h.element)}),this.parent.on("blur:composer",function(){t.copyStyles(c).from(h.blurStylesHost).to(h.editableArea);t.copyStyles(i).from(h.blurStylesHost).to(h.element)}),this.parent.observe("disable:composer",function(){t.copyStyles(c).from(h.disabledStylesHost).to(h.editableArea);t.copyStyles(i).from(h.disabledStylesHost).to(h.element)}),this.parent.observe("enable:composer",function(){t.copyStyles(c).from(h.blurStylesHost).to(h.editableArea);t.copyStyles(i).from(h.blurStylesHost).to(h.element)}),this}}(wysihtml5),function(n){var t=n.dom,i=n.browser,r={66:"bold",73:"italic",85:"underline"},u=function(n,t,i){var f,u=n.getPreviousNode(t,!0),r=n.getSelectedNode();if(1!==r.nodeType&&r.parentNode!==i&&(r=r.parentNode),u)if(1==r.nodeType){if(f=r.firstChild,1==u.nodeType)for(;r.firstChild;)u.appendChild(r.firstChild);else for(;r.firstChild;)t.parentNode.insertBefore(r.firstChild,t);r.parentNode&&r.parentNode.removeChild(r);n.setBefore(f)}else 1==u.nodeType?u.appendChild(r):t.parentNode.insertBefore(r,t),n.setBefore(r)},f=function(n,t,i,r){var f,e,o;t.isCollapsed()?t.caretIsInTheBeginnig("LI")?(n.preventDefault(),r.commands.exec("outdentList")):t.caretIsInTheBeginnig()?n.preventDefault():(t.caretIsFirstInSelection()&&t.getPreviousNode()&&t.getPreviousNode().nodeName&&/^H\d$/gi.test(t.getPreviousNode().nodeName)&&(f=t.getPreviousNode(),n.preventDefault(),/^\s*$/.test(f.textContent||f.innerText)?f.parentNode.removeChild(f):(e=f.ownerDocument.createRange(),e.selectNodeContents(f),e.collapse(!1),t.setSelection(e))),o=t.caretIsBeforeUneditable(),o&&(n.preventDefault(),u(t,o,i))):t.containsUneditable()&&(n.preventDefault(),t.deleteContents())},e=function(n){if(n.selection.isCollapsed()){if(n.selection.caretIsInTheBeginnig("LI")&&n.commands.exec("indentList"))return}else n.selection.deleteContents();n.commands.exec("insertHTML","&emsp;")};n.views.Composer.prototype.observe=function(){var h,l,u=this,a=this.getValue(!1,!1),s=this.sandbox.getIframe?this.sandbox.getIframe():this.sandbox.getContentEditable(),o=this.element,c=i.supportsEventsInIframeCorrectly()||this.sandbox.getContentEditable?o:this.sandbox.getWindow();t.observe(s,"DOMNodeRemoved",function(){clearInterval(h);u.parent.fire("destroy:composer")});i.supportsMutationEvents()||(h=setInterval(function(){t.contains(document.documentElement,s)||(clearInterval(h),u.parent.fire("destroy:composer"))},250));t.observe(c,["drop","paste","mouseup","focus","keyup"],function(){setTimeout(function(){u.parent.fire("interaction").fire("interaction:composer")},0)});this.config.handleTables&&(!this.tableClickHandle&&this.doc.execCommand&&n.browser.supportsCommand(this.doc,"enableObjectResizing")&&n.browser.supportsCommand(this.doc,"enableInlineTableEditing")&&(this.sandbox.getIframe?this.tableClickHandle=t.observe(s,["focus","mouseup","mouseover"],function(){u.doc.execCommand("enableObjectResizing",!1,"false");u.doc.execCommand("enableInlineTableEditing",!1,"false");u.tableClickHandle.stop()}):setTimeout(function(){u.doc.execCommand("enableObjectResizing",!1,"false");u.doc.execCommand("enableInlineTableEditing",!1,"false")},0)),this.tableSelection=n.quirks.tableCellsSelection(o,u.parent));t.observe(c,"focus",function(n){u.parent.fire("focus",n).fire("focus:composer",n);setTimeout(function(){a=u.getValue(!1,!1)},0)});t.observe(c,"blur",function(n){if(a!==u.getValue(!1,!1)){var t=n;"function"==typeof Object.create&&(t=Object.create(n,{type:{value:"change"}}));u.parent.fire("change",t).fire("change:composer",t)}u.parent.fire("blur",n).fire("blur:composer",n)});t.observe(o,"dragenter",function(){u.parent.fire("unset_placeholder")});t.observe(o,["drop","paste","beforepaste"],function(n){u.parent.fire(n.type,n).fire(n.type+":composer",n)});this.config.copyedFromMarking&&t.observe(o,"copy",function(n){n.clipboardData&&(n.clipboardData.setData("text/html",u.config.copyedFromMarking+u.selection.getHtml()),n.preventDefault());u.parent.fire(n.type,n).fire(n.type+":composer",n)});t.observe(o,"keyup",function(t){var i=t.keyCode;(i===n.SPACE_KEY||i===n.ENTER_KEY)&&u.parent.fire("newword:composer")});this.parent.on("paste:composer",function(){setTimeout(function(){u.parent.fire("newword:composer")},0)});i.canSelectImagesInContentEditable()||t.observe(o,"mousedown",function(t){var i=t.target,r=o.querySelectorAll("img"),f=o.querySelectorAll("."+u.config.uneditableContainerClassname+" img"),e=n.lang.array(r).without(f);"IMG"===i.nodeName&&n.lang.array(e).contains(i)&&u.selection.selectNode(i)});i.canSelectImagesInContentEditable()||t.observe(o,"drop",function(){setTimeout(function(){u.selection.getSelection().removeAllRanges()},0)});i.hasHistoryIssue()&&i.supportsSelectionModify()&&t.observe(o,"keydown",function(n){if(n.metaKey||n.ctrlKey){var t=n.keyCode,r=o.ownerDocument.defaultView,i=r.getSelection();(37===t||39===t)&&(37===t&&(i.modify("extend","left","lineboundary"),n.shiftKey||i.collapseToStart()),39===t&&(i.modify("extend","right","lineboundary"),n.shiftKey||i.collapseToEnd()),n.preventDefault())}});t.observe(o,"keydown",function(n){var t=n.keyCode,i=r[t];(n.ctrlKey||n.metaKey)&&!n.altKey&&i&&(u.commands.exec(i),n.preventDefault());8===t?f(n,u.selection,o,u):u.config.handleTabKey&&9===t&&(n.preventDefault(),e(u,o))});t.observe(o,"keydown",function(t){var i,r=u.selection.getSelectedNode(!0),f=t.keyCode;r&&"IMG"===r.nodeName&&(f===n.BACKSPACE_KEY||f===n.DELETE_KEY)&&(i=r.parentNode,i.removeChild(r),"A"!==i.nodeName||i.firstChild||i.parentNode.removeChild(i),setTimeout(function(){n.quirks.redraw(o)},0),t.preventDefault())});!this.config.contentEditableMode&&i.hasIframeFocusIssue()&&(t.observe(s,"focus",function(){setTimeout(function(){u.doc.querySelector(":focus")!==u.element&&u.focus()},0)}),t.observe(this.element,"blur",function(){setTimeout(function(){u.selection.getSelection().removeAllRanges()},0)}));l={IMG:"Image: ",A:"Link: "};t.observe(o,"mouseover",function(n){var r,u,t=n.target,i=t.nodeName;("A"===i||"IMG"===i)&&(u=t.hasAttribute("title"),u||(r=l[i]+(t.getAttribute("href")||t.getAttribute("src")),t.setAttribute("title",r)))})}}(wysihtml5),function(n){var t=400;n.views.Synchronizer=Base.extend({constructor:function(n,t,i){this.editor=n;this.textarea=t;this.composer=i;this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(n.lang.string(this.composer.getValue(!1,!1)).trim(),t)},fromTextareaToComposer:function(n){var t=this.textarea.getValue(!1,!1);t?this.composer.setValue(t,n):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(n){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(n):this.fromComposerToTextarea(n)},_observe:function(){var r,i=this,u=this.textarea.element.form,f=function(){r=setInterval(function(){i.fromComposerToTextarea()},t)},e=function(){clearInterval(r);r=null};f();u&&(n.dom.observe(u,"submit",function(){i.sync(!0)}),n.dom.observe(u,"reset",function(){setTimeout(function(){i.fromTextareaToComposer()},0)}));this.editor.on("change_view",function(n){"composer"!==n||r?"textarea"===n&&(i.fromComposerToTextarea(!0),e()):(i.fromTextareaToComposer(!0),f())});this.editor.on("destroy:composer",e)}})}(wysihtml5);wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(n,t,i){this.base(n,t,i);this._observe()},clear:function(){this.element.value=""},getValue:function(n){var t=this.isEmpty()?"":this.element.value;return n!==!1&&(t=this.parent.parse(t)),t},setValue:function(n,t){t&&(n=this.parent.parse(n));this.element.value=n},cleanUp:function(){var n=this.parent.parse(this.element.value);this.element.value=n},hasPlaceholderSet:function(){var t=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),i=this.element.getAttribute("placeholder")||null,n=this.element.value,r=!n;return t&&r||n===i},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var t=this.element,n=this.parent,i={focusin:"focus",focusout:"blur"},r=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];n.on("beforeload",function(){wysihtml5.dom.observe(t,r,function(t){var r=i[t.type]||t.type;n.fire(r).fire(r+":textarea")});wysihtml5.dom.observe(t,["paste","drop"],function(){setTimeout(function(){n.fire("paste").fire("paste:textarea")},0)})})}}),function(n){var t,i={name:t,style:!0,toolbar:t,showToolbarAfterInit:!0,autoLink:!0,handleTables:!0,handleTabKey:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},pasteParserRulesets:null,parser:n.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",useLineBreaks:!0,stylesheets:[],placeholderText:t,supportTouchDevices:!0,cleanUp:!0,contentEditableMode:!1,uneditableContainerClassname:"wysihtml5-uneditable-container",copyedFromMarking:'<meta name="copied-from" content="wysihtml5">'};n.Editor=n.lang.Dispatcher.extend({constructor:function(t,r){if(this.editableElement="string"==typeof t?document.getElementById(t):t,this.config=n.lang.object({}).merge(i).merge(r).get(),this._isCompatible=n.browser.supported(),"textarea"!=this.editableElement.nodeName.toLowerCase()&&(this.config.contentEditableMode=!0,this.config.noTextarea=!0),this.config.noTextarea||(this.textarea=new n.views.Textarea(this,this.editableElement,this.config),this.currentView=this.textarea),!this._isCompatible||!this.config.supportTouchDevices&&n.browser.isTouchDevice()){var u=this;return setTimeout(function(){u.fire("beforeload").fire("load")},0),void 0}n.dom.addClass(document.body,this.config.bodyClassName);this.composer=new n.views.Composer(this,this.editableElement,this.config);this.currentView=this.composer;"function"==typeof this.config.parser&&this._initParser();this.on("beforeload",this.handleBeforeLoad)},handleBeforeLoad:function(){this.config.noTextarea||(this.synchronizer=new n.views.Synchronizer(this,this.textarea,this.composer));this.config.toolbar&&(this.toolbar=new n.toolbar.Toolbar(this,this.config.toolbar,this.config.showToolbarAfterInit))},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(n,t){return this.currentView.getValue(n,t)},setValue:function(n,t){return this.fire("unset_placeholder"),n?(this.currentView.setValue(n,t),this):this.clear()},cleanUp:function(){this.currentView.cleanUp()},focus:function(n){return this.currentView.focus(n),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t,i){var r=this.config.contentEditableMode?document:this.composer?this.composer.sandbox.getDocument():null,u=this.config.parser(t,{rules:this.config.parserRules,cleanUp:this.config.cleanUp,context:r,uneditableClass:this.config.uneditableContainerClassname,clearInternals:i});return"object"==typeof t&&n.quirks.redraw(t),u},_initParser:function(){var t,i=this;n.browser.supportsModenPaste()?this.on("paste:composer",function(r){r.preventDefault();t=n.dom.getPastedHtml(r);t&&i._cleanAndPaste(t)}):this.on("beforepaste:composer",function(t){t.preventDefault();n.dom.getPastedHtmlWithDiv(i.composer,function(n){n&&i._cleanAndPaste(n)})})},_cleanAndPaste:function(t){var i=n.quirks.cleanPastedHTML(t,{referenceNode:this.composer.element,rules:this.config.pasteParserRulesets||[{set:this.config.parserRules}],uneditableClass:this.config.uneditableContainerClassname});this.composer.selection.deleteContents();this.composer.selection.insertHTML(i)}})}(wysihtml5),function(n){var t=n.dom,i="wysihtml5-command-dialog-opened",r="input, select, textarea",u="[data-wysihtml5-dialog-field]",f="data-wysihtml5-dialog-field";n.toolbar.Dialog=n.lang.Dispatcher.extend({constructor:function(n,t){this.link=n;this.container=t},_observe:function(){var u,e,o,f,s,h;if(!this._observed){for(u=this,e=function(n){var t=u._serialize();t==u.elementToChange?u.fire("edit",t):u.fire("save",t);u.hide();n.preventDefault();n.stopPropagation()},t.observe(u.link,"click",function(){t.hasClass(u.link,i)&&setTimeout(function(){u.hide()},0)}),t.observe(this.container,"keydown",function(t){var i=t.keyCode;i===n.ENTER_KEY&&e(t);i===n.ESCAPE_KEY&&(u.fire("cancel"),u.hide())}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",e),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(n){u.fire("cancel");u.hide();n.preventDefault();n.stopPropagation()}),o=this.container.querySelectorAll(r),f=0,s=o.length,h=function(){clearInterval(u.interval)};s>f;f++)t.observe(o[f],"change",h);this._observed=!0}},_serialize:function(){for(var i=this.elementToChange||{},t=this.container.querySelectorAll(u),r=t.length,n=0;r>n;n++)i[t[n].getAttribute(f)]=t[n].value;return i},_interpolate:function(n){for(var t,r,e,s=document.querySelector(":focus"),o=this.container.querySelectorAll(u),h=o.length,i=0;h>i;i++)t=o[i],t!==s&&(n&&"hidden"===t.type||(r=t.getAttribute(f),e=this.elementToChange&&"boolean"!=typeof this.elementToChange?this.elementToChange.getAttribute(r)||"":t.defaultValue,t.value=e))},show:function(n){if(!t.hasClass(this.link,i)){var f=this,u=this.container.querySelector(r);if(this.elementToChange=n,this._observe(),this._interpolate(),n&&(this.interval=setInterval(function(){f._interpolate(!0)},500)),t.addClass(this.link,i),this.container.style.display="",this.fire("show"),u&&!n)try{u.focus()}catch(e){}}},hide:function(){clearInterval(this.interval);this.elementToChange=null;t.removeClass(this.link,i);this.container.style.display="none";this.fire("hide")}})}(wysihtml5),function(n){var t=n.dom,u={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},f={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},r={"x-webkit-speech":"",speech:""};n.toolbar.Speech=function(e,o){var c,h,l,s=document.createElement("input");return n.browser.supportsSpeechApiOn(s)?(c=e.editor.textarea.element.getAttribute("lang"),c&&(r.lang=c),h=document.createElement("div"),n.lang.object(i).merge({width:o.offsetWidth+"px",height:o.offsetHeight+"px"}),t.insert(s).into(h),t.insert(h).into(o),t.setStyles(f).on(s),t.setAttributes(r).on(s),t.setStyles(i).on(h),t.setStyles(u).on(o),l="onwebkitspeechchange"in s?"webkitspeechchange":"speechchange",t.observe(s,l,function(){e.execCommand("insertText",s.value);s.value=""}),t.observe(s,"click",function(n){t.hasClass(o,"wysihtml5-command-disabled")&&n.preventDefault();n.stopPropagation()}),void 0):(o.style.display="none",void 0)}}(wysihtml5),function(n){var r="wysihtml5-command-disabled",u="wysihtml5-commands-disabled",i="wysihtml5-command-active",f="wysihtml5-action-active",t=n.dom;n.toolbar.Toolbar=Base.extend({constructor:function(t,e,o){this.editor=t;this.container="string"==typeof e?document.getElementById(e):e;this.composer=t.composer;this._getLinks("command");this._getLinks("action");this._observe();o&&this.show();null!=t.config.classNameCommandDisabled&&(r=t.config.classNameCommandDisabled);null!=t.config.classNameCommandsDisabled&&(u=t.config.classNameCommandsDisabled);null!=t.config.classNameCommandActive&&(i=t.config.classNameCommandActive);null!=t.config.classNameActionActive&&(f=t.config.classNameActionActive);for(var h=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),c=h.length,s=0;c>s;s++)new n.toolbar.Speech(this,h[s])},_getLinks:function(t){for(var i,e,r,u,o,s=this[t+"Links"]=n.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),h=s.length,f=0,c=this[t+"Mapping"]={};h>f;f++)i=s[f],r=i.getAttribute("data-wysihtml5-"+t),u=i.getAttribute("data-wysihtml5-"+t+"-value"),e=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+r+"']"),o=this._getDialog(i,r),c[r+":"+u]={link:i,group:e,name:r,value:u,dialog:o,state:!1}},_getDialog:function(t,i){var f,e,r=this,u=this.container.querySelector("[data-wysihtml5-dialog='"+i+"']");return u&&(f=n.toolbar["Dialog_"+i]?new n.toolbar["Dialog_"+i](t,u):new n.toolbar.Dialog(t,u),f.on("show",function(){e=r.composer.selection.getBookmark();r.editor.fire("show:dialog",{command:i,dialogContainer:u,commandLink:t})}),f.on("save",function(n){e&&r.composer.selection.setBookmark(e);r._execCommand(i,n);r.editor.fire("save:dialog",{command:i,dialogContainer:u,commandLink:t})}),f.on("cancel",function(){r.editor.focus(!1);r.editor.fire("cancel:dialog",{command:i,dialogContainer:u,commandLink:t})})),f},execCommand:function(n,t){if(!this.commandsDisabled){var i=this.commandMapping[n+":"+t];i&&i.dialog&&!i.state?i.dialog.show():this._execCommand(n,t)}},_execCommand:function(n,t){this.editor.focus(!1);this.composer.commands.exec(n,t);this._updateLinkStates()},execAction:function(n){var t=this.editor;"change_view"===n&&t.textarea&&(t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea"));"showSource"==n&&t.fire("showSource")},_observe:function(){for(var n=this,i=this.editor,r=this.container,e=this.commandLinks.concat(this.actionLinks),o=e.length,f=0;o>f;f++)"A"===e[f].nodeName?t.setAttributes({href:"javascript:;",unselectable:"on"}).on(e[f]):t.setAttributes({unselectable:"on"}).on(e[f]);t.delegate(r,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(n){n.preventDefault()});t.delegate(r,"[data-wysihtml5-command]","click",function(t){var i=this,r=i.getAttribute("data-wysihtml5-command"),u=i.getAttribute("data-wysihtml5-command-value");n.execCommand(r,u);t.preventDefault()});t.delegate(r,"[data-wysihtml5-action]","click",function(t){var i=this.getAttribute("data-wysihtml5-action");n.execAction(i);t.preventDefault()});i.on("interaction:composer",function(){n._updateLinkStates()});i.on("focus:composer",function(){n.bookmark=null});this.editor.config.handleTables&&(i.on("tableselect:composer",function(){n.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display=""}),i.on("tableunselect:composer",function(){n.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display="none"}));i.on("change_view",function(f){i.textarea&&setTimeout(function(){n.commandsDisabled="composer"!==f;n._updateLinkStates();n.commandsDisabled?t.addClass(r,u):t.removeClass(r,u)},0)})},_updateLinkStates:function(){var s,e,o,u,h=this.commandMapping,c=this.actionMapping;for(s in h)u=h[s],this.commandsDisabled?(e=!1,t.removeClass(u.link,i),u.group&&t.removeClass(u.group,i),u.dialog&&u.dialog.hide()):(e=this.composer.commands.state(u.name,u.value),t.removeClass(u.link,r),u.group&&t.removeClass(u.group,r)),u.state!==e&&(u.state=e,e?(t.addClass(u.link,i),u.group&&t.addClass(u.group,i),u.dialog&&("object"==typeof e||n.lang.object(e).isArray()?(!u.dialog.multiselect&&n.lang.object(e).isArray()&&(e=1===e.length?e[0]:!0,u.state=e),u.dialog.show(e)):u.dialog.hide())):(t.removeClass(u.link,i),u.group&&t.removeClass(u.group,i),u.dialog&&u.dialog.hide()));for(s in c)o=c[s],"change_view"===o.name&&(o.state=this.editor.currentView===this.editor.textarea,o.state?t.addClass(o.link,f):t.removeClass(o.link,f))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(n){n.toolbar.Dialog_createTable=n.toolbar.Dialog.extend({show:function(n){this.base(n)}})}(wysihtml5),function(n){var t=(n.dom,"[data-wysihtml5-dialog-field]"),i="data-wysihtml5-dialog-field";n.toolbar.Dialog_foreColorStyle=n.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){for(var u={},r=this.container.querySelectorAll(t),f=r.length,n=0;f>n;n++)u[r[n].getAttribute(i)]=r[n].value;return u},_interpolate:function(r){for(var f,c=document.querySelector(":focus"),o=this.container.querySelectorAll(t),l=o.length,e=0,s=this.elementToChange?n.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,h=s?s.getAttribute("style"):null,u=h?n.quirks.styleParser.parseColor(h,"color"):null;l>e;e++)f=o[e],f!==c&&(r&&"hidden"===f.type||"color"===f.getAttribute(i)&&(f.value=u?u[3]&&1!=u[3]?"rgba("+u[0]+","+u[1]+","+u[2]+","+u[3]+");":"rgb("+u[0]+","+u[1]+","+u[2]+");":"rgb(0,0,0);"))}})}(wysihtml5),function(n){n.dom;n.toolbar.Dialog_fontSizeStyle=n.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){return{size:this.container.querySelector('[data-wysihtml5-dialog-field="size"]').value}},_interpolate:function(){var f=document.querySelector(":focus"),t=this.container.querySelector("[data-wysihtml5-dialog-field='size']"),r=this.elementToChange?n.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,u=r?r.getAttribute("style"):null,i=u?n.quirks.styleParser.parseFontSize(u):null;t&&t!==f&&i&&!/^\s*$/.test(i)&&(t.value=i)}})}(wysihtml5);Handlebars=function(){var i=function(){"use strict";function n(n){this.string=n}var t;return n.prototype.toString=function(){return""+this.string},t=n}(),n=function(n){"use strict";function f(n){return c[n]||"&amp;"}function e(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}function o(n){return n instanceof h?""+n:n||0===n?(n=""+n,a.test(n)?n.replace(l,f):n):""}function s(n){return n||0===n?u(n)&&0===n.length?!0:!1:!0}var i,r,u,t={},h=n,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,a=/[&<>"'`]/;return t.extend=e,i=Object.prototype.toString,t.toString=i,r=function(n){return"function"==typeof n},r(/x/)&&(r=function(n){return"function"==typeof n&&"[object Function]"===i.call(n)}),t.isFunction=r,u=Array.isArray||function(n){return n&&"object"==typeof n?"[object Array]"===i.call(n):!1},t.isArray=u,t.escapeExpression=o,t.isEmpty=s,t}(i),t=function(){"use strict";function t(t,i){var u,f,r;for(i&&i.firstLine&&(u=i.firstLine,t+=" - "+u+":"+i.firstColumn),f=Error.prototype.constructor.call(this,t),r=0;r<n.length;r++)this[n[r]]=f[n[r]];u&&(this.lineNumber=u,this.column=i.firstColumn)}var i,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=Error(),i=t}(),r=function(n,t){"use strict";function e(n,t){this.helpers=n||{};this.partials=t||{};p(this)}function p(n){n.registerHelper("helperMissing",function(n){if(2===arguments.length)return void 0;throw new y("Missing helper: '"+n+"'");});n.registerHelper("blockHelperMissing",function(t,i){var r=i.inverse||function(){},u=i.fn;return f(t)&&(t=t.call(this)),t===!0?u(this):t===!1||null==t?r(this):o(t)?t.length>0?n.helpers.each(t,i):r(this):u(t)});n.registerHelper("each",function(n,t){var i,s,u,h=t.fn,l=t.inverse,r=0,e="";if(f(n)&&(n=n.call(this)),t.data&&(i=c(t.data)),n&&"object"==typeof n)if(o(n))for(s=n.length;s>r;r++)i&&(i.index=r,i.first=0===r,i.last=r===n.length-1),e+=h(n[r],{data:i});else for(u in n)n.hasOwnProperty(u)&&(i&&(i.key=u,i.index=r,i.first=0===r),e+=h(n[u],{data:i}),r++);return 0===r&&(e=l(this)),e});n.registerHelper("if",function(n,t){return f(n)&&(n=n.call(this)),!t.hash.includeZero&&!n||r.isEmpty(n)?t.inverse(this):t.fn(this)});n.registerHelper("unless",function(t,i){return n.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})});n.registerHelper("with",function(n,t){return f(n)&&(n=n.call(this)),r.isEmpty(n)?void 0:t.fn(n)});n.registerHelper("log",function(t,i){var r=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;n.log(r,t)})}function l(n,t){u.log(n,t)}var a,v,o,f,s,h,u,c,i={},r=n,y=t;return i.VERSION="1.3.0",a=4,i.COMPILER_REVISION=a,v={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},i.REVISION_CHANGES=v,o=r.isArray,f=r.isFunction,s=r.toString,h="[object Object]",i.HandlebarsEnvironment=e,e.prototype={constructor:e,logger:u,log:l,registerHelper:function(n,t,i){if(s.call(n)===h){if(i||t)throw new y("Arg not supported with multiple helpers");r.extend(this.helpers,n)}else i&&(t.not=i),this.helpers[n]=t},registerPartial:function(n,t){s.call(n)===h?r.extend(this.partials,n):this.partials[n]=t}},u={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(n,t){if(u.level<=n){var i=u.methodMap[n];"undefined"!=typeof console&&console[i]&&console[i].call(console,t)}}},i.logger=u,i.log=l,c=function(n){var t={};return r.extend(t,n),t},i.createFrame=c,i}(n,t),u=function(n,t,i){"use strict";function s(n){var r,f,t=n&&n[0]||1,i=v;if(t!==i){if(i>t)throw r=o[i],f=o[t],new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+f+").");throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+n[1]+").");}}function h(n,t){if(!t)throw new u("No environment passed to template");var r=function(n,i,r,f,e,o){var s,h=t.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(t.compile)return s={helpers:f,partials:e,data:o},e[i]=t.compile(n,{data:void 0!==o},t),e[i](r,s);throw new u("The partial "+i+" could not be compiled when running in runtime-only mode");},i={escapeExpression:e.escapeExpression,invokePartial:r,programs:[],program:function(n,t,i){var r=this.programs[n];return i?r=f(n,t,i):r||(r=this.programs[n]=f(n,t)),r},merge:function(n,t){var i=n||t;return n&&t&&n!==t&&(i={},e.extend(i,t),e.extend(i,n)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(r,u){var f,e,o,s;return u=u||{},o=u.partial?u:t,u.partial||(f=u.helpers,e=u.partials),s=n.call(i,o,r,f,e,u.data),u.partial||t.VM.checkRevision(i.compilerInfo),s}}function c(n,t,i){var u=Array.prototype.slice.call(arguments,3),r=function(n,r){return r=r||{},t.apply(this,[n,r.data||i].concat(u))};return r.program=n,r.depth=u.length,r}function f(n,t,i){var r=function(n,r){return r=r||{},t(n,r.data||i)};return r.program=n,r.depth=0,r}function l(n,t,i,r,f,e){var o={partial:!0,helpers:r,partials:f,data:e};if(void 0===n)throw new u("The partial "+t+" could not be found");if(n instanceof Function)return n(i,o)}function a(){return""}var r={},e=n,u=t,v=i.COMPILER_REVISION,o=i.REVISION_CHANGES;return r.checkRevision=s,r.template=h,r.programWithDepth=c,r.program=f,r.invokePartial=l,r.noop=a,r}(n,t,r);return function(n,t,i,r,u){"use strict";var c,f=n,l=t,a=i,e=r,o=u,s=function(){var n=new f.HandlebarsEnvironment;return e.extend(n,f),n.SafeString=l,n.Exception=a,n.Utils=e,n.VM=o,n.template=function(t){return o.template(t,n)},n},h=s();return h.create=s,c=h}(r,i,t,n,u)}();this.wysihtml5=this.wysihtml5||{};this.wysihtml5.tpl=this.wysihtml5.tpl||{};this.wysihtml5.tpl.blockquote=Handlebars.template(function(n,t,i,r,u){function s(n){var t,i="";return i+="btn-"+a((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===l?t.apply(n):t)),i}function h(){return' \n      <span class="fa fa-quote-left"><\/span>\n    '}function c(){return'\n      <span class="glyphicon glyphicon-quote"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",l="function",a=this.escapeExpression,o=this;return e+='<li>\n  <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,s,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="blockquote" data-wysihtml5-display-format-name="false" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(5,c,u),fn:o.program(3,h,u),data:u}),(f||0===f)&&(e+=f),e+="\n  <\/a>\n<\/li>\n",e});this.wysihtml5.tpl.color=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+o((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===e?t.apply(n):t)),i}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,s="",e="function",o=this.escapeExpression,h=this;return s+='<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:h.noop,fn:h.program(1,c,u),data:u}),(f||0===f)&&(s+=f),s+='" data-toggle="dropdown" tabindex="-1">\n    <span class="current-color">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.black,typeof f===e?f.apply(t):f))+'<\/span>\n    <b class="caret"><\/b>\n  <\/a>\n  <ul class="dropdown-menu">\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="black"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="black">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.black,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="silver"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="silver">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.silver,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="gray"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="gray">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.gray,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="maroon"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="maroon">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.maroon,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="red"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="red">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.red,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="purple"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="purple">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.purple,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="green"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="green">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.green,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="olive"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="olive">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.olive,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="navy"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="navy">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.navy,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="blue"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="blue">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.blue,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="orange"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="orange">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.orange,typeof f===e?f.apply(t):f))+"<\/a><\/li>\n  <\/ul>\n<\/li>\n",s});this.wysihtml5.tpl.emphasis=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+h((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===s?t.apply(n):t)),i}function l(n,t){var r,u="";return u+='\n    <a class="btn ',r=i["if"].call(n,(r=n&&n.options,r=null==r||r===!1?r:r.toolbar,null==r||r===!1?r:r.size),{hash:{},inverse:o.noop,fn:o.program(1,c,t),data:t}),(r||0===r)&&(u+=r),u+=' btn-default" data-wysihtml5-command="small" title="CTRL+S" tabindex="-1">'+h((r=n&&n.locale,r=null==r||r===!1?r:r.emphasis,r=null==r||r===!1?r:r.small,typeof r===s?r.apply(n):r))+"<\/a>\n    ",u}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",s="function",h=this.escapeExpression,o=this;return e+='<li>\n  <div class="btn-group">\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="bold" title="CTRL+B" tabindex="-1">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.emphasis,f=null==f||f===!1?f:f.bold,typeof f===s?f.apply(t):f))+'<\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="italic" title="CTRL+I" tabindex="-1">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.emphasis,f=null==f||f===!1?f:f.italic,typeof f===s?f.apply(t):f))+'<\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="underline" title="CTRL+U" tabindex="-1">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.emphasis,f=null==f||f===!1?f:f.underline,typeof f===s?f.apply(t):f))+"<\/a>\n    ",f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,f=null==f||f===!1?f:f.emphasis,null==f||f===!1?f:f.small),{hash:{},inverse:o.noop,fn:o.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+="\n  <\/div>\n<\/li>\n",e});this.wysihtml5.tpl["font-styles"]=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+o((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===e?t.apply(n):t)),i}function l(){return'\n      <span class="fa fa-font"><\/span>\n    '}function a(){return'\n      <span class="glyphicon glyphicon-font"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,s="",e="function",o=this.escapeExpression,h=this;return s+='<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:h.noop,fn:h.program(1,c,u),data:u}),(f||0===f)&&(s+=f),s+='" data-toggle="dropdown">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:h.program(5,a,u),fn:h.program(3,l,u),data:u}),(f||0===f)&&(s+=f),s+='\n    <span class="current-font">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.normal,typeof f===e?f.apply(t):f))+'<\/span>\n    <b class="caret"><\/b>\n  <\/a>\n  <ul class="dropdown-menu">\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="p" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.normal,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h1" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h1,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h2" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h2,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h3" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h3,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h4" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h4,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h5" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h5,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h6" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h6,typeof f===e?f.apply(t):f))+"<\/a><\/li>\n  <\/ul>\n<\/li>\n",s});this.wysihtml5.tpl.html=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+h((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===s?t.apply(n):t)),i}function l(){return'\n        <span class="fa fa-pencil"><\/span>\n      '}function a(){return'\n        <span class="glyphicon glyphicon-pencil"><\/span>\n      '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",s="function",h=this.escapeExpression,o=this;return e+='<li>\n  <div class="btn-group">\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-action="change_view" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.html,f=null==f||f===!1?f:f.edit,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n      ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(5,a,u),fn:o.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+="\n    <\/a>\n  <\/div>\n<\/li>\n",e});this.wysihtml5.tpl.image=Handlebars.template(function(n,t,i,r,u){function c(){return"modal-sm"}function l(n){var t,i="";return i+="btn-"+h((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===s?t.apply(n):t)),i}function a(){return'\n      <span class="fa fa-file-image-o"><\/span>\n    '}function v(){return'\n      <span class="glyphicon glyphicon-picture"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",s="function",h=this.escapeExpression,o=this;return e+='<li>\n  <div class="bootstrap-wysihtml5-insert-image-modal modal fade" data-wysihtml5-dialog="insertImage">\n    <div class="modal-dialog ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.smallmodals),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+='">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;<\/a>\n          <h3>'+h((f=t&&t.locale,f=null==f||f===!1?f:f.image,f=null==f||f===!1?f:f.insert,typeof f===s?f.apply(t):f))+'<\/h3>\n        <\/div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-image-url form-control" data-wysihtml5-dialog-field="src">\n          <\/div> \n        <\/div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.image,f=null==f||f===!1?f:f.cancel,typeof f===s?f.apply(t):f))+'<\/a>\n          <a class="btn btn-primary" data-dismiss="modal"  data-wysihtml5-dialog-action="save" href="#">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.image,f=null==f||f===!1?f:f.insert,typeof f===s?f.apply(t):f))+'<\/a>\n        <\/div>\n      <\/div>\n    <\/div>\n  <\/div>\n  <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="insertImage" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.image,f=null==f||f===!1?f:f.insert,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(7,v,u),fn:o.program(5,a,u),data:u}),(f||0===f)&&(e+=f),e+="\n  <\/a>\n<\/li>\n",e});this.wysihtml5.tpl.link=Handlebars.template(function(n,t,i,r,u){function c(){return"modal-sm"}function l(n){var t,i="";return i+="btn-"+s((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===o?t.apply(n):t)),i}function a(){return'\n      <span class="fa fa-share-square-o"><\/span>\n    '}function v(){return'\n      <span class="glyphicon glyphicon-share"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",o="function",s=this.escapeExpression,h=this;return e+='<li>\n  <div class="bootstrap-wysihtml5-insert-link-modal modal fade" data-wysihtml5-dialog="createLink">\n    <div class="modal-dialog ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.smallmodals),{hash:{},inverse:h.noop,fn:h.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+='">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;<\/a>\n          <h3>'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.insert,typeof f===o?f.apply(t):f))+'<\/h3>\n        <\/div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-link-url form-control" data-wysihtml5-dialog-field="href">\n          <\/div> \n          <div class="checkbox">\n            <label> \n              <input type="checkbox" class="bootstrap-wysihtml5-insert-link-target" checked>'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.target,typeof f===o?f.apply(t):f))+'\n            <\/label>\n          <\/div>\n        <\/div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.cancel,typeof f===o?f.apply(t):f))+'<\/a>\n          <a href="#" class="btn btn-primary" data-dismiss="modal" data-wysihtml5-dialog-action="save">'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.insert,typeof f===o?f.apply(t):f))+'<\/a>\n        <\/div>\n      <\/div>\n    <\/div>\n  <\/div>\n  <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:h.noop,fn:h.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="createLink" title="'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.insert,typeof f===o?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:h.program(7,v,u),fn:h.program(5,a,u),data:u}),(f||0===f)&&(e+=f),e+="\n  <\/a>\n<\/li>\n",e});this.wysihtml5.tpl.lists=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+h((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===s?t.apply(n):t)),i}function l(){return'\n      <span class="fa fa-list-ul"><\/span>\n    '}function a(){return'\n      <span class="glyphicon glyphicon-list"><\/span>\n    '}function v(){return'\n      <span class="fa fa-list-ol"><\/span>\n    '}function y(){return'\n      <span class="glyphicon glyphicon-th-list"><\/span>\n    '}function p(){return'\n      <span class="fa fa-outdent"><\/span>\n    '}function w(){return'\n      <span class="glyphicon glyphicon-indent-right"><\/span>\n    '}function b(){return'\n      <span class="fa fa-indent"><\/span>\n    '}function k(){return'\n      <span class="glyphicon glyphicon-indent-left"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",s="function",h=this.escapeExpression,o=this;return e+='<li>\n  <div class="btn-group">\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="insertUnorderedList" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.lists,f=null==f||f===!1?f:f.unordered,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(5,a,u),fn:o.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+='\n    <\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="insertOrderedList" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.lists,f=null==f||f===!1?f:f.ordered,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(9,y,u),fn:o.program(7,v,u),data:u}),(f||0===f)&&(e+=f),e+='\n    <\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="Outdent" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.lists,f=null==f||f===!1?f:f.outdent,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(13,w,u),fn:o.program(11,p,u),data:u}),(f||0===f)&&(e+=f),e+='\n    <\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="Indent" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.lists,f=null==f||f===!1?f:f.indent,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(17,k,u),fn:o.program(15,b,u),data:u}),(f||0===f)&&(e+=f),e+="\n    <\/a>\n  <\/div>\n<\/li>\n",e}),function(n){"use strict";"function"==typeof define&&define.amd?define("bootstrap.wysihtml5",["jquery","wysihtml5","bootstrap","bootstrap.wysihtml5.templates","bootstrap.wysihtml5.commands"],n):n(jQuery,wysihtml5)}(function(n,t){"use strict";var i=function(n,t){var i,f,r,e=function(n,i,r){if(t.tpl[n])return t.tpl[n]({locale:i,options:r})},u=function(i,r){var u,e;this.el=i;u=n.extend(!0,{},f,r);for(e in u.customTemplates)u.customTemplates.hasOwnProperty(e)&&(t.tpl[e]=u.customTemplates[e]);this.toolbar=this.createToolbar(i,u);this.editor=this.createEditor(u)};u.prototype={constructor:u,createEditor:function(t){t=t||{};t=n.extend(!0,{},t);t.toolbar=this.toolbar[0];this.initializeEditor(this.el[0],t)},initializeEditor:function(n,i){var u,r=new t.Editor(this.el[0],i);if(r.on("beforeload",this.syncBootstrapDialogEvents),r.on("beforeload",this.loadParserRules),r.composer.editableArea.contentDocument?this.addMoreShortcuts(r,r.composer.editableArea.contentDocument.body||r.composer.editableArea.contentDocument,i.shortcuts):this.addMoreShortcuts(r,r.composer.editableArea,i.shortcuts),i&&i.events)for(u in i.events)i.events.hasOwnProperty(u)&&r.on(u,i.events[u]);return r},loadParserRules:function(){"string"===n.type(this.config.parserRules)&&n.ajax({dataType:"json",url:this.config.parserRules,context:this,error:function(){void 0},success:function(n){this.config.parserRules=n;void 0}});this.config.pasteParserRulesets&&"string"===n.type(this.config.pasteParserRulesets)&&n.ajax({dataType:"json",url:this.config.pasteParserRulesets,context:this,error:function(){void 0},success:function(n){this.config.pasteParserRulesets=n}})},syncBootstrapDialogEvents:function(){var t=this;n.map(this.toolbar.commandMapping,function(n){return[n]}).filter(function(n){return n.dialog}).map(function(n){return n.dialog}).forEach(function(i){i.on("show",function(){n(this.container).modal("show")});i.on("hide",function(){n(this.container).modal("hide");setTimeout(t.composer.focus,0)});n(i.container).on("shown.bs.modal",function(){n(this).find("input, select, textarea").first().focus()})});this.on("change_view",function(){n(this.toolbar.container.children).find("a.btn").not('[data-wysihtml5-action="change_view"]').toggleClass("disabled")})},createToolbar:function(t,i){var h,o,c=this,u=n("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),s=i.locale||f.locale||"en";r.hasOwnProperty(s)||(void 0,s="en");h=n.extend(!0,{},r.en,r[s]);for(o in i.toolbar)i.toolbar[o]&&u.append(e(o,h,i));return u.find('a[data-wysihtml5-command="formatBlock"]').click(function(t){var u=t.delegateTarget||t.target||t.srcElement,i=n(u),r=i.data("wysihtml5-display-format-name"),f=i.data("wysihtml5-format-name")||i.html();(void 0===r||"true"===r)&&c.toolbar.find(".current-font").text(f)}),u.find('a[data-wysihtml5-command="foreColor"]').click(function(t){var i=t.target||t.srcElement,r=n(i);c.toolbar.find(".current-color").text(r.html())}),this.el.before(u),u},addMoreShortcuts:function(n,i,r){t.dom.observe(i,"keydown",function(i){var u,e=i.keyCode,f=r[e];(i.ctrlKey||i.metaKey||i.altKey)&&f&&t.commands[f]&&(u=n.toolbar.commandMapping[f+":null"],u&&u.dialog&&!u.state?u.dialog.show():t.commands[f].exec(n.composer,f),i.preventDefault())})}};i={resetDefaults:function(){n.fn.wysihtml5.defaultOptions=n.extend(!0,{},n.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var i=n(this);i.data("wysihtml5",new u(i,t))})},shallowExtend:function(t){var r=n.extend({},n.fn.wysihtml5.defaultOptions,t||{},n(this).data()),u=this;return i.bypassDefaults.apply(u,[r])},deepExtend:function(t){var r=n.extend(!0,{},n.fn.wysihtml5.defaultOptions,t||{}),u=this;return i.bypassDefaults.apply(u,[r])},init:function(n){var t=this;return i.shallowExtend.apply(t,[n])}};n.fn.wysihtml5=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(n.error("Method "+t+" does not exist on jQuery.wysihtml5"),void 0):i.init.apply(this,arguments)};n.fn.wysihtml5.Constructor=u;f=n.fn.wysihtml5.defaultOptions={toolbar:{"font-styles":!0,color:!1,emphasis:{small:!0},blockquote:!0,lists:!0,html:!1,link:!0,image:!0,smallmodals:!1},useLineBreaks:!1,parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},strong:{},em:{},p:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url"},set_attributes:{target:"_blank",rel:"nofollow"}},span:1,div:1,small:1,code:1,pre:1}},locale:"en",shortcuts:{83:"small",75:"createLink"}};void 0===n.fn.wysihtml5.defaultOptionsCache&&(n.fn.wysihtml5.defaultOptionsCache=n.extend(!0,{},n.fn.wysihtml5.defaultOptions));r=n.fn.wysihtml5.locale={}};i(n,t)}),function(n){n.commands.small={exec:function(t,i){return n.commands.formatInline.exec(t,i,"small")},state:function(t,i){return n.commands.formatInline.state(t,i,"small")}}}(wysihtml5),function(n){"function"==typeof define&&define.amd?define("bootstrap.wysihtml5.en-US",["jquery","bootstrap.wysihtml5"],n):n(jQuery)}(function(n){n.fn.wysihtml5.locale.en=n.fn.wysihtml5.locale["en-US"]={font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline",small:"Small"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}});
/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.8
 *
 */
(function(n){n.fn.extend({slimScroll:function(i){var r=n.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i);return this.each(function(){function p(t){if(v){t=t||window.event;var i=0;t.wheelDelta&&(i=-t.wheelDelta/120);t.detail&&(i=t.detail/3);n(t.target||t.srcTarget||t.srcElement).closest("."+r.wrapperClass).is(u.parent())&&h(i,!0);t.preventDefault&&!s&&t.preventDefault();s||(t.returnValue=!1)}}function h(n,t,i){s=!1;var e=u.outerHeight()-f.outerHeight();t&&(t=parseInt(f.css("top"))+n*parseInt(r.wheelStep)/100*f.outerHeight(),t=Math.min(Math.max(t,0),e),t=0<n?Math.ceil(t):Math.floor(t),f.css({top:t+"px"}));o=parseInt(f.css("top"))/(u.outerHeight()-f.outerHeight());t=o*(u[0].scrollHeight-u.outerHeight());i&&(t=n,n=t/u[0].scrollHeight*u.outerHeight(),n=Math.min(Math.max(n,0),e),f.css({top:n+"px"}));u.scrollTop(t);u.trigger("slimscrolling",~~t);b();l()}function w(){y=Math.max(u.outerHeight()/u[0].scrollHeight*u.outerHeight(),30);f.css({height:y+"px"});var n=y==u.outerHeight()?"none":"block";f.css({display:n})}function b(){w();clearTimeout(nt);o==~~o?(s=r.allowPageScroll,tt!=o&&u.trigger("slimscroll",0==~~o?"top":"bottom")):s=!1;tt=o;y>=u.outerHeight()?s=!0:(f.stop(!0,!0).fadeIn("fast"),r.railVisible&&c.stop(!0,!0).fadeIn("fast"))}function l(){r.alwaysVisible||(nt=setTimeout(function(){r.disableFadeOut&&v||k||d||(f.fadeOut("slow"),c.fadeOut("slow"))},1e3))}var v,k,d,nt,g,y,o,tt,s=!1,u=n(this),e;if(u.parent().hasClass(r.wrapperClass)){var a=u.scrollTop(),f=u.siblings("."+r.barClass),c=u.siblings("."+r.railClass);if(w(),n.isPlainObject(i)){if("height"in i&&"auto"==i.height?(u.parent().css("height","auto"),u.css("height","auto"),e=u.parent().parent().height(),u.parent().css("height",e),u.css("height",e)):"height"in i&&(e=i.height,u.parent().css("height",e),u.css("height",e)),"scrollTo"in i)a=parseInt(r.scrollTo);else if("scrollBy"in i)a+=parseInt(r.scrollBy);else if("destroy"in i){f.remove();c.remove();u.unwrap();return}h(a,!1,!0)}}else if(!(n.isPlainObject(i)&&"destroy"in i)){r.height="auto"==r.height?u.parent().height():r.height;a=n("<div><\/div>").addClass(r.wrapperClass).css({position:"relative",overflow:"hidden",width:r.width,height:r.height});u.css({overflow:"hidden",width:r.width,height:r.height});var c=n("<div><\/div>").addClass(r.railClass).css({width:r.size,height:"100%",position:"absolute",top:0,display:r.alwaysVisible&&r.railVisible?"block":"none","border-radius":r.railBorderRadius,background:r.railColor,opacity:r.railOpacity,zIndex:90}),f=n("<div><\/div>").addClass(r.barClass).css({background:r.color,width:r.size,position:"absolute",top:0,opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,BorderRadius:r.borderRadius,MozBorderRadius:r.borderRadius,WebkitBorderRadius:r.borderRadius,zIndex:99}),e="right"==r.position?{right:r.distance}:{left:r.distance};c.css(e);f.css(e);u.wrap(a);u.parent().append(f);u.parent().append(c);r.railDraggable&&f.bind("mousedown",function(i){var r=n(document);return d=!0,t=parseFloat(f.css("top")),pageY=i.pageY,r.bind("mousemove.slimscroll",function(n){currTop=t+n.pageY-pageY;f.css("top",currTop);h(0,f.position().top,!1)}),r.bind("mouseup.slimscroll",function(){d=!1;l();r.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(n){return n.stopPropagation(),n.preventDefault(),!1});c.hover(function(){b()},function(){l()});f.hover(function(){k=!0},function(){k=!1});u.hover(function(){v=!0;b();l()},function(){v=!1;l()});u.bind("touchstart",function(n){n.originalEvent.touches.length&&(g=n.originalEvent.touches[0].pageY)});u.bind("touchmove",function(n){s||n.originalEvent.preventDefault();n.originalEvent.touches.length&&(h((g-n.originalEvent.touches[0].pageY)/r.touchScrollStep,!0),g=n.originalEvent.touches[0].pageY)});w();"bottom"===r.start?(f.css({top:u.outerHeight()-f.outerHeight()}),h(0,!0)):"top"!==r.start&&(h(n(r.start).position().top,null,!0),r.alwaysVisible||f.hide());window.addEventListener?(this.addEventListener("DOMMouseScroll",p,!1),this.addEventListener("mousewheel",p,!1)):document.attachEvent("onmousewheel",p)}}),this}});n.fn.extend({slimscroll:n.fn.slimScroll})})(jQuery),function(){"use strict";
/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */
function n(t,r){function h(n,t){return function(){return n.apply(t,arguments)}}var o,f,e,u,s;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=t,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!n.notNeeded(t)){for(f=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],e=this,u=0,s=f.length;u<s;u++)e[f[u]]=h(e[f[u]],e);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0));t.addEventListener("click",this.onClick,!0);t.addEventListener("touchstart",this.onTouchStart,!1);t.addEventListener("touchmove",this.onTouchMove,!1);t.addEventListener("touchend",this.onTouchEnd,!1);t.addEventListener("touchcancel",this.onTouchCancel,!1);Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(n,i,r){var u=Node.prototype.removeEventListener;n==="click"?u.call(t,n,i.hijacked||i,r):u.call(t,n,i,r)},t.addEventListener=function(n,i,r){var u=Node.prototype.addEventListener;n==="click"?u.call(t,n,i.hijacked||(i.hijacked=function(n){n.propagationStopped||i(n)}),r):u.call(t,n,i,r)});typeof t.onclick=="function"&&(o=t.onclick,t.addEventListener("click",function(n){o(n)},!1),t.onclick=null)}}var r=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!r,t=/iP(ad|hone|od)/.test(navigator.userAgent)&&!r,u=t&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=t&&/OS [6-7]_\d/.test(navigator.userAgent),e=navigator.userAgent.indexOf("BB10")>0;n.prototype.needsClick=function(n){switch(n.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(n.disabled)return!0;break;case"input":if(t&&n.type==="file"||n.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(n.className)};n.prototype.needsFocus=function(n){switch(n.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(n.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!n.disabled&&!n.readOnly;default:return/\bneedsfocus\b/.test(n.className)}};n.prototype.sendClick=function(n,t){var r,i;document.activeElement&&document.activeElement!==n&&document.activeElement.blur();i=t.changedTouches[0];r=document.createEvent("MouseEvents");r.initMouseEvent(this.determineEventType(n),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);r.forwardedTouchEvent=!0;n.dispatchEvent(r)};n.prototype.determineEventType=function(n){return i&&n.tagName.toLowerCase()==="select"?"mousedown":"click"};n.prototype.focus=function(n){var i;t&&n.setSelectionRange&&n.type.indexOf("date")!==0&&n.type!=="time"&&n.type!=="month"?(i=n.value.length,n.setSelectionRange(i,i)):n.focus()};n.prototype.updateScrollParent=function(n){var i,t;if(i=n.fastClickScrollParent,!i||!i.contains(n)){t=n;do{if(t.scrollHeight>t.offsetHeight){i=t;n.fastClickScrollParent=t;break}t=t.parentElement}while(t)}i&&(i.fastClickLastScrollTop=i.scrollTop)};n.prototype.getTargetElementFromEventTarget=function(n){return n.nodeType===Node.TEXT_NODE?n.parentNode:n};n.prototype.onTouchStart=function(n){var r,i,f;if(n.targetTouches.length>1)return!0;if(r=this.getTargetElementFromEventTarget(n.target),i=n.targetTouches[0],t){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!u){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return n.preventDefault(),!1;this.lastTouchIdentifier=i.identifier;this.updateScrollParent(r)}}return this.trackingClick=!0,this.trackingClickStart=n.timeStamp,this.targetElement=r,this.touchStartX=i.pageX,this.touchStartY=i.pageY,n.timeStamp-this.lastClickTime<this.tapDelay&&n.preventDefault(),!0};n.prototype.touchHasMoved=function(n){var t=n.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1};n.prototype.onTouchMove=function(n){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(n.target)||this.touchHasMoved(n))&&(this.trackingClick=!1,this.targetElement=null),!0):!0};n.prototype.findControl=function(n){return n.control!==undefined?n.control:n.htmlFor?document.getElementById(n.htmlFor):n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};n.prototype.onTouchEnd=function(n){var s,c,e,o,h,r=this.targetElement;if(!this.trackingClick)return!0;if(n.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(n.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=n.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(h=n.changedTouches[0],r=document.elementFromPoint(h.pageX-window.pageXOffset,h.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),e=r.tagName.toLowerCase(),e==="label"){if(s=this.findControl(r),s){if(this.focus(r),i)return!1;r=s}}else if(this.needsFocus(r))return n.timeStamp-c>100||t&&window.top!==window&&e==="input"?(this.targetElement=null,!1):(this.focus(r),this.sendClick(r,n),t&&e==="select"||(this.targetElement=null,n.preventDefault()),!1);return t&&!u&&(o=r.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(r)||(n.preventDefault(),this.sendClick(r,n)),!1)};n.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};n.prototype.onMouse=function(n){return this.targetElement?n.forwardedTouchEvent?!0:n.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(n.stopImmediatePropagation?n.stopImmediatePropagation():n.propagationStopped=!0,n.stopPropagation(),n.preventDefault(),!1):!0:!0:!0};n.prototype.onClick=function(n){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):n.target.type==="submit"&&n.detail===0?!0:(t=this.onMouse(n),t||(this.targetElement=null),t)};n.prototype.destroy=function(){var n=this.layer;i&&(n.removeEventListener("mouseover",this.onMouse,!0),n.removeEventListener("mousedown",this.onMouse,!0),n.removeEventListener("mouseup",this.onMouse,!0));n.removeEventListener("click",this.onClick,!0);n.removeEventListener("touchstart",this.onTouchStart,!1);n.removeEventListener("touchmove",this.onTouchMove,!1);n.removeEventListener("touchend",this.onTouchEnd,!1);n.removeEventListener("touchcancel",this.onTouchCancel,!1)};n.notNeeded=function(n){var t,r,u,f;if(typeof ontouchstart=="undefined")return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r)if(i){if(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||r>31&&document.documentElement.scrollWidth<=window.outerWidth))return!0}else return!0;return e&&(u=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),u[1]>=10&&u[2]>=3&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))?!0:n.style.msTouchAction==="none"||n.style.touchAction==="manipulation"?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))?!0:n.style.touchAction==="none"||n.style.touchAction==="manipulation"?!0:!1};n.attach=function(t,i){return new n(t,i)};typeof define=="function"&&typeof define.amd=="object"&&define.amd?define(function(){return n}):typeof module!="undefined"&&module.exports?(module.exports=n.attach,module.exports.FastClick=n):window.FastClick=n}();
/*! AdminLTE app.js
* ================
* Main JS application file for AdminLTE v2. This file
* should be included in all pages. It controls some layout
* options and implements exclusive AdminLTE plugins.
*
* @author Colorlib
* @support <https://github.com/ColorlibHQ/AdminLTE/issues>
* @version 2.4.15
* @repository git://github.com/ColorlibHQ/AdminLTE.git
* @license MIT <http://opensource.org/licenses/MIT>
*/
if("undefined"==typeof jQuery)throw new Error("AdminLTE requires jQuery");+function(n){"use strict";function i(i){return this.each(function(){var e=n(this),u=e.data(r),o;if(u||(o=n.extend({},f,e.data(),"object"==typeof i&&i),e.data(r,u=new t(e,o))),"string"==typeof u){if(void 0===u[i])throw new Error("No method named "+i);u[i]()}})}var r="lte.boxrefresh",f={source:"",params:{},trigger:".refresh-btn",content:".box-body",loadInContent:!0,responseType:"",overlayTemplate:'<div class="overlay"><div class="fa fa-refresh fa-spin"><\/div><\/div>',onLoadStart:function(){},onLoadDone:function(n){return n}},e={data:'[data-widget="box-refresh"]'},t=function(t,i){if(this.element=t,this.options=i,this.$overlay=n(i.overlayTemplate),""===i.source)throw new Error("Source url was not defined. Please specify a url in your BoxRefresh source option.");this._setUpListeners();this.load()},u;t.prototype.load=function(){this._addOverlay();this.options.onLoadStart.call(n(this));n.get(this.options.source,this.options.params,function(t){this.options.loadInContent&&n(this.element).find(this.options.content).html(t);this.options.onLoadDone.call(n(this),t);this._removeOverlay()}.bind(this),""!==this.options.responseType&&this.options.responseType)};t.prototype._setUpListeners=function(){n(this.element).on("click",this.options.trigger,function(n){n&&n.preventDefault();this.load()}.bind(this))};t.prototype._addOverlay=function(){n(this.element).append(this.$overlay)};t.prototype._removeOverlay=function(){n(this.$overlay).remove()};u=n.fn.boxRefresh;n.fn.boxRefresh=i;n.fn.boxRefresh.Constructor=t;n.fn.boxRefresh.noConflict=function(){return n.fn.boxRefresh=u,this};n(window).on("load",function(){n(e.data).each(function(){i.call(n(this))})})}(jQuery),function(n){"use strict";function u(t){return this.each(function(){var r=n(this),u=r.data(f),e;if(u||(e=n.extend({},s,r.data(),"object"==typeof t&&t),r.data(f,u=new i(r,e))),"string"==typeof t){if(void 0===u[t])throw new Error("No method named "+t);u[t]()}})}var f="lte.boxwidget",s={animationSpeed:500,collapseTrigger:'[data-widget="collapse"]',removeTrigger:'[data-widget="remove"]',collapseIcon:"fa-minus",expandIcon:"fa-plus",removeIcon:"fa-times"},t={data:".box",collapsed:".collapsed-box",header:".box-header",body:".box-body",footer:".box-footer",tools:".box-tools"},e={collapsed:"collapsed-box"},r={collapsing:"collapsing.boxwidget",collapsed:"collapsed.boxwidget",expanding:"expanding.boxwidget",expanded:"expanded.boxwidget",removing:"removing.boxwidget",removed:"removed.boxwidget"},i=function(n,t){this.element=n;this.options=t;this._setUpListeners()},o;i.prototype.toggle=function(){n(this.element).is(t.collapsed)?this.expand():this.collapse()};i.prototype.expand=function(){var u=n.Event(r.expanded),f=n.Event(r.expanding),o=this.options.collapseIcon,i=this.options.expandIcon;n(this.element).removeClass(e.collapsed);n(this.element).children(t.header+", "+t.body+", "+t.footer).children(t.tools).find("."+i).removeClass(i).addClass(o);n(this.element).children(t.body+", "+t.footer).slideDown(this.options.animationSpeed,function(){n(this.element).trigger(u)}.bind(this)).trigger(f)};i.prototype.collapse=function(){var u=n.Event(r.collapsed),f=n.Event(r.collapsing),i=this.options.collapseIcon,o=this.options.expandIcon;n(this.element).children(t.header+", "+t.body+", "+t.footer).children(t.tools).find("."+i).removeClass(i).addClass(o);n(this.element).children(t.body+", "+t.footer).slideUp(this.options.animationSpeed,function(){n(this.element).addClass(e.collapsed);n(this.element).trigger(u)}.bind(this)).trigger(f)};i.prototype.remove=function(){var t=n.Event(r.removed),i=n.Event(r.removing);n(this.element).slideUp(this.options.animationSpeed,function(){n(this.element).trigger(t);n(this.element).remove()}.bind(this)).trigger(i)};i.prototype._setUpListeners=function(){var t=this;n(this.element).on("click",this.options.collapseTrigger,function(i){return i&&i.preventDefault(),t.toggle(n(this)),!1});n(this.element).on("click",this.options.removeTrigger,function(i){return i&&i.preventDefault(),t.remove(n(this)),!1})};o=n.fn.boxWidget;n.fn.boxWidget=u;n.fn.boxWidget.Constructor=i;n.fn.boxWidget.noConflict=function(){return n.fn.boxWidget=o,this};n(window).on("load",function(){n(t.data).each(function(){u.call(n(this))})})}(jQuery),function(n){"use strict";function u(t){return this.each(function(){var r=n(this),u=r.data(f),e;u||(e=n.extend({},s,r.data(),"object"==typeof t&&t),r.data(f,u=new i(r,e)));"string"==typeof t&&u.toggle()})}var f="lte.controlsidebar",s={slide:!0},t={sidebar:".control-sidebar",data:'[data-toggle="control-sidebar"]',open:".control-sidebar-open",bg:".control-sidebar-bg",wrapper:".wrapper",content:".content-wrapper",boxed:".layout-boxed"},r={open:"control-sidebar-open",fixed:"fixed"},e={collapsed:"collapsed.controlsidebar",expanded:"expanded.controlsidebar"},i=function(n,t){this.element=n;this.options=t;this.hasBindedResize=!1;this.init()},o;i.prototype.init=function(){n(this.element).is(t.data)||n(this).on("click",this.toggle);this.fix();n(window).resize(function(){this.fix()}.bind(this))};i.prototype.toggle=function(i){i&&i.preventDefault();this.fix();n(t.sidebar).is(t.open)||n("body").is(t.open)?this.collapse():this.expand()};i.prototype.expand=function(){n(t.sidebar).show();this.options.slide?n(t.sidebar).addClass(r.open):n("body").addClass(r.open);n(this.element).trigger(n.Event(e.expanded))};i.prototype.collapse=function(){n("body, "+t.sidebar).removeClass(r.open);n(t.sidebar).fadeOut();n(this.element).trigger(n.Event(e.collapsed))};i.prototype.fix=function(){n("body").is(t.boxed)&&this._fixForBoxed(n(t.bg))};i.prototype._fixForBoxed=function(i){i.css({position:"absolute",height:n(t.wrapper).height()})};o=n.fn.controlSidebar;n.fn.controlSidebar=u;n.fn.controlSidebar.Constructor=i;n.fn.controlSidebar.noConflict=function(){return n.fn.controlSidebar=o,this};n(document).on("click",t.data,function(t){t&&t.preventDefault();u.call(n(this),"toggle")})}(jQuery),function(n){"use strict";function i(i){return this.each(function(){var u=n(this),f=u.data(r);f||u.data(r,f=new t(u));"string"==typeof i&&f.toggle(u)})}var r="lte.directchat",u={data:'[data-widget="chat-pane-toggle"]',box:".direct-chat"},e={open:"direct-chat-contacts-open"},t=function(n){this.element=n},f;t.prototype.toggle=function(n){n.parents(u.box).first().toggleClass(e.open)};f=n.fn.directChat;n.fn.directChat=i;n.fn.directChat.Constructor=t;n.fn.directChat.noConflict=function(){return n.fn.directChat=f,this};n(document).on("click",u.data,function(t){t&&t.preventDefault();i.call(n(this),"toggle")})}(jQuery),function(n){"use strict";function f(t){return this.each(function(){var i=n(this),u=i.data(e),f;u||(f=n.extend({},s,i.data(),"object"==typeof t&&t),i.data(e,u=new r(f)));"toggle"===t&&u.toggle()})}var e="lte.pushmenu",s={collapseScreenSize:767,expandOnHover:!1,expandTransitionDelay:200},i={collapsed:".sidebar-collapse",open:".sidebar-open",mainSidebar:".main-sidebar",contentWrapper:".content-wrapper",searchInput:".sidebar-form .form-control",button:'[data-toggle="push-menu"]',mini:".sidebar-mini",expanded:".sidebar-expanded-on-hover",layoutFixed:".fixed"},t={collapsed:"sidebar-collapse",open:"sidebar-open",mini:"sidebar-mini",expanded:"sidebar-expanded-on-hover",expandFeature:"sidebar-mini-expand-feature",layoutFixed:"fixed"},u={expanded:"expanded.pushMenu",collapsed:"collapsed.pushMenu"},r=function(n){this.options=n;this.init()},o;r.prototype.init=function(){(this.options.expandOnHover||n("body").is(i.mini+i.layoutFixed))&&(this.expandOnHover(),n("body").addClass(t.expandFeature));n(i.contentWrapper).click(function(){n(window).width()<=this.options.collapseScreenSize&&n("body").hasClass(t.open)&&this.close()}.bind(this));n(i.searchInput).click(function(n){n.stopPropagation()})};r.prototype.toggle=function(){var r=n(window).width(),i=!n("body").hasClass(t.collapsed);r<=this.options.collapseScreenSize&&(i=n("body").hasClass(t.open));i?this.close():this.open()};r.prototype.open=function(){n(window).width()>this.options.collapseScreenSize?n("body").removeClass(t.collapsed).trigger(n.Event(u.expanded)):n("body").addClass(t.open).trigger(n.Event(u.expanded))};r.prototype.close=function(){n(window).width()>this.options.collapseScreenSize?n("body").addClass(t.collapsed).trigger(n.Event(u.collapsed)):n("body").removeClass(t.open+" "+t.collapsed).trigger(n.Event(u.collapsed))};r.prototype.expandOnHover=function(){n(i.mainSidebar).hover(function(){n("body").is(i.mini+i.collapsed)&&n(window).width()>this.options.collapseScreenSize&&this.expand()}.bind(this),function(){n("body").is(i.expanded)&&this.collapse()}.bind(this))};r.prototype.expand=function(){setTimeout(function(){n("body").removeClass(t.collapsed).addClass(t.expanded)},this.options.expandTransitionDelay)};r.prototype.collapse=function(){setTimeout(function(){n("body").removeClass(t.expanded).addClass(t.collapsed)},this.options.expandTransitionDelay)};o=n.fn.pushMenu;n.fn.pushMenu=f;n.fn.pushMenu.Constructor=r;n.fn.pushMenu.noConflict=function(){return n.fn.pushMenu=o,this};n(document).on("click",i.button,function(t){t.preventDefault();f.call(n(this),"toggle")});n(window).on("load",function(){f.call(n(i.button))})}(jQuery),function(n){"use strict";function i(i){return this.each(function(){var f=n(this),u=f.data(r),o;if(u||(o=n.extend({},e,f.data(),"object"==typeof i&&i),f.data(r,u=new t(f,o))),"string"==typeof u){if(void 0===u[i])throw new Error("No method named "+i);u[i]()}})}var r="lte.todolist",e={onCheck:function(n){return n},onUnCheck:function(n){return n}},u={data:'[data-widget="todo-list"]'},o={done:"done"},t=function(n,t){this.element=n;this.options=t;this._setUpListeners()},f;t.prototype.toggle=function(n){if(n.parents(u.li).first().toggleClass(o.done),!n.prop("checked"))return void this.unCheck(n);this.check(n)};t.prototype.check=function(n){this.options.onCheck.call(n)};t.prototype.unCheck=function(n){this.options.onUnCheck.call(n)};t.prototype._setUpListeners=function(){var t=this;n(this.element).on("change ifChanged","input:checkbox",function(){t.toggle(n(this))})};f=n.fn.todoList;n.fn.todoList=i;n.fn.todoList.Constructor=t;n.fn.todoList.noConflict=function(){return n.fn.todoList=f,this};n(window).on("load",function(){n(u.data).each(function(){i.call(n(this))})})}(jQuery),function(n){"use strict";function u(t){return this.each(function(){var i=n(this),u;i.data(f)||(u=n.extend({},s,i.data(),"object"==typeof t&&t),i.data(f,new r(i,u)))})}var f="lte.tree",s={animationSpeed:500,accordion:!0,followLink:!1,trigger:".treeview a"},t={tree:".tree",treeview:".treeview",treeviewMenu:".treeview-menu",open:".menu-open, .active",li:"li",data:'[data-widget="tree"]',active:".active"},i={open:"menu-open",tree:"tree"},e={collapsed:"collapsed.tree",expanded:"expanded.tree"},r=function(r,u){this.element=r;this.options=u;n(this.element).addClass(i.tree);n(t.treeview+t.active,this.element).addClass(i.open);this._setUpListeners()},o;r.prototype.toggle=function(n,r){var f=n.next(t.treeviewMenu),u=n.parent(),e=u.hasClass(i.open);u.is(t.treeview)&&(this.options.followLink&&"#"!==n.attr("href")||r.preventDefault(),e?this.collapse(f,u):this.expand(f,u))};r.prototype.expand=function(r,u){var s=n.Event(e.expanded),f,o;this.options.accordion&&(f=u.siblings(t.open),o=f.children(t.treeviewMenu),this.collapse(o,f));u.addClass(i.open);r.slideDown(this.options.animationSpeed,function(){n(this.element).trigger(s);u.height("auto")}.bind(this))};r.prototype.collapse=function(r,u){var f=n.Event(e.collapsed);u.removeClass(i.open);r.slideUp(this.options.animationSpeed,function(){n(this.element).trigger(f);u.find(t.treeview).removeClass(i.open).find(t.treeviewMenu).hide()}.bind(this))};r.prototype._setUpListeners=function(){var t=this;n(this.element).on("click",this.options.trigger,function(i){t.toggle(n(this),i)})};o=n.fn.tree;n.fn.tree=u;n.fn.tree.Constructor=r;n.fn.tree.noConflict=function(){return n.fn.tree=o,this};n(window).on("load",function(){n(t.data).each(function(){u.call(n(this))})})}(jQuery),function(n){"use strict";function u(t){return this.each(function(){var u=n(this),r=u.data(f),e;if(r||(e=n.extend({},o,u.data(),"object"==typeof t&&t),u.data(f,r=new i(e))),"string"==typeof t){if(void 0===r[t])throw new Error("No method named "+t);r[t]()}})}var f="lte.layout",o={slimscroll:!0,resetHeight:!0},t={wrapper:".wrapper",contentWrapper:".content-wrapper",layoutBoxed:".layout-boxed",mainFooter:".main-footer",mainHeader:".main-header",mainSidebar:".main-sidebar",slimScrollDiv:"slimScrollDiv",sidebar:".sidebar",controlSidebar:".control-sidebar",fixed:".fixed",sidebarMenu:".sidebar-menu",logo:".main-header .logo"},r={fixed:"fixed",holdTransition:"hold-transition"},i=function(n){this.options=n;this.bindedResize=!1;this.activate()},e;i.prototype.activate=function(){this.fix();this.fixSidebar();n("body").removeClass(r.holdTransition);this.options.resetHeight&&n("body, html, "+t.wrapper).css({height:"auto","min-height":"100%"});this.bindedResize||(n(window).resize(function(){this.fix();this.fixSidebar();n(t.logo+", "+t.sidebar).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){this.fix();this.fixSidebar()}.bind(this))}.bind(this)),this.bindedResize=!0);n(t.sidebarMenu).on("expanded.tree",function(){this.fix();this.fixSidebar()}.bind(this));n(t.sidebarMenu).on("collapsed.tree",function(){this.fix();this.fixSidebar()}.bind(this))};i.prototype.fix=function(){var e,u;n(t.layoutBoxed+" > "+t.wrapper).css("overflow","hidden");var o=n(t.mainFooter).outerHeight()||0,s=n(t.mainHeader).outerHeight()||0,h=s+o,i=n(window).height(),f=n(t.sidebar).outerHeight()||0;n("body").hasClass(r.fixed)?n(t.contentWrapper).css("min-height",i-o):(i>=f+s?(n(t.contentWrapper).css("min-height",i-h),e=i-h):(n(t.contentWrapper).css("min-height",f),e=f),u=n(t.controlSidebar),void 0!==u&&u.height()>e&&n(t.contentWrapper).css("min-height",u.height()))};i.prototype.fixSidebar=function(){if(!n("body").hasClass(r.fixed))return void(void 0!==n.fn.slimScroll&&n(t.sidebar).slimScroll({destroy:!0}).height("auto"));this.options.slimscroll&&void 0!==n.fn.slimScroll&&0===n(t.mainSidebar).find(t.slimScrollDiv).length&&n(t.sidebar).slimScroll({height:n(window).height()-n(t.mainHeader).height()+"px"})};e=n.fn.layout;n.fn.layout=u;n.fn.layout.Constuctor=i;n.fn.layout.noConflict=function(){return n.fn.layout=e,this};n(window).on("load",function(){u.call(n("body"))})}(jQuery);$(function(){"use strict";function tt(n){if(typeof Storage!="undefined")return localStorage.getItem(n);window.alert("Please use a modern browser to properly view this template!")}function it(n,t){typeof Storage!="undefined"?localStorage.setItem(n,t):window.alert("Please use a modern browser to properly view this template!")}function o(n){$("body").toggleClass(n);f.fixSidebar();$("body").hasClass("fixed")&&n=="fixed"&&(u.expandOnHover(),f.activate());i.fix()}function s(n){return $.each(r,function(n){$("body").removeClass(r[n])}),$("body").addClass(n),it("skin",n),!1}function rt(){var n=tt("skin");n&&$.inArray(n,r)&&s(n);$("[data-skin]").on("click",function(n){$(this).hasClass("knob")||(n.preventDefault(),s($(this).data("skin")))});$("[data-layout]").on("click",function(){o($(this).data("layout"))});$("[data-controlsidebar]").on("click",function(){o($(this).data("controlsidebar"));var n=!i.options.slide;i.options.slide=n;n||$(".control-sidebar").removeClass("control-sidebar-open")});$('[data-sidebarskin="toggle"]').on("click",function(){var n=$(".control-sidebar");n.hasClass("control-sidebar-dark")?(n.removeClass("control-sidebar-dark"),n.addClass("control-sidebar-light")):(n.removeClass("control-sidebar-light"),n.addClass("control-sidebar-dark"))});$('[data-enable="expandOnHover"]').on("click",function(){$(this).attr("disabled",!0);u.expandOnHover();$("body").hasClass("sidebar-collapse")||$('[data-layout="sidebar-collapse"]').click()});$("body").hasClass("fixed")&&$('[data-layout="fixed"]').attr("checked","checked");$("body").hasClass("layout-boxed")&&$('[data-layout="layout-boxed"]').attr("checked","checked");$("body").hasClass("sidebar-collapse")&&$('[data-layout="sidebar-collapse"]').attr("checked","checked")}var r,e,h,t,n,c,l,a,v,y,p,w,b,k,d,g,nt;$('[data-toggle="control-sidebar"]').controlSidebar();$('[data-toggle="push-menu"]').pushMenu();var u=$('[data-toggle="push-menu"]').data("lte.pushmenu"),i=$('[data-toggle="control-sidebar"]').data("lte.controlsidebar"),f=$("body").data("lte.layout");$(window).on("load",function(){u=$('[data-toggle="push-menu"]').data("lte.pushmenu");i=$('[data-toggle="control-sidebar"]').data("lte.controlsidebar");f=$("body").data("lte.layout")});r=["skin-blue","skin-black","skin-red","skin-yellow","skin-purple","skin-green","skin-blue-light","skin-black-light","skin-red-light","skin-yellow-light","skin-purple-light","skin-green-light"];e=$("<div />",{id:"control-sidebar-theme-demo-options-tab","class":"tab-pane active"});h=$("<li />",{"class":"active"}).html("<a href='#control-sidebar-theme-demo-options-tab' data-toggle='tab'><i class=\"fa fa-wrench\"><\/i><\/a>");$('[href="#control-sidebar-home-tab"]').parent().before(h);t=$("<div />");t.append('<h4 class="control-sidebar-heading">Layout Options<\/h4><div class="form-group"><label class="control-sidebar-subheading"><input type="checkbox"data-layout="fixed"class="pull-right"/> Fixed layout<\/label><p>Activate the fixed layout. You can\'t use fixed and boxed layouts together<\/p><\/div><div class="form-group"><label class="control-sidebar-subheading"><input type="checkbox"data-layout="layout-boxed" class="pull-right"/> Boxed Layout<\/label><p>Activate the boxed layout<\/p><\/div><div class="form-group"><label class="control-sidebar-subheading"><input type="checkbox"data-layout="sidebar-collapse"class="pull-right"/> Toggle Sidebar<\/label><p>Toggle the left sidebar\'s state (open or collapse)<\/p><\/div><div class="form-group"><label class="control-sidebar-subheading"><input type="checkbox"data-enable="expandOnHover"class="pull-right"/> Sidebar Expand on Hover<\/label><p>Let the sidebar mini expand on hover<\/p><\/div><div class="form-group"><label class="control-sidebar-subheading"><input type="checkbox"data-controlsidebar="control-sidebar-open"class="pull-right"/> Toggle Right Sidebar Slide<\/label><p>Toggle between slide over content and push content effects<\/p><\/div><div class="form-group"><label class="control-sidebar-subheading"><input type="checkbox"data-sidebarskin="toggle"class="pull-right"/> Toggle Right Sidebar Skin<\/label><p>Toggle between dark and light skins for the right sidebar<\/p><\/div>');n=$("<ul />",{"class":"list-unstyled clearfix"});c=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-blue" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px; background: #367fa9"><\/span><span class="bg-light-blue" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Blue<\/p>');n.append(c);l=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-black" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div style="box-shadow: 0 0 2px rgba(0,0,0,0.1)" class="clearfix"><span style="display:block; width: 20%; float: left; height: 7px; background: #fefefe"><\/span><span style="display:block; width: 80%; float: left; height: 7px; background: #fefefe"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Black<\/p>');n.append(l);a=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-purple" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-purple-active"><\/span><span class="bg-purple" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Purple<\/p>');n.append(a);v=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-green" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-green-active"><\/span><span class="bg-green" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Green<\/p>');n.append(v);y=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-red" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-red-active"><\/span><span class="bg-red" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Red<\/p>');n.append(y);p=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-yellow" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-yellow-active"><\/span><span class="bg-yellow" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Yellow<\/p>');n.append(p);w=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-blue-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px; background: #367fa9"><\/span><span class="bg-light-blue" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Blue Light<\/p>');n.append(w);b=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-black-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div style="box-shadow: 0 0 2px rgba(0,0,0,0.1)" class="clearfix"><span style="display:block; width: 20%; float: left; height: 7px; background: #fefefe"><\/span><span style="display:block; width: 80%; float: left; height: 7px; background: #fefefe"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Black Light<\/p>');n.append(b);k=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-purple-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-purple-active"><\/span><span class="bg-purple" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Purple Light<\/p>');n.append(k);d=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-green-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-green-active"><\/span><span class="bg-green" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Green Light<\/p>');n.append(d);g=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-red-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-red-active"><\/span><span class="bg-red" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Red Light<\/p>');n.append(g);nt=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-yellow-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-yellow-active"><\/span><span class="bg-yellow" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Yellow Light<\/p>');n.append(nt);t.append('<h4 class="control-sidebar-heading">Skins<\/h4>');t.append(n);e.append(t);$("#control-sidebar-home-tab").after(e);rt();$('[data-toggle="tooltip"]').tooltip()});$(function(){"use strict";var t,n;$(".connectedSortable").sortable({containment:$("section.content"),placeholder:"sort-highlight",connectWith:".connectedSortable",handle:".box-header, .nav-tabs",forcePlaceholderSize:!0,zIndex:999999});$(".connectedSortable .box-header, .connectedSortable .nav-tabs-custom").css("cursor","move");$(".todo-list").sortable({placeholder:"sort-highlight",handle:".handle",forcePlaceholderSize:!0,zIndex:999999});$(".textarea").wysihtml5();$(".daterange").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment().subtract(29,"days"),endDate:moment()},function(n,t){window.alert("You chose: "+n.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))});$(".knob").knob();t={US:398,SA:400,CA:1e3,DE:500,FR:760,CN:300,AU:700,BR:600,IN:800,GB:320,RU:3e3};$("#world-map").vectorMap({map:"world_mill_en",backgroundColor:"transparent",regionStyle:{initial:{fill:"#e4e4e4","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":1}},series:{regions:[{values:t,scale:["#92c1dc","#ebf4f9"],normalizeFunction:"polynomial"}]},onRegionLabelShow:function(n,i,r){typeof t[r]!="undefined"&&i.html(i.html()+": "+t[r]+" new visitors")}});n=[1e3,1200,920,927,931,1027,819,930,1021];$("#sparkline-1").sparkline(n,{type:"line",lineColor:"#92c1dc",fillColor:"#ebf4f9",height:"50",width:"80"});n=[515,519,520,522,652,810,370,627,319,630,921];$("#sparkline-2").sparkline(n,{type:"line",lineColor:"#92c1dc",fillColor:"#ebf4f9",height:"50",width:"80"});n=[15,19,20,22,33,27,31,27,19,30,21];$("#sparkline-3").sparkline(n,{type:"line",lineColor:"#92c1dc",fillColor:"#ebf4f9",height:"50",width:"80"});$("#calendar").datepicker();$("#chat-box").slimScroll({height:"250px"});var i=new Morris.Area({element:"revenue-chart",resize:!0,data:[{y:"2011 Q1",item1:2666,item2:2666},{y:"2011 Q2",item1:2778,item2:2294},{y:"2011 Q3",item1:4912,item2:1969},{y:"2011 Q4",item1:3767,item2:3597},{y:"2012 Q1",item1:6810,item2:1914},{y:"2012 Q2",item1:5670,item2:4293},{y:"2012 Q3",item1:4820,item2:3795},{y:"2012 Q4",item1:15073,item2:5967},{y:"2013 Q1",item1:10687,item2:4460},{y:"2013 Q2",item1:8432,item2:5713}],xkey:"y",ykeys:["item1","item2"],labels:["Item 1","Item 2"],lineColors:["#a0d0e0","#3c8dbc"],hideHover:"auto"}),r=new Morris.Line({element:"line-chart",resize:!0,data:[{y:"2011 Q1",item1:2666},{y:"2011 Q2",item1:2778},{y:"2011 Q3",item1:4912},{y:"2011 Q4",item1:3767},{y:"2012 Q1",item1:6810},{y:"2012 Q2",item1:5670},{y:"2012 Q3",item1:4820},{y:"2012 Q4",item1:15073},{y:"2013 Q1",item1:10687},{y:"2013 Q2",item1:8432}],xkey:"y",ykeys:["item1"],labels:["Item 1"],lineColors:["#efefef"],lineWidth:2,hideHover:"auto",gridTextColor:"#fff",gridStrokeWidth:.4,pointSize:4,pointStrokeColors:["#efefef"],gridLineColor:"#efefef",gridTextFamily:"Open Sans",gridTextSize:10}),u=new Morris.Donut({element:"sales-chart",resize:!0,colors:["#3c8dbc","#f56954","#00a65a"],data:[{label:"Download Sales",value:12},{label:"In-Store Sales",value:30},{label:"Mail-Order Sales",value:20}],hideHover:"auto"});$(".box ul.nav a").on("shown.bs.tab",function(){i.redraw();u.redraw();r.redraw()});$(".todo-list").todoList({onCheck:function(){window.console.log($(this),"The element has been checked")},onUnCheck:function(){window.console.log($(this),"The element has been unchecked")}})});